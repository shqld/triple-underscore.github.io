<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Battery Status API （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />

<script src="common0.js" ></script>
<script src="common1.js" async></script>


<script>
Util.ready = function(){
	const source_data = {
		toc_main: 'MAIN0',
		generate: expand
	}

	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;
	const unicode_map = this.unicode_map;

	let current_ifc = '';

	return this.html.replace(
		/%[\w\-~一-鿆]+|`(.*?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let text = key;
let href = '';

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `#bib-${key.toLowerCase()}`;
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case '0':
	href = link_map[ `m.${key}`];
	break;
case 'l':
	text = `"<code class="literal">${key}</code>"`;
	break;
case 'en':
	return `<span lang="en-x-a0">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;

	}
}
</script>



<script type="text/plain" id="_source_data">


●●options
spec_title:Battery Status API
spec_date:2019-06-26
trans_update:2019-09-03
source_checked:190626
original_url:https://w3c.github.io/battery/
	abbr_url:BATTERY
spec_status:ED
ref_id_prefix:bib-
ref_id_lowercase:true
page_state_key:SENSORS
site_nav:sensors
	conformance:w3c
copyright:2019,permissive
trans_1st_pub:2019-09-03


●●class_map
E:error
et:event-type
e:element
v:value
jv:js-value

●●tag_map
c:code
I:code
E:code
m:code
et:code
e:code
v:code
jv:code
i:i
cite:cite

●●original_id_map

●●mdn_urls
dom-batterymanager:API/BatteryManager

dfn-chargingchange:Events/chargingchange
dfn-chargingtimechange:Events/chargingtimechange
dfn-dischargingtimechange:Events/dischargingtimechange
dfn-levelchange:Events/levelchange

●●link_map

Exposed:~WEBIDLjs#Exposed
boolean:~WEBIDL#idl-boolean
double:~WEBIDL#idl-double
unrestricted double:~WEBIDL#idl-unrestricted-double
Promise:~WEBIDL#idl-promise
I.Promise:~WEBIDL#idl-promise


E.SecurityError:~WEBIDL#securityerror

I.EventHandler:~WAPI#eventhandler
I.EventTarget:~DOM4#eventtarget
I.Navigator:~HTMLnavigator#navigator
I.Window:~WINDOW#window
I.BatteryManager:#dom-batterymanager

	E.SecurityError:#dfn-securityerror
	I.EventHandler:#dfn-eventhandler
	I.EventTarget:#dfn-eventtarget
	I.Navigator:#dom-navigator
	I.Window:~WINDOW#window
	DOMException:#dfn-domexception
	Promise:#dfn-promise


m.charging:#dom-batterymanager-charging
m.chargingTime:#dom-batterymanager-chargingtime
m.dischargingTime:#dom-batterymanager-dischargingtime
m.getBattery:#dom-navigator-getbattery
m.level:#dom-batterymanager-level
m.onchargingchange:#dom-batterymanager-onchargingchange
m.onchargingtimechange:#dom-batterymanager-onchargingtimechange
m.ondischargingtimechange:#dom-batterymanager-ondischargingtimechange
m.onlevelchange:#dom-batterymanager-onlevelchange

m.addEventListener:~DOM4#dom-eventtarget-addeventlistener
m.querySelector:~DOM4#dom-parentnode-queryselector
m.textContent:~DOM4#dom-node-textcontent
	onload
	document

et.chargingchange:#dfn-chargingchange
et.chargingtimechange:#dfn-chargingtimechange
et.dischargingtimechange:#dfn-dischargingtimechange
et.levelchange:#dfn-levelchange

	●用語
~battery~promise:#dfn-battery-promise
現在の~battery状態s情報:#dfn-current-battery-status-information
~battery状態s情報を報告-不能:#dfn-unable-to-report-the-battery-status-information
新たな~BatteryManager~objを作成する:#dfn-create-a-new-batterymanager-object
既定の値:#dfn-default-values
	~UA:#dfn-user-agent

	●用語（外部
~taskを~queueする:~WAPI#queue-a-task
~eventを発火する:~DOM4#concept-event-fire
~event~handler:~WAPI#event-handlers
~event~handler~event型:~WAPI#event-handler-event-type
閲覧文脈:~BROWSERS#browsing-context
~top-level閲覧文脈:~BROWSERS#top-level-browsing-context
現任の設定群~obj:~WAPI#incumbent-settings-object
~secure文脈:~SECURE-CONTEXT#secure-context


新たな~promise:~WEBIDLjs#a-new-promise

	Promise:~TC39#sec-promise-objects
~Realm:~TC39#realm

	~realm:#dfn-realm
	閲覧文脈:#dfn-browsing-context
	~event~handler~event型:#dfn-event-handler-event-types
	~event~handler:#dfn-event-handlers
	~eventを発火する:#dfn-fires-an-event
	現任の設定群~obj:#dfn-incumbent-settings-object
	~taskを~queueする:#dfn-queue-a-task
	~secure文脈:#dfn-secure-context
	~top-level閲覧文脈:#dfn-top-level-browsing-context

	:https://www.w3.org/TR/2014/CR-battery-status-20141209/
	diff:＊/Sites/WEb_/sensor/battery/PR-diff.html
	:https://lists.w3.org/Archives/Public/public-device-apis/2015Aug/0000.html
	:https://w3c.github.io/test-results/battery-status/20160226.html



●●words_table1


●●words_table

	●battery
BatteryManager:
battery::::バッテリ
device:
	~hostしている:hosting
充電-:charge::~
充電:charging::~
放電-:discharge::~
放電:discharging::~
満杯:full::~
直列:serial::~
並列:parallel::~
時間:time::~
枯渇-:exhaust:~
総和:sum::~
容量:capacity::~
平均:average::~
加重:weighted::~
電力:power:~
	効率的に電力を使う:power-efficient
装備-:attach::~

	秒単位で:in seconds
	分単位:in minutes
	ようとする／しつつ:about to be
	尽きる:run out
	数秒ごと:every few seconds
	残り少ない:low
	残り時間:time remaining
	短命に:negatively affect the battery life
	使い果たした:depleted
	後続の:subsequent
	-:plugged

	●保安
私的:private::~
閲覧:browsing::~
透明性:transparency::~
読出:readout::読み出し
ボヤカして:obfuscateして:ぼやかして
revokeする::取り消す
	指紋収集~行路:fingerprinting vector

	●仕様（ status
助言:advice:~
誤利用:mis-use:~
差分:diff:~
昇格基準:exit criteria:~
参照文献:references:~
	勧告候補:CR
	とされた:mark
必要最小限:minimal:~
	利用時:usage time

	●仕様
	~Web~IDL:WebIDL
控えめ:unobtrusive:~
伝える:informする:~
模倣-:emulate:~
素朴:naïve:~
縮小:scale back:~
高度な:advanced:~
模範型:archetype:~
細工-:craft:~
退行-:degrade:~
捏造した:fakeな:~
一体化-:unify:~

	Battery Status API:~battery状態s~API
	目に見える:substantialな
	しかなくなる:must
	~risk下に:~at-risk
	不能:unable to
	委ねられ:left to
	目下の:at hand
	知る:know#2
	編集~app:word processor
	見做す:assumption#1
	足りて:sufficient
	満たされ:meeting
	~~可能性:potential
	~~簡単な:trivial
	~web上の:web-based
	あるいは:alternatively
	別法として:alternatively
	その結果:thereby 〜leading to

	●未分類
email::::メール
保存-:save:~
喪失:loss:~
書出す:writeする::書き出す
高-:high:~

	`+Infinity^jv:positive Infinity
	~instance化:instantiate
	新着:new
	問い合わせ:check
	~~頻度:definition of how often
	その頻度を下げる:less frequently
	より速く:faster

	●指示語
	ある:at least one


●●ref_normative

[DOM]
    DOM Standard. Anne van Kesteren. WHATWG. Living Standard. URL: https://dom.spec.whatwg.org/
[ECMASCRIPT]
    ECMAScript Language Specification. Ecma International. URL: https://tc39.github.io/ecma262/
[HTML]
    HTML Standard. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living Standard. URL: https://html.spec.whatwg.org/multipage/
[RFC2119]
    Key words for use in RFCs to Indicate Requirement Levels. S. Bradner. IETF. March 1997. Best Current Practice. URL: https://tools.ietf.org/html/rfc2119
[RFC8174]
    Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words. B. Leiba. IETF. May 2017. Best Current Practice. URL: https://tools.ietf.org/html/rfc8174
[SECURE-CONTEXTS]
    Secure Contexts. Mike West. W3C. 15 September 2016. W3C Candidate Recommendation. URL: https://www.w3.org/TR/secure-contexts/
[WEBIDL]
    Web IDL. Boris Zbarsky. W3C. 15 December 2016. W3C Editor's Draft. URL: https://heycam.github.io/webidl/

●●
ref_informative


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより勧告として公開された
<a href="~SPEC_URL">Battery Status API</a>
を日本語に翻訳したものです。
~PUB
</p>


●●spec_metadata

最新発行バージョン
	https://www.w3.org/TR/battery-status/
編集者草案
	https://w3c.github.io/battery/
テスト一式
	https://w3c-test.org/battery-status/
実装報告書
	https://w3c.github.io/test-results/battery-status/20160621.html
編集
	Anssi Kostiainen (Intel) 
	Mounir Lamouri (Google Inc.) (previously Mozilla)
Participate
	<a href="http://lists.w3.org/Archives/Public/public-device-apis/">public-device-apis@w3.org</a>
	<a href="https://github.com/w3c/battery/">GitHub w3c/battery</a>
	<a href="https://github.com/w3c/battery/issues">GitHub w3c/battery/issues</a>
	<a href="https://github.com/w3c/battery/commits/">GitHub w3c/battery/commits</a>

発行者
	<a href="https://www.w3.org/2009/dap/">Device and Sensors Working Group</a>

</script>

<!-- 

	<a href="mailto:public-device-apis@w3.org">public-device-apis@w3.org</a>
	(<a href="https://lists.w3.org/Archives/Public/public-device-apis/">archives</a>).
	<a href="https://w3c.github.io/test-results/battery-status/20160621.html">implementation report</a>

 -->

</head>

<body>

<header>
	<hgroup>
<h1>Battery Status API</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>

	<section id="abstract">
~ABSTRACT

<p>
この仕様は、~hostしている~deviceの~battery状態sについての情報を供する~APIを定義する。
◎
This specification defines an API that provides information about the battery status of the hosting device.
</p>

	</section>
	<section id="sotd">
~STATUSofTHIS

<p>
この節では、発行時点における…
【以下、この節の他の内容は <a href="w3c-common-ja.html#status">W3C 日本語訳 共通ページ</a>／冒頭の仕様~metadataに委譲。】
</p>

<p>
`~battery状態s~API^cite（ `Battery Status API^en ）における
2014 年 12月 
<a href="https://www.w3.org/TR/2014/CR-battery-status-20141209/">W3C 勧告候補</a>
からの目に見える変更点は無い（
<a href="https://www.w3.org/TR/battery-status/diff.html">差分</a>
）。
しかしながら，この文書は、今や，
<a href="https://lists.w3.org/Archives/Public/public-device-apis/2015Aug/0000.html">実装~経験</a>
からの~feedbackに基づく，より詳細な~privacyの考慮点がある
— 高-精度な読出の含意に関する助言を含め。
また、参照文献も更新した。
◎
No substantial changes have been made to the Battery Status API since the W3C Candidate Recommendation of December 2014 (diff) , however the document now has more detailed privacy considerations, including advice regarding the implications of high precision readouts, based on feedback from implementation experience. It also has updated references.
</p>

<p>
~APIの
<a href="https://w3c.github.io/test-results/battery-status/20160226.html">実装~報告</a>
から、すべての特能は，配備-済みの 2 つの独立な~browserに実装されたことが示され、勧告候補からの昇格基準は満たされている。
勧告候補には “~risk下にある” にあるとされた特能は無い。
◎
The implementation report of the API shows all features have been implemented by two independent deployed browsers, meeting the CR exit criteria. We had no CR features marked as 'at-risk'.
</p>

<p>
一部の~Web~IDL実装には，`~battery状態s~API^citeに特有ではない既知な課題があるが、その課題による相互運用能に対する効果は，必要最小限である
— ~APIが誤利用された事例における~error取扱いに限り影響し、実施においては，利用時ではなく開発~時に検出されるので。
◎
There is a known issue with some WebIDL implementations that are not specific to the Battery Status API; the interoperability effect of that issue is minimal, since it only affects error handling in case where the API is mis-used, which is in practice detected at development time rather than usage time.
</p>

	</section>


<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. 序論</h2>
~INFORMATIVE

<p>
`~battery状態s~API^citeは、~web開発者のために，~hostしている~deviceの~battery状態sを~program的に決定する手段を定義する。
~web開発者は、~deviceの~battery状態sを知り得ない下で~web~appを設計するときは、~battery~levelは，目下の~task用に足りていると見做すしかなくなる。
これは、~deviceの~batteryが欲されるより速く枯渇し得ることを意味する
— ~web開発者は~battery状態sに基づいて裁定を下せないので。
~battery状態sの知識がある下では、~web開発者は，~web内容と~appを効率的に電力を使うよう細工-可能になり、その結果，利用者~体験も改善される。
しかしながら，作者は、この~APIの素朴な実装【利用？】は，~batteryを短命にし得ることを自覚するべきである。
◎
The Battery Status API specification defines a means for web developers to programmatically determine the battery status of the hosting device. Without knowing the battery status of a device, a web developer must design the web application with an assumption of sufficient battery level for the task at hand. This means the battery of a device may exhaust faster than desired because web developers are unable to make decisions based on the battery status. Given knowledge of the battery status, web developers are able to craft web content and applications which are power-efficient, thereby leading to improved user experience. Authors should be aware, however, that a naïve implementation of this API can negatively affect the battery life.
</p>

<p>
`~battery状態s~API^citeは、~deviceの~batteryが［
充電-中でない／残り少ない
］ときには作業を先送りしたり縮小するために利用できる。
［
高度な~web~appの模範型（ `archetype^en ）,
~web上の~email~client
］は、［
~deviceが充電-中の間は，数秒ごとに新着~emailの有無を~serverに問い合わせつつ、~deviceの~batteryが充電-中でない／残り少ない場合には，その頻度を下げる
］こともあろう。
別の例として，~web上の編集~appは、［
~battery~levelを監視して、~batteryが尽きる前に変更を保存して，~data喪失を防止する
］こともできる。
◎
The Battery Status API can be used to defer or scale back work when the device is not charging in or is low on battery. An archetype of an advanced web application, a web-based email client, may check the server for new email every few seconds if the device is charging, but do so less frequently if the device is not charging or is low on battery. Another example is a web-based word processor which could monitor the battery level and save changes before the battery runs out to prevent data loss.
</p>

	</section>
	<section id="conformance">
<h2 title="Conformance">2. 適合性</h2>

<p class="trans-note">【
この節の内容は <a href="w3c-common-ja.html#conformance">W3C 日本語訳 共通~page</a>に委譲。
】</p>

	</section>
	<section id="terminology">
<h2 title="Terminology">3. 各種用語</h2>

<p class="trans-note">【
この節の内容（他の仕様に定義される用語の一覧）は未訳（省略する）。
】</p>

	</section>
	<section id="security-and-privacy-considerations">
<h2 title="Security and privacy considerations">4. ~security／~privacyの考慮点</h2>

~INFORMATIVE

<p>
この仕様に定義される~APIは、~hostしている~deviceの~battery状態sを決定するために利用される。
◎
The API defined in this specification is used to determine the battery status of the hosting device.
</p>

<p>
~UAは、~battery状態s情報の高-精度な読出を公開するベキでない
— 新たな指紋収集~行路を導入し得るので。
◎
The user agent SHOULD not expose high precision readouts of battery status information as that can introduce a new fingerprinting vector.
</p>

<p>
~UAは、~battery状態s情報~access【の許可】を利用者に依頼してもヨイ。
あるいは、私的~閲覧~modeにおいては，利用者~許可の要件を施行してもヨイ。
◎
The user agent MAY ask the user for battery status information access, or alternatively, enforce the user permission requirement in its private browsing modes.
</p>

<p>
~UAは、~scriptによる この~APIの利用を控えめな方式で，利用者に伝えるベキである
— 透明性を援助するため，および
~API~access【の許可】を~revokeすることを利用者に許容するため。
◎
The user agent SHOULD inform the user of the API use by scripts in an unobtrusive manner to aid transparency and to allow the user to revoke the API access.
</p>

<p>
~UAは、［
~hostしている~deviceには~batteryは無い ／
~batteryは充電-中／
捏造した値を公開している
］場合には，公開される値を作者が直に知り得ない仕方でボヤカしてもヨイ。
◎
The user agent MAY obfuscate the exposed value in a way that authors cannot directly know if a hosting device has no battery, is charging or is exposing fake values.
</p>

	</section>
	<section id="the-navigator-interface">
<h2 title="The Navigator interface">5. `Navigator^I ~interface</h2>

<pre class="idl">
partial interface `Navigator$I {
  `Promise$&lt;`BatteryManager$I&gt; `getBattery$m();
};
</pre>

<p>
各 `Navigator$I ~objには、
`~battery~promise@
がある
— それは、初期~時には ~NULL をとり，［
`BatteryManager$I を保持する【で解決されることになる】 `Promise$I ~obj
］に【必要になった時点で】設定されることになる。
◎
For each Navigator object, there is a battery promise, which is initially set to null. It is a Promise object which holds a BatteryManager.
</p>


<div class="algorithm">
<p>
`getBattery()@m
~methodの被呼出時には、次の手続きを走らすモノトスル：
◎
The getBattery() method, when invoked, MUST run the following steps:
</p>

<ol>
	<li>
~IF［
`現任の設定群~obj$は`~secure文脈$でない
］~OR［
`閲覧文脈$は`~top-level閲覧文脈$でない
］
⇒＃
`SecurityError$E で此れの`~battery~promise$を却下する；
~RET 此れの`~battery~promise$
◎
If the incumbent settings object is not a secure context, then reject this Navigator object's battery promise with a "SecurityError" DOMException, return this Navigator object's battery promise and abort these steps.
◎
If the browsing context is not a top-level browsing context, then reject this Navigator object's battery promise with a "SecurityError" DOMException, return this Navigator object's battery promise and abort these steps.
</li>
	<li>
~IF［
此れの`~battery~promise$ ~NEQ ~NULL
］
⇒
~RET 此れの`~battery~promise$
◎
If this Navigator object's battery promise is not null, return this Navigator object's battery promise and abort these steps.
</li>
	<li>
此れの`~battery~promise$ ~SET `新たな~promise$を此れの`~Realm$内に作成した結果
◎
Otherwise, set this Navigator object's battery promise to a newly created Promise, created in the Realm of this Navigator object.
</li>
	<li>
~RET 此れの`~battery~promise$
— ただし、以降も非同期的に継続する
◎
Return this Navigator object's battery promise and continue asynchronously.
</li>
	<li>
%~battery ~LET 此れの`~Realm$内で`新たな~BatteryManager~objを作成する$
◎
Create a new BatteryManager object in the Realm of this Navigator object, and let battery be that object.
</li>
	<li>
%~battery で此れの`~battery~promise$を解決する
◎
Resolve this Navigator object's battery promise with battery.
</li>
</ol>
</div>

	</section>
	<section id="the-batterymanager-interface">
<h2 title="The BatteryManager interface">6. `BatteryManager^I ~interface</h2>

<p>
`BatteryManager@I
~interfaceは、~hostしている~deviceの
`現在の~battery状態s情報@
を表現する：
◎
The BatteryManager interface represents the current battery status information of the hosting device.＼
</p>

<ul>
	<li>
`charging@m
属性は、~systemの~batteryの充電~状態を表現する。
◎
The charging attribute represents the charging state of the system's battery.＼
</li>
	<li>
`chargingTime@m
属性は、~systemの~batteryが全部的に充電されるまでの残り時間を，秒単位で表現する。
◎
The chargingTime attribute represents the time remaining in seconds until the system's battery is fully charged.＼
</li>
	<li>
`dischargingTime@m
属性は、［
~systemの~batteryが完全に放電され，~systemは休止されようとする
］までの残り時間を，秒単位で表現する。
◎
The dischargingTime attribute represents the time remaining in seconds until the system's battery is completely discharged and the system is about to be suspended, and＼
</li>
	<li>
`level@m
属性は、~systemの~batteryの~levelを表現する。
◎
the level attribute represents the level of the system's battery.
</li>
</ul>


<pre class="idl">
[`Exposed$=`Window$I]
interface `BatteryManager$I : `EventTarget$I {
    readonly        attribute `boolean$             `charging$m;
    readonly        attribute `unrestricted double$ `chargingTime$m;
    readonly        attribute `unrestricted double$ `dischargingTime$m;
    readonly        attribute `double$              `level$m;
                    attribute `EventHandler$I        `onchargingchange$m;
                    attribute `EventHandler$I        `onchargingtimechange$m;
                    attribute `EventHandler$I        `ondischargingtimechange$m;
                    attribute `EventHandler$I        `onlevelchange$m;
};
</pre>

<p class="trans-note">【
以下の記述では、各 `BatteryManager$I ~objは［
`charging$m,
`chargingTime$m,
`dischargingTime$m,
`level$m
］属性の それぞれに対応する内部~slot（ “属性の値” ）を持つことが暗黙の前提にある。
】</p>

<div class="algorithm">
<p>
~UAは，
`新たな~BatteryManager~objを作成する@
ときは、次を走らすモノトスル：
</p>

<ol>
	<li>
%O ~LET 新たな `BatteryManager$I ~obj
</li>
	<li>
~IF［
~UAは`~battery状態s情報を報告-不能$である
］
⇒
%O の各種~属性を次に与える
`既定の値@
に設定する
⇒＃
`charging$m ~SET ~T,
`chargingTime$m ~SET 0,
`dischargingTime$m ~SET `+Infinity^jv,
`level$m ~SET 1.0
</li>
	<li>
~ELSE
⇒
%O の各種~属性を`現在の~battery状態s情報$を表現する値に設定する
</li>
</ol>

◎
When the user agent is to create a new BatteryManager object, it MUST instantiate a new BatteryManager object and set its attributes' values to those that represent the current battery status information, unless the user agent is unable to report the battery status information, in which case the values MUST be set to default values as follows: charging MUST be set to true, chargingTime MUST be set to 0, dischargingTime MUST be set to positive Infinity, and level MUST be set to 1.0.
</div>

<p>
~UAは
— 例えば，利用者または~systemの［
選好／設定／制限
］に因り —
【！any of】ある属性~用の値を報告-不能な場合，【その属性に関して？】
`~battery状態s情報を報告-不能@
であるとされる。
◎
The user agent is said to be unable to report the battery status information, if it is not able to report the values for any of the attributes, for example, due to a user or system preference, setting, or limitation.
</p>

<p class="note">注記：
`~battery状態s情報を報告-不能$な実装は、全部的に充電された~batteryを模倣する
— 例えば，~battery状態s情報が可用にされていない場合に —
指紋収集の~~可能性を抑制するため，および
~appが処理能を退行させるのを防止するため。
◎
Note
Implementations unable to report the battery status information emulate a fully charged and plugged in battery to reduce the potential for fingerprinting and prevent applications from degrading performance, if the battery status information is not made available, for example.
</p>

<dl class="idl-def">
	<dt>`charging$m</dt>
	<dd>
次に該当する場合は ~F に設定するモノトスル
⇒＃
~batteryは放電-中
◎
The charging attribute MUST be set to false if the battery is discharging,＼
</dd>
	<dd>
次に該当する場合は ~T に設定するモノトスル
⇒＃
実装は~battery充電~状態を報告-不能である ／
~batteryは充電-中 ／
~systemは~batteryを装備していない
◎
and set to true, if the battery is charging, the implementation is unable to report the state, or there is no battery attached to the system, or otherwise.＼
</dd>
	<dd>
~UAは，~battery充電~状態が更新されたときは、次を走らす`~taskを~queueする$モノトスル
⇒＃
`charging$m 属性の値を設定する；
`BatteryManager$I ~objに向けて名前 `chargingchange$et の`~eventを発火する$
◎
When the battery charging state is updated, the user agent MUST queue a task which sets the charging attribute's value and fires an event named chargingchange at the BatteryManager object.
</dd>

	<dt>`chargingTime$m</dt>
	<dd>
次に該当する場合は 0 に設定するモノトスル
⇒＃
~batteryは満杯／
~systemは~batteryを装備していない
◎
The chargingTime attribute MUST be set to 0, if the battery is full or there is no battery attached to the system,＼
</dd>
	<dd>
次に該当する場合は `+Infinity^jv に設定するモノトスル
⇒＃
~batteryは放電-中／
実装は残りの充電~時間を報告-不能
◎
and to the value positive Infinity if the battery is discharging, the implementation is unable to report the remaining charging time, or otherwise.＼
</dd>
	<dd>
~UAは，~battery充電~時間が更新されたときは、次を走らす`~taskを~queueする$モノトスル
⇒＃
`chargingTime$m 属性の値を設定する；
`BatteryManager$I ~objに向けて名前 `chargingtimechange$et の`~eventを発火する$
◎
When the battery charging time is updated, the user agent MUST queue a task which sets the chargingTime attribute's value and fires an event named chargingtimechange at the BatteryManager object.
</dd>

	<dt>`dischargingTime$m</dt>
	<dd>
次に該当する場合は `+Infinity^jv に設定するモノトスル
⇒＃
~batteryは充電-中 ／
実装は残りの放電~時間を報告-不能 ／
~systemは~batteryを装備していない ／
`or otherwise^en 【？】
◎
The dischargingTime attribute MUST be set to the value positive Infinity, if the battery is charging, the implementation is unable to report the remaining discharging time, there is no battery attached to the system, or otherwise.＼
</dd>
	<dd>
~UAは，~battery放電~時間が更新されたときは、次を走らす`~taskを~queueする$モノトスル
⇒＃
`dischargingTime$m 属性の値を設定する；
`BatteryManager$I ~objに向けて名前 `dischargingtimechange$et の`~eventを発火する$
◎
When the battery discharging time is updated, the user agent MUST queue a task which sets the dischargingTime attribute's value and fires an event named dischargingtimechange at the BatteryManager object.
</dd>

	<dt>`level$m</dt>
	<dd>
次に該当する場合は 0 に設定するモノトスル
⇒＃
~batteryを使い果たしたため~systemは休止されつつある
◎
The level attribute MUST be set to 0 if the system's battery is depleted and the system is about to be suspended,＼
</dd>
	<dd>
次に該当する場合は 1.0 に設定するモノトスル。
⇒＃
~batteryは満杯 ／
実装は~battery~levelを報告-不能 ／
~systemは~batteryを装備していない
◎
and to 1.0 if the battery is full, the implementation is unable to report the battery's level, or there is no battery attached to the system.＼
</dd>
	<dd>
~UAは，~battery~levelが更新されたときは、次を走らす`~taskを~queueする$モノトスル
⇒＃
`level$m 属性の値を設定する；
`BatteryManager$I ~objに向けて名前 `levelchange$et の`~eventを発火する$
◎
When the battery level is updated, the user agent MUST queue a task which sets the level attribute's value and fires an event named levelchange at the BatteryManager object.
</dd>
</dl>

<p class="note">注記：
［
`chargingtimechange$et ／
`dischargingtimechange$et ／
`levelchange$et
］~eventを発火する~~頻度は、実装に委ねられる。
◎
Note
The definition of how often the chargingtimechange, dischargingtimechange, and levelchange events are fired is left to the implementation.
</p>

		<section id="multiple-batteries">
<h3 title="Multiple batteries">6.1. ~batteryが複数個ある場合</h3>

<p>
~hostしている~deviceが複数個の~batteryを備えている場合、
`BatteryManager$I は，それらの~batteryを一体化した~viewを公開するベキである：
◎
If a hosting device contains more than one battery, BatteryManager SHOULD expose an unified view of the batteries.
</p>

<ul>
	<li>
`charging$m 属性は、［
ある~batteryの充電~状態が上（ `charging$m ）に述べたように ~T になるならば ~T ／
~ELSE_ ~F
］に設定するモノトスル。
◎
The charging attribute MUST be set to true if at least one battery's charging state as described above is true. Otherwise, it MUST be set to false.
</li>
	<li>
`chargingTime$m 属性は、［
並列に充電している場合は 個々の~batteryの最大~充電~時間 ／
直列に充電している場合は 個々の充電~時間の総和
］に設定できる。
◎
The chargingTime attribute can be set to the maximum charging time of the individual batteries if charging in parallel, and to the sum of the individual charging times if charging serially.
</li>
	<li>
`dischargingTime$m 属性は、［
並列に放電している場合は 個々の~batteryの最大~放電~時間／
直列に放電している場合は 個々の放電~時間の総和
］に設定できる。
◎
The dischargingTime attribute can be set to the maximum discharging time of the individual batteries if discharging in parallel, and to the sum of individual discharging times if discharging serially.
</li>
	<li>
`level$m 属性は、［
各~batteryの~battery~level属性の容量に応じた加重~平均（容量がすべて同じなら，単に平均）
］に設定できる。
◎
The level attribute can be set to the average of the levels of batteries of same capacity, or the weighted average of the battery level attributes for batteries of different capacities.
</li>
</ul>

<p class="trans-note">【
~battery状態s情報を報告-不能なもの, 可能なものが混在している場合，どうふるまうべきかは述べられていない。
】</p>

		</section>
		<section id="event-handlers">
<h3 title="Event handlers">6.2. ~event~handler</h3>

<p>
`BatteryManager$I ~objは、その属性として，次に挙げる`~event~handler$（および，それぞれに対応する`~event~handler~event型$）を~supportするモノトスル：
◎
The following are the event handlers (and their corresponding event handler event types) that MUST be supported as attributes by the BatteryManager object:
</p>

<table><thead><tr><th>~event~handler
<th>~event~handler~event型
</thead><tbody>

<tr><td>`onchargingchange@m
<td>`chargingchange@et

<tr><td>`onchargingtimechange@m
<td>`chargingtimechange@et

<tr><td>`ondischargingtimechange@m
<td>`dischargingtimechange@et

<tr><td>`onlevelchange@m
<td>
`levelchange@et
</tbody></table>

		</section>
	</section>
	<section id="examples">
<h2 title="Examples">7. 例</h2>
~INFORMATIVE

<div class="example" id="example-1">

<p>
~levelが変化する各回ごとに，~battery~levelを~consoleに書出す~~簡単な例：
◎
This trivial example writes the battery level to the console each time the level changes:
◎
Example 1
</p>

<pre class="lang-js">
/* <span class="comment">
~promiseが解決されたとき、初期~値を取得して…
◎
We get the initial value when the promise resolves ...
</span> */
navigator.`getBattery$0().then(function(%battery) {
  console.log(%battery.`level$0);
  /* <span class="comment">
…後続の更新も取得する。
◎
... and any subsequent updates.
</span> */
  %battery.`onlevelchange$0 = function() {
    console.log(this.`level$0);
  };
});
</pre>

</div>

<div class="example" id="example-2">

<p>
別法として，
`addEventListener()$m ~methodを利用しても同じになる：
◎
Alternatively, the same using the addEventListener() method:
◎
Example 2
</p>

<pre class="lang-js">
navigator.`getBattery$0().then(function(%battery) {
  console.log(%battery.`level$0);
  %battery.`addEventListener$0('`levelchange$et', function() {
    console.log(this.`level$0);
  });
});
</pre>
</div>

<div class="example" id="example-3">
<p>
次の例では、［
充電~状態,
~level,
分単位の残り時間
］を示す指示子を更新する：
◎
The following example updates the indicators to show the charging state, level and time remaining in minutes:
◎
Example 3
</p>

<pre class="lang-html">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Battery Status API Example&lt;/title&gt;
  &lt;script&gt;
    window.onload = function () {
      function updateBatteryStatus(%battery) {
        document.`querySelector$0('#charging').`textContent$0 = %battery.`charging$0 ? '充電-中' : '充電-中でない';
        document.`querySelector$0('#level').`textContent$0 = %battery.`level$0;
        document.`querySelector$0('#dischargingTime').`textContent$0 = %battery.`dischargingTime$0 / 60;
      }

      navigator.`getBattery$0().then(function(%battery) {
        /* <span class="comment">
初期~時に~promiseが解決されたとき，~battery状態sを更新して…
◎
Update the battery status initially when the promise resolves ...
</span> */
        updateBatteryStatus(%battery);

        /* <span class="comment">
…後続の更新も取得する。
◎
.. and for any subsequent updates.
</span> */
        %battery.`onchargingchange$0 = function () {
          updateBatteryStatus(%battery);
        };

        %battery.`onlevelchange$0 = function () {
          updateBatteryStatus(%battery);
        };

        %battery.`ondischargingtimechange$0 = function () {
          updateBatteryStatus(%battery);
        };
      });
    };
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id="charging"&gt;（充電~状態は未知）&lt;/div&gt;
  &lt;div id="level"&gt;（~battery~levelは未知）&lt;/div&gt;
  &lt;div id="dischargingTime"&gt;（放電し切るまでの時間は未知）&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

</div>

	</section>
	<section id="acknowledgements">
<h2 title="Acknowledgements">謝辞</h2>

<p lang="en-x-a0">
The group is deeply indebted to Mounir Lamouri, Jonas Sicking, and the Mozilla WebAPI team in general for their invaluable feedback based on prototype implementations. Many thanks to the people behind the System Information API and Device Orientation Event specification for the initial inspiration. Also thanks to the nice folks bringing us the Page Visibility specification, which motivated the editor of this specification to write the introduction chapter discussing some real-world high value use cases that apply equally to this specification. Special thanks to all the participants of the Device APIs Working Group and others who have sent in substantial feedback and comments, and made the Web a better place for everyone by doing so. Finally, thanks to Lukasz Olejnik, Gunes Acar, Claude Castelluccia, and Claudia Diaz for the privacy analysis of the API.
</p>

	</section>
</main></div>
