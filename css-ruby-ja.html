<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>CSS Ruby Layout Module Level 1 （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-css.css" type="text/css" />

<style>
.ex-ruby-table {
	background: white;
	line-height: 1;
}
.ex-ruby-table td {
	text-align: center;
	padding: 0;
}
.ex-ruby-table tr {
	border: none;
	padding: 0;
}

.x-shinkansen {
	font-size: 2em;
	line-height: 1;
	text-align: center;
	display:inline-block;
}

#_dgm-bopomofo {
	font-size: 3em;
	background: white;
	line-height: 1;
}
#_dgm-bopomofo > div {
	display: inline-block;
	vertical-align: top;
}
#_dgm-bopomofo > div:nth-child(even) {
	font-size: 0.35em;
	white-space: pre-line;
	color: blue;
	padding-right: 0.5em;
}

#_dgm-bopomofo > div:nth-child(even) > span {
	position: relative;
	top: -1.1em;
	left: 0.9em;
}


#_dgm-r-break-b {
	display: inline-block;
	border: thin solid black;
	padding: 0.2em;
}
#_dgm-r-break-b > div {
	display: inline-block;
	position: relative;
	vertical-align: top;
	white-space: pre-line;
	border: thin solid currentcolor;
	height: 3em;
}

#_dgm-r-break-a table {
	border-collapse: collapse;
	margin:0;
}
#_dgm-r-break-a td {
	padding: 0.2em;
	white-space: nowrap;
}
#_dgm-r-break-a tr:nth-child(odd) {
	border:solid black 0.1em;
	color: red;
}
#_dgm-r-break-a tr:nth-child(even) {
	border: none;
}
#_dgm-r-break-a td > span {
	display: block;
	border: thin solid currentcolor;
	line-height: 2em;
}


x-box {
	display: inline-block;
	padding: 0.2rem;
	margin: 0;
	border: thin solid blue;
}
x-rb {
	display: block;
	text-align:center;
	padding: 0;
	margin: 0;
	padding: 0.1rem;
	font-size: 1.4rem;
	border: thin solid blue;
}
x-rt {
	display: block;
	text-align:center;
	padding: 0;
	margin: 0;
	font-size: 0.7rem;
	padding: 0.1rem;
	margin-bottom: 0.1rem;
	border: thin solid red;
}

x-pad,
x-full,
x-half {
	display: inline-block;
	vertical-align: top;
	box-sizing: border-box;
	border: solid 0.1em gray;
	margin:0.1em;
	padding:0.3em 0;
	text-align: center;
	height: 1.8em;
	line-height: 1;
}
x-full {
	width: 1.8em;
	background: cyan;
}

x-half {
	width: 1em;
	background: orange;
}
x-pad {
	margin:0;
	visibility: hidden;
}

x-box.x-outside {
	padding: 0.2rem 0;
	visibility: hidden;
}

x-box.x-outside > x-rb > x-full {
	visibility: visible;
	width: auto;
	color: gray;
}

</style>


<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		persisted_parts: Util.collectHtmlCodeList(),
		collectParts: Util.collectParts,
		generate: expand,
	};

	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w\-~一-鿆]+|`(.*?)([$@^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){
if(!indicator) {//%
	return `<var>${match.slice(1)}</var>`;
}

let text = key;
let href = '';

switch(klass){
case 'r': // ref
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 'pe': 
	text = `::${key}`;
	break;
case 'xP':
	return `<x-pad style="width:${key}em"></x-pad>`;
	break;
case 'en':
	return `<span lang="en-x-a0">${key}</span>`;
	break;
case 'dgm':
	return `<a id="_dgm-${key}">＊</a>`;
	break;
case 'xCode':
	return `<a id="_ex-${key}">＊</a>`;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	default:
		console.log(match);
		return match;
	}
}

return text;

	}
}

</script>

<script type="text/plain" id="_source_data">

●●options

spec_date:2020-05-14
trans_update:2020-05-14
source_checked:2018-03-20
page_state_key:CSS
original_url:https://drafts.csswg.org/css-ruby-1/
spec_status:ED
ref_id_prefix:biblio-
ref_id_lowercase:true
site_nav:typeset,css
conformance:css
copyright:2020,permissive
trans_1st_pub:2018-05-29


●●class_map
e:element
a:attr
at:at-rule
p:property
pe:pseudo
css:css
v:value

●●tag_map
et:code
e:code
a:code
p:code
d:code
i:i
at:code
p:code
pe:code
css:code
c:code
v:code
xF:x-full
xH:x-half
V:var
em:em
cite:cite

●●original_id_map

●●mdn_urls
propdef-ruby-align:CSS/ruby-align
	propdef-ruby-merge:CSS/ruby-merge
	propdef-ruby-overhang:CSS/ruby-overhang
propdef-ruby-position:CSS/ruby-position

●●link_map
p.display:~CSSDISP#propdef-display
p.direction:~CSSWM#propdef-direction
p.line-height:~CSS2VISUDET#propdef-line-height
p.padding:~CSSBOX#propdef-padding
p.ruby-align:#propdef-ruby-align
p.ruby-merge:#propdef-ruby-merge
	p.ruby-position: separate:#propdef-ruby-position
p.ruby-overhang:#propdef-ruby-overhang
p.ruby-position:#propdef-ruby-position
p.text-justify:~CSSTEXT#propdef-text-justify
p.text-transform:~CSSTEXT#propdef-text-transform
p.unicode-bidi:~CSSWM#propdef-unicode-bidi
p.vertical-align:~CSSINLINE#propdef-vertical-align
p.white-space:~CSSTEXT#propdef-white-space
p.word-break:~CSSTEXT#propdef-word-break
p.writing-mode:~CSSWM#propdef-writing-mode
p.text-emphasis-position:~CSSTEXTDECOR#propdef-text-emphasis-position
p.margin:~CSSBOX#propdef-margin
p.padding:~CSSBOX#propdef-padding
p.border:~CSSBG#propdef-border

v.auto:#valdef-ruby-merge-auto
v.~auto0:#valdef-ruby-overhang-auto
v.bidi-override:~CSSWM#valdef-unicode-bidi-bidi-override
v.block:~CSSDISP#valdef-display-block
v.center:#valdef-ruby-align-center
v.merge:#valdef-ruby-merge-merge
v.embed:~CSSWM#valdef-unicode-bidi-embed
v.inline-block:~CSSDISP#valdef-display-inline-block
v.inline:~CSSDISP#valdef-display-inline
v.inter-character:#valdef-ruby-position-inter-character
v.isolate-override:~CSSWM#valdef-unicode-bidi-isolate-override
v.isolate:~CSSWM#valdef-unicode-bidi-isolate
v.keep-all:~CSSTEXT#valdef-word-break-keep-all
v.none:#valdef-ruby-overhang-none
v.normal:~CSSWM#valdef-unicode-bidi-normal
v.over:#valdef-ruby-position-over
v.ruby-base-container:#valdef-display-ruby-base-container
v.ruby-base:#valdef-display-ruby-base
v.ruby-text-container:#valdef-display-ruby-text-container
v.ruby-text:#valdef-display-ruby-text
v.ruby:#valdef-display-ruby
v.separate:#valdef-ruby-merge-separate
v.space-around:#valdef-ruby-align-space-around
v.space-between:#valdef-ruby-align-space-between
v.start:#valdef-ruby-align-start
v.under:#valdef-ruby-position-under
v.vertical-rl:~CSSWM#valdef-writing-mode-vertical-rl

pe.first-line:~CSSPSEUDO#selectordef-first-line
pe.first-letter:~CSSPSEUDO#selectordef-first-letter

e.rp:~HEtextlevel#the-rp-element
e.ruby:~HEtextlevel#the-ruby-element
	●terms

~ruby:#ruby
整列:#rubyalign
注釈を併合する:#merged-annotation
破棄され:#anon-gen-discard-space
隠され:#hidden-ruby-annotation
	隠された注釈:#hidden-ruby-annotation

~level間 空白:#inter-level-white-space
~level内 空白:#intra-level-white-space
注釈~間 空白:#inter-annotation-white-space
基底~間 空白:#inter-base-white-space
区分~間 空白:#inter-segment-white-space
内部~ruby~box:#internal-ruby-boxes
~ruby内 空白:#intra-ruby-white-space

~level:#annotation-level
注釈~level:#annotation-level

行-上面:~CSSWM#line-over
行-下面:~CSSWM#line-under
入子の:#nested-ruby
入子に:#nested-ruby
入子の~ruby:#nested-ruby

~pair法:#pairing
位置決め:#rubypos

注釈:#ruby-annotation-box
~ruby注釈:#ruby-annotation-box
~ruby注釈~box:#ruby-annotation-box
~ruby注釈~容器:#ruby-annotation-container-box
~ruby注釈~容器~box:#ruby-annotation-container-box

基底~level:#base-level
基底~text~level:#base-level
~ruby基底:#ruby-base-box
~ruby基底~box:#ruby-base-box
~ruby基底~容器:#ruby-base-container-box
~ruby基底~容器~box:#ruby-base-container-box
~ruby容器:#ruby-container
~ruby容器~box:#ruby-container

~ruby整形~文脈:#ruby-formatting-context
~ruby区分:#ruby-segments
	~ruby内部 ~ruby容器~box:#nested-pairing
~span:#span
	~spanしている注釈:#spanning-annotation
	~spanしている:#spanning-annotation
~spanning注釈:#spanning-annotation
	~text~distribution:#collapsed-ruby
匿名かつ空な:#_anonymous-empty


注音符号:#g-bopomofo
注音符号~声調~符:#bopomofo-tone-marks
表語文字:#g-ideogram
漢字:#_g-han
日本漢字:#g-kanji
韓文漢字:#g-hanja
中文漢字:#_g-hanzi
平仮名:#g-hiragana
片仮名:#g-katakana
仮名:#g-kana


	●用語（CSS
強制d行l分断:~CSSTEXT#forced-line-break
強制d行l分断:~CSSTEXT#forced-line-break
区分~分断:~CSSTEXT#segment-break
縮約-可能:~CSSTEXT#collapsible-white-space
両端揃え機会:~CSSTEXT#justification-opportunity
自動折返し機会:~CSSTEXT#soft-wrap-opportunity
空白:~CSSTEXT#white-space
文字:~CSSTEXT#character
行-分断ng規則:~CSSTEXT#line-breaking-process
行-分断ng:~CSSTEXT#line-breaking-process
空白~処理~規則:~CSSTEXT#white-space-rules
	#white-space-processing

行内~基底~方向:~CSSWM#inline-base-direction

外縁~表示~型:~CSSDISP#outer-display-type
内縁~表示~型:~CSSDISP#inner-display-type
表示~型:~CSSDISP#display-type
内部~ruby要素:~CSSDISP#internal-ruby-element
内部~table要素:~CSSDISP#internal-table-element
行内~塊:~CSSDISP#inline-block
塊~化:~CSSDISP#blockify
行内~化:~CSSDISP#inlinify
首要~box:~CSSDISP#principal-box
~flow内:~CSSDISP#in-flow

塊~levelの~box:~CSSDISP#block-level-box
行内~levelの~box:~CSSDISP#inline-level-box
行内~level:~CSSDISP#inline-level
行内~box:~CSSDISP#inline
	可分な行内~level:~CSSDISP#inline
塊~容器:~CSSDISP#block-container
包含塊:~CSSDISP#containing-block

絶対的に位置され:~CSSPOS#absolute-position

行l~box:~CSSINLINE#line-box
行内~整形~文脈:~CSSINLINE#inline-formatting-context
	行内~整形~文脈:~CSS2VISUREN#inline-formatting

~table包装~box:~CSSWG/css-tables-3/#table-wrapper-box
整形される最初の行l:~CSSPSEUDO#first-formatted-line

	~text連なり
	~box~prop
	背景~prop
	外形線~prop
	双向~隔離

●●words_table1

auto0:auto

●●words_table

	●文字／用字系
alphabetic:::
Latin:
CJK:
韓文漢字:Hanja::~
中文漢字:Hanzi::~
漢字:Han::~
日本漢字:kanji::~
roman:
日中韓:China, Japan, Korea::~
中国語:Chinese::~
日本語:Japanese::~
台湾:Taiwan::~
台湾式:Taiwanese-style::~
英語:English::~
英文:English sentence:~
韓国語:Korean::~
外来語:foreign words::~
平仮名:hiragana::~
熟語:jukugo::~
片仮名:katakana::~
対語:taigo::~
用字系:script::~
表語文字:ideograph::~
表語的:ideographic::~
音節:syllable::~
音節的:syllabic::~
振仮名:振り仮名
仮名:Kana::~
書記体系:writing system::~
東Asia:East Asia::東アジア
東Asian:East Asian::東アジアの
単語:word::~

	標準中国語Mandarin:standard Mandarin
注音符号:bopomofo::~
	注音符号:Bopomofo
声調:tone::~
	声調~符:Bopomofo Tone mark
発音符:phonetic::~
発音:pronunciation::~
符:mark::~
	符~法:marking
筆記的:cursive::~
繁体字:traditional::~
翻訳:translation::~
連なり:run::~
字l:letter::字°
中立的:neutral:~

	●ruby／文字組版
glyph::::グリフ
上線:overline::~
下線:underline::~
基底線:baseline::~::ベースライン
隠され:hideされ::~
隠す:hideする::~
	hiding
自動で:auto-:~
自動-:auto-:~
	自動で隠す:autohide／:auto-hiding／:autohiding

ruby::::ルビ
Ruby:

	“準” 基底:quasi-base
	( 基底, 注釈 ):base-annotation
注釈付き:annotated::~
	注釈付き:-annotated
注釈-:annotate::~
注釈:annotation::~
基底:base::~

	group-ruby:::
mono::::モノ
	~pair法:pairing
col:column
row:::
削る:trimする:~
削られ:trimされ:~
span:::
spanning:::
	~span法:spanning
typography::::タイポグラフィ
typographic::::タイポグラフィック
	typographic上の:typographical
間隔:space::アキ
	間隔をとる
間隔法:spacing::アキ組
半-:half-:~
行間:leading::行アキ

両端揃え:justification:~

並替えら:reorderさ:並び替えら
	傍／傍に沿って:alongsideに:沿って
	沿って／沿い:along
筋:track:~
並行して:parallelに:~
並行する:parallelな:~
隣接な:adjacentな:隣接する

space:::
spaced:::
stay:::
角張った:angularな:~
	＊
丸まった:rounded:丸みを帯びた
行-:line-::~
行高:line-height::~
上面:over::~
下面:under::~

	boundaries
限界域:bounds:境界部
分割-:divide:~
分割-:split:~
分布-:distribute::~
分布:distribution::~

分断-:break::~
分断:break::~
分断ng:breaking::分断
	分断-法:breaking
断片:fragment::~
	字間:separation
介在する:intervening:~
包装:wrapper::~
折返す:wrapする::折り返す
区分:segment::~
	方向性たち:directionalities
双向:bidi::~
双方向-:bidirectional::~
字下げ:indentation:~
狭小:narrow:~
幅広:wide:~
	幅広さ:wide

	より幅広:wider
全角:wide-cell:~
半角:narrow-cell:~
半角幅:narrow-width:~
	halfwidth

張出す:overhangする::~
張出せる:overhangできる::~
張出し:overhanging::~
折返ng:wrapping::折り返し
自動折返し:soft wrap::自動折り返し
消去る:disappearする:消え去る
混在する:mixされた:~
添付けら:attachさ:添え付けら
強制d:forced::強制
機会:opportunity::~
	機会たち:opportunities
併合-:merge::~
	ひとまとめに:as a group
縮約-:collapse::~
相殺-:collapse::~
継合され:spliceされ:継ぎ合され
送幅:advance::送り幅
圏点:emphasis mark::~

	●layout
table:::
cell:
寄与-:contribute:~
中央寄せに:center:~

側:side:~
外形線:outline::~
外方:outward::~
	先頭:beginning／
	右肩:to the right of or above
堆積-:stack::~
	堆積-法:stacking
	塊~化:blockify／blockification
	行内~化:inlinify／inlining
	匿名~box:anonymous-box

	~~半分:50%
収まる:fitする:~
収まら:fitし:~
収まり:fitし:~
収容-:accommodate:~
埋める:fillする:~

可分:non-atomic::~
変形n:transformation::変形
整列-:align::~
整列:alignment::~
	整形~文脈:formatting context

拡がる:expandする:~
	分量比が互いに近くなる:proportionally balance the amount

浮動体:float::~
浮動-:float::~

縦方向:vertical::~
縦書き:vertical::~
横書き:horizontal::~
	横方向／

連続する:consecutiveな:~
連続性:contiguous 性:~
連続的:contiguous:~
部屋:room:~
重合しな:overlapしな:重なり合わな
重合して:overlapして:重なり合って
重合する:overlapする:重なり合う
首要:principal::主要
ズラされ:shiftされ:ずらされ
ズラす:shiftする:ずらす

空いた:blankな:~
量:amount:~
縮小-:scale down:~

	挟んで:immediately-
	挟む:surround
	周り:around
	前後:around
	収まり切らない:not enough space 〜 to fit
	個数が一致ない:not enough
	~~傍にある:upper/lower
	囲い込む:trap
	~~長さ:how much
	間隔が置かれる:spaced apart
	反対向きの:opposing
	超えて~~侵入する:cross
	居座る:sits
	中段:middle
	外へ:past／:out

	●CSS
	~level:Level
mark-up::::マークアップ
	style付け:styling
	~style上の:stylistic
下位型:subtype:~

外見:appearance:~
描かれ:drawされ:~
描く:drawする:~
読取器:reader::~
装飾-:decorate::~
装飾:decoration::~

	親が違えられた:misparented
	親子関係:parented

	●仕様
XHTML:
複雑:complicated:~
役割:role:~
必要十分:adequate:~
図:figure:~
	場合によっては:possibly
厳格:rigorous:~

idea::::アイデア

仕様策定者:spec-writer:~
省略可能:optional:~
堅牢:robust:~
凡例:legend:~
適度:reasonable:~
用語集:glossary:~
黙示-:imply:~
	暗黙に:implying／:implied
稀:rare:~
視点:perspective:~
競合:conflict:~
高度な:advancedな:~
open:
close:
魔法:magic:~
国際化WG:Internationalization WG:国際化 WG

	同様:like 〜
	同じに:as for
	単に:merely
	責を負う:responsible
	よく知られた:well-known
	総称:collective term／
	いくつか変種がある:with some variation
	~~実際に:indeed
	別法として:alternatively
	明らか:clear
	仕様~策定者の世迷言:ramblings of an insane spec-writer
	基準に:with respect to
	ほとんどの面で:In most respects
	近現代では:in recent times
	-:we
	謝意:thank
	その結果:To this end,
	thereof
	thereby
	こともある:sometimes
	~~支持を受けて:in favor of
	~~異常に:pathological
	~~現時点:at the moment
	~~限定されない:but not exclusively

	●仕様（動詞
対応関係:correspondence:~
借用-:borrow:~
疑って:suspectして:~
適応-:adapt:~
過程:process:~
装って:pretendして:~
助力:help:~
想定-:suppose:~
調節-:tweak:~
調和-:harmonize:~
文書化-:document:~
機能:function:~
提起-:raise:~

	下位~system:subsystem
	明確化-:clarification
	-:clarity
	予め定義-済み:pre-defined
	~span:correspond
	対応する:respective
	respectively
	correspondance
	-:with the intention that
	利用されてない:unused
	課-:impose／:imposing
	書-:write
	書き直され:rewritten
	書き直す:rewrote
	得る:achieve
	-:take place
	待っている所:waiting
	保たれ:remain
	似た見かけにする:look more like
	~~具体的な:scanned
	検討する:look into
	— 要検討。might need to look into this later.
	欠けている:missing
	~~要点を明らかにする:make a point
	選んだ:chose
	外される:falls out
	考え:think
	〜に注目:Notice
	数えられ:count
	-:said
	になるもの:serve
	称される:referred to as
	-:refer to
	chose
	行える:do-able
	書いた:wrote
	~~膨大な:crazy proposed
	し直した:back

	●未分類（動詞
所属-:belong:~
測定結果:measure:~
測定-:measure:~
触れる:touchする:~
退化した:degenerate:退化している
連なる:runする:~

	加えて，:addition
	保つ:keep
	残され:left
	共有-法:sharing
	生成-法:generating
	association

	●未分類

継続性:continuity:~
単位:unit:~
可変:variable:~
形:form:~
教育用:educational:~
文脈的:contextual::~
背景:background:~
種類:kind:~
総和:sum:~
丸括弧:parentheses:~
	丸括弧を伴わない:unparenthesized
記号:symbol:~
連結-:concatenate:~
青色:blue:~
順列:permutation:~
	両側:double-sided


	最も深い:deepest な
	~~論理順:in memory
	複数~行lに:across lines
	~~位置する／一緒であり続ける:stay
	一部を占め:occupies 〜 as it does in
	~~露わになる:illustrate
	~~図式／:illustration
	取り出した:took 〜 out of
	後続する:follow
	長い:long
	-:away
	~flow内:in-flow
	行l端~辺:line-edge
	-:pattern
	-:so-corresponding
	からなる:consists of
	^en:line feed
	^en:endings
	^en:particle
	^en:excess

	●指示語
複-:multi-:~
余分の:extra:~
	尾部:trailing
	頭部:leading

	~~直に:immediate に
	最も近い:nearest
	大きい:large
	後者の:second
	以前の:previous
	副次的なもの:incidental
	同時に:simultaneous
	主に:mainly
	次:next
	種々の:various
	3:three
	ほとんど:mostly
	またがる:across
	より低い:lower
	より早い:earlier
	より深い:more in-depth
	より短い:shorter
	より近い:closer
	より長い:longer
	より高い:taller
	最終的に:ultimately
	一体として:as a whole
	一部:part of
	一致:coincide
	無:nothing
	各:either
	満たない:is less than
	唯一の:sole
	ある:some
	いくぶん:somewhat
	次:next

●●html_code_list


■furigana-separate
<ruby>
  <rb>振</rb><rb>り</rb><rb>仮</rb><rb>名</rb>
  <rp>(</rp><rt>ふ</rt><rt>り</rt><rt>が</rt><rt>な</rt><rp>)</rp>
</ruby>

■tokyo
<ruby>
  <rb>東</rb><rb>京</rb>
  <rt>とう</rt><rt>きょう</rt>
  <rt>Tō</rt><rt>kyō</rt>
</ruby>

■WWW
<ruby>
  <rb>W</rb><rb>W</rb><rb>W</rb>
  <rt>World</rt> <rt>Wide</rt> <rt>Web</rt>
</ruby>

■Gainsboro
<ruby>
  <rb>Aerith</rb><rb> </rb><rb>Gainsboro</rb>
  <rt>エアリス</rt><rt>・</rt><rt>ゲインズブール</rt>
</ruby>

■nosmoke-1
<ruby>
  屋<rt>おく</rt>内<rt>ない</rt>
  禁<rt>きん</rt>煙<rt>えん</rt>
</ruby>


■nosmoke-2
<ruby>
  屋<rt>おく</rt>  内<rt>ない</rt>
  禁<rt>きん</rt>  煙<rt>えん</rt>
</ruby>


■kocho
<ruby>蝴<rt>hú</rt>蝶<rt>dié</rt>

■onetwo
<ruby><rb>one</rb> <rb>two</rb> <rt>1</rt> <rt>2</rt></ruby>

■mujo-separate-1
<ruby>無<rt>む</ruby><ruby>常<rt>じょう</ruby>

■mujo-separate-2
<ruby style="ruby-merge:separate"><rb>無<rb>常<rt>む<rt>じょう</ruby>

■mujo-collapse-1
<ruby>無常<rt>むじょう</ruby>

■mujo-collapse-2
<ruby style="ruby-merge:merge"><rb>無<rb>常<rt>む<rt>じょう</ruby>



●●ref_normative

[CSS-BACKGROUNDS-3]
    Bert Bos; Elika Etemad; Brad Kemper. CSS Backgrounds and Borders Module Level 3. 17 October 2017. CR. URL: https://www.w3.org/TR/css-backgrounds-3/ 
[CSS-BOX-4]
    Elika Etemad. CSS Box Model Module Level 4. 21 April 2020. WD. URL: https://www.w3.org/TR/css-box-4/ 
[CSS-DISPLAY-3]
    Tab Atkins Jr.; Elika Etemad. CSS Display Module Level 3. 11 July 2019. CR. URL: https://www.w3.org/TR/css-display-3/ 
[CSS-INLINE-3]
    Dave Cramer; Elika Etemad; Steve Zilles. CSS Inline Layout Module Level 3. 8 August 2018. WD. URL: https://www.w3.org/TR/css-inline-3/ 
[CSS-PSEUDO-4]
    Daniel Glazman; Elika Etemad; Alan Stearns. CSS Pseudo-Elements Module Level 4. 25 February 2019. WD. URL: https://www.w3.org/TR/css-pseudo-4/ 
[CSS-TABLES-3]
    François Remy; Greg Whitworth; David Baron. CSS Table Module Level 3. 27 July 2019. WD. URL: https://www.w3.org/TR/css-tables-3/ 
[CSS-TEXT-4]
    Elika Etemad; et al. CSS Text Module Level 4. 13 November 2019. WD. URL: https://www.w3.org/TR/css-text-4/ 
[CSS-TEXT-DECOR-4]
    Elika Etemad; Koji Ishii. CSS Text Decoration Module Level 4. 6 May 2020. WD. URL: https://www.w3.org/TR/css-text-decor-4/ 
[CSS-VALUES-3]
    Tab Atkins Jr.; Elika Etemad. CSS Values and Units Module Level 3. 6 June 2019. CR. URL: https://www.w3.org/TR/css-values-3/ 
[CSS-VALUES-4]
    Tab Atkins Jr.; Elika Etemad. CSS Values and Units Module Level 4. 31 January 2019. WD. URL: https://www.w3.org/TR/css-values-4/ 
[CSS-WRITING-MODES-4]
    Elika Etemad; Koji Ishii. CSS Writing Modes Level 4. 30 July 2019. CR. URL: https://www.w3.org/TR/css-writing-modes-4/ 
[CSS2]
    Bert Bos; et al. Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification. 7 June 2011. REC. URL: https://www.w3.org/TR/CSS2/ 
[CSS3-TEXT-DECOR]
    Elika Etemad; Koji Ishii. CSS Text Decoration Module Level 3. 13 August 2019. CR. URL: https://www.w3.org/TR/css-text-decor-3/ 
[CSS3-WRITING-MODES]
    Elika Etemad; Koji Ishii. CSS Writing Modes Level 3. 10 December 2019. REC. URL: https://www.w3.org/TR/css-writing-modes-3/ 
[CSS3TEXT]
    Elika Etemad; Koji Ishii; Florian Rivoal. CSS Text Module Level 3. 29 April 2020. WD. URL: https://www.w3.org/TR/css-text-3/ 
[HTML]
    Anne van Kesteren; et al. HTML Standard. Living Standard. URL: https://html.spec.whatwg.org/multipage/ 
[RFC2119]
    S. Bradner. Key words for use in RFCs to Indicate Requirement Levels. March 1997. Best Current Practice. URL: https://tools.ietf.org/html/rfc2119 

●●ref_informative

[CSS-ALIGN-3]
    Elika Etemad; Tab Atkins Jr.. CSS Box Alignment Module Level 3. 21 April 2020. WD. URL: https://www.w3.org/TR/css-align-3/ 
[CSS-FLEXBOX-1]
    Tab Atkins Jr.; et al. CSS Flexible Box Layout Module Level 1. 19 November 2018. CR. URL: https://www.w3.org/TR/css-flexbox-1/ 
[JIS4051]
    Formatting rules for Japanese documents (『日本語文書の組版方法』). Japanese Standards Association. 2004. JIS X 4051:2004. In Japanese 
[JLREQ]
    Yasuhiro Anan; et al. Requirements for Japanese Text Layout. 3 April 2012. NOTE. URL: https://www.w3.org/TR/jlreq/ 
[RUBY]
    Marcin Sawicki; et al. Ruby Annotation. 31 May 2001. REC. URL: https://www.w3.org/TR/ruby/ 


●●trans_metadata
<p>
~THIS_PAGEは、 W3C により
として公開された
<a href="~SPEC_URL">CSS Ruby Layout Module Level 1</a>
を日本語に翻訳したものです。
~PUB
</p>

●●spec_metadata

最新発行バージョン
	https://www.w3.org/TR/css-ruby-1/
以前のバージョン
	https://www.w3.org/TR/2014/WD-css-ruby-1-20140805/
	https://www.w3.org/TR/2013/WD-css3-ruby-20130919/

テスト一式
	http://test.csswg.org/suites/css-ruby-1_dev/nightly-unstable/
最新の課題
	<a href="https://github.com/w3c/csswg-drafts/labels/css-ruby-1">GitHub Issues</a>

編集
	<a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad / fantasai</a> (Invited Expert)
	<a href="mailto:kojiishi@gmail.com">Koji Ishii</a> (Google)
	<a href="https://www.upsuper.org/">Xidorn Quan</a> (Mozilla)
	<a href="https://florian.rivoal.net/">Florian Rivoal</a> (Invited Expert)

Suggest an Edit for this Spec:</dt>
	<a href="https://github.com/w3c/csswg-drafts/blob/master/css-ruby-1/Overview.bs">GitHub Editor</a>
commit 履歴
	https://github.com/w3c/csswg-drafts/commits/master/css-ruby-1
</script>

</head>

<body>

<div id="_persisted_parts" hidden>

<table
	id="_dgm-ruby-univ"
	class="ex-ruby-table"
	style="font-size: 2em;"
><tbody>
<tr style="font-size: 0.5em;">
<td>けい<td>おう<td>ぎ<td>じゅく<td>だい<td>がく

<tr><td>慶<td>應<td>義<td>塾<td>大<td>学
<tr style="font-size: 0.5em;" lang="en-x-a0"><td colspan="4">Keio
<td colspan="2">University

</tbody></table>

<table
	id="_dgm-furigana-separate"
	class="ex-ruby-table"
	style="font-size: 2em;"
><tbody>
<tr style="font-size: 0.5em;">
<td>ふ<td><td>が<td>な
<tr><td>振<td>り<td>仮<td>名
</tbody></table>


<div
	id="_dgm-bopomofo"
	lang="zh-tw"
><div>電
</div><div class="x-bpmf">ㄉ
ㄧ
ㄢ
<span>ˋ</span>
</div><div>腦
</div><div class="x-bpmf" style="padding-top:0.5em;">ㄋ
ㄠ
<span>ˇ</span>
</div></div>


<div
	id="_dgm-shinkansen-top"
	class="x-shinkansen"
>
<div style="font-size:0.5em;">しんかんせん</div>
<div>新幹線</div>
</div>

<div
	id="_dgm-shinkansen-right"
	class="x-shinkansen"
	style="writing-mode: vertical-rl;"
>
<div style="font-size:0.5em;">しんかんせん</div>
<div>新幹線</div>
</div>

<div
	id="_dgm-shinkansen-bottom"
	class="x-shinkansen"
>
<div>新幹線</div>
<div style="font-size:0.6em;" lang="en-x-a0">shinkansen</div>
</div>

<div
	id="_dgm-shinkansen-left"
	class="x-shinkansen"
	style="writing-mode: vertical-rl;"
>
<div>新幹線</div>
<div style="font-size:0.6em;" lang="en-x-a0">shinkansen</div>
</div>

</div>

<header>

	<hgroup>
<h1 id="title">CSS Ruby Layout Module Level 1</h1>
	</hgroup>
</header>

<div id="MAIN" hidden>

	<section id="abstract">
~ABSTRACT

<p>
“~ruby” は、行l間に併記される注釈のある形であり，基底~textの傍に沿って現れる短い~text連なりである。
それらは概して，東Asian文書に利用され、発音を指示したり短い注釈を供する。
この~moduleは、~CSSにおける，~ruby注釈の表示に関係する［
描画~model／整形~制御
］について述べる。
◎
“Ruby”, a form of interlinear annotation, are short runs of text alongside the base text. They are typically used in East Asian documents to indicate pronunciation or to provide a short annotation. This module describes the rendering model and formatting controls related to displaying ruby annotations in CSS.
</p>

~CSSisaLANG

	</section>
	<section id="status">
~STATUSofTHIS

<p>
<!-- 
この節では、発行時点における…
 -->
これは編集者草案の公の複製です…
<span class="trans-note">【
以下，この節の他の内容は
<a href="css-common-ja.html#status">CSS 日本語訳 共通ページ</a>
に委譲
】</span></p>

	</section>

<main id="MAIN0">

	<section id="intro">
<h2 title="Introduction">1. 序論</h2>

~INFORMATIVE

		<section id="placement">
<h3 title="Module interactions">1.1. ~module間の相互作用</h3>

<p>
この~moduleは、 `CSS2$r の行内~box~modelを，~rubyを~supportするように拡張する。
◎
This module extends the inline box model of CSS Level 2 [CSS2] to support ruby.
</p>

<p>
この~moduleのどの~propも［
`first-line$pe ／ `first-letter$pe
］疑似要素には適用されない。
しかしながら， `ruby-position$p は、
`first-line$pe を通して，最初の行l【`整形される最初の行l$】にある~ruby注釈に影響するように継承され得る。
◎
None of the properties in this module apply to the ::first-line or ::first-letter pseudo-elements; however ruby-position can inherit through ::first-line to affect ruby annotations on the first line.
</p>

<p class="issue">
課題は、
<a href="~CSSissue">in GitHub</a>, および
<a href="http://lists.w3.org/Archives/Public/www-style/">www-style</a>
にて提起された
<a href="http://drafts.csswg.org/css-ruby-1/issues-wd-2014">各~commentに対する処置集</a>
にて追跡されている。
◎
Issues are being tracked both in GitHub as well as in this Disposition of Comments tracking issues raised on www-style.
</p>


		</section>
		<section id="values">
<h3 title="Value Definitions">1.2. 値~定義</h3>

<p class="trans-note">【
この節の内容は <a href="css-common-ja.html#values">~CSS日本語訳 共通~page</a>に委譲。
】</p>

		</section>
		<section id="diagram-conventions">
<h3 title="Diagram conventions">1.3. 図式の表記規約</h3>

<p>
東Asian~typographyにおける多くの~typographic上の表記規約は、描画される文字が［
`wide^en （“~~全角”, ~CJK）,
`narrow^en （“~~半角”, 非~CJK）
］のどちらであるかに依存する。
この文書の いくつかの~~図式では、その区別と~text連なり内の文字~付番を，次のような凡例で表す：
◎
Many typographical conventions in East Asian typography depend on whether the character rendered is wide (CJK) or narrow (non-CJK). There are a number of illustrations in this document for which the following legend is used:
</p>

<dl>
	<dt>
<span style="font-size: 1.5em;">`四^xF</span>
◎
alt=
Symbolic wide-cell glyph representation
</dt>
	<dd>
これは、~text連なり内の 4 個目の文字を指す，全角~glyphを表す（例： `漢字$）。
全角~glyphとして描画される文字は、このように漢数字で表される。
◎
Wide-cell glyph (e.g. Han) that is the nth character in the text run. They are typically sized to 50% when used as annotations.
</dd>

	<dt>
<span style="font-size: 1.5em;">`4^xH</span>
◎
alt=
Symbolic narrow-cell glyph representation
</dt>
	<dd>
これは、~text連なり内の 4 個目の文字を指す，半角~glyphを表す（例： ~roman ）。
半角~glyphとして描画される文字は、このように洋数字で表される。
◎
Narrow-cell glyph (e.g. Roman) which is the nth glyph in the text run.
</dd>
</dl>

<p>
いずれも，注釈においては、概して，基底の~~半分~sizeで示される。
◎
↑</p>

<p class="trans-note">【
この訳では、［
漢数字, 洋数字
］でこれらを区別することにする。
原文では、文字, 文字大小, 数字による添字（
F<sub>%n</sub> ／ h<sub>%n</sub>
）で区別されている。
】</p>

<p>
図式においては、［
上の記号を成す数字の方位
］が，そのまま［
その数字が表現する~glyphを~UAが描画するときの方位
］として意図されるものと見做される。
図式におけるこれらの文字~間の間隔は、~~要点を明らかにするために意図的に変更されない限り，副次的なものである。
◎
The orientation which the above symbols assume in the diagrams corresponds to the orientation that the glyphs they represent are intended to assume when rendered by the user agent. Spacing between these characters in the diagrams is incidental, unless intentionally changed to make a point.
</p>

<p class="trans-note">【
便宜上，この訳では、原文の［
`wide-cell^en ／ `narrow-cell^en
］を［
~~全角／~~半角
］と対訳しているが，いわゆる［
~~全角（ `fullwidth^en ）／~~半角（ `halfwidth^en ）
］とは技術的に異なるかもしれない（例えば “~~半角カナ” は、本当はどちらに分類されるべきか？）。
~Unicode仕様における， `East_Asian_Width^en ~propの［
`wide^en ／ `narrow^en
］を意味するようにも見受けられるが、原文でも説明されていないので，深く立ち入らないことにする。
】</p>

		</section>
		<section id="ruby-def">
<h3 title="What is ruby?">1.4. ~rubyとは何か？</h3>

<p>
`~ruby@
とは，［
その “基底” と称される，ある~text連なり
］に並行して現れる別の~text連なりであり、［
基底に対する注釈や発音の手引きになるものとして，結付けられたもの
］を指すときに，共通的に利用されている名前である。
◎
Ruby is the commonly-used name for a run of text that appears alongside another run of text (referred to as the “base”) and serves as an annotation or a pronunciation guide associated with that run of text.
</p>

<p>
単純な~rubyの例と, より複雑な構造を有する~rubyの例を，以下の図に示す：
◎
The following figures show two examples of Ruby, a simple case and one with more complicated structure.
</p>

<div class="example">

<p>
次の例では、単独の注釈を利用して基底~textを注釈している。
◎
In this first example, a single annotation is used to annotate the base text.
</p>

<figure><div title="日本語~表記の上端に適用される~rubyの例">

<table
	id="_dgm-licence"
	class="ex-ruby-table"
	style="font-size: 2em;"
><tbody>
<tr><td style="font-size:0.6em;">ラ イ セ ン ス
<td style="font-size:0.5em; color:blue; text-align: left;"> ← ~ruby~text
<tr><td>利用許諾
<td style="font-size:0.5em; color:blue; text-align: left;"> ← ~ruby基底

</tbody></table>

◎
alt=
Example of ruby applied on top of a Japanese expression
</div><figcaption>
日本語で利用される~rubyの例（単純な事例）
◎
Example of ruby used in Japanese (simple case)
</figcaption></figure>

<p>
日本語~typographyでは、これは，［
対語~ruby／~group~ruby（単語~~単位の~ruby）
］と呼ばれることもある
— 当の注釈は、一体として，複-文字からなる単語に結付けられているので。
◎
In Japanese typography, this case is sometimes called taigo ruby (Japanese: 対語ルビ) or group-ruby (per-word ruby), ( because the annotation as a whole is associated with multi-character word (as a whole).
</p>

</div>

<div class="example">
<p>
次の例では、基底~並びに 2 個の~levelの注釈が添付けられている。
上端にある`平仮名$による文字たちは，基底を成す各 `日本漢字$の発音を示している一方で、下端にある単語［
“`Keio^en” , “`University^en”
］は，英語~翻訳を述べている注釈である。
◎
In this second example, two levels of annotations are attached to a base sequence: the hiragana characters on top refer to the pronunciation of each of the base kanji characters, while the words “Keio” and “University” on the bottom are annotations describing the English translation.
</p>

<figure><div title="基底~文字の上面にも下面にも注釈~textを伴う複階的な~rubyを示す例">
`ruby-univ^dgm
◎
alt=
Example showing complex ruby with annotation text over and under the base characters
</div><figcaption>
基底~文字の上面と下面に注釈~textを伴う，複階的な~ruby。
◎
Complex ruby with annotation text over and under the base characters
</figcaption></figure>

<p>
`平仮名$からなる注釈の各 文字~並びと, 対応する`日本漢字$からなる基底~textの各 文字とが，
【表示において】
正しく結付けられるようにするため、これらの日本漢字の各~合間の間隔は調整されていることに注目（上の図では、 4 個目の日本漢字の前後に生じている）。
上の例で，`平仮名$が成す`注釈を併合する$ように~styleをアテガえば、日本漢字たちの各~合間の間隔が可変になるのを避けれる
— それは、先に示した~group~rubyの例に似た見かけにするが、~ruby構造~内には，( 基底, 注釈 )
の各`~pair法$が記録されるので、~textが複数~行lに分断される場合でも，注釈~文字は，対応する基底~文字と正しく~pairになるように~~位置する。
◎
Notice that to allow correct association between the hiragana characters and their corresponding Kanji base characters, the spacing between these Kanji characters is adjusted. (This happens around the fourth Kanji character in the figure above.) To avoid variable spacing between the Kanji characters in the example above the hiragana annotations can be styled as a merged annotation, which will look more like the group-ruby example earlier. However because the base-annotation pairings are recorded in the ruby structure, if the text breaks across lines, the annotation characters will stay correctly paired with their respective base characters.
</p>

</div>

<p>
日本語に利用される`~ruby$整形は、
`JIS4051$r （日本語）, および
`JLREQ$r （日本語~訳もある）に述べられる。
~HTMLにおいては、~ruby構造とそれを表現する~markupは，
`Ruby Markup Extension^cite 仕様にて述べられる。
この~moduleは、そのような~markupの~ruby~layoutに関連な，~CSSによる描画~modelと整形~制御について述べる。
◎
Ruby formatting as used in Japanese is described in JIS X-4051 [JIS4051] (in Japanese) and in Requirements for Japanese Text Layout [JLREQ] (in English and Japanese)]. In HTML, ruby structure and markup to represent it is described in the Ruby Markup Extension specification. This module describes the CSS rendering model and formatting controls relevant to ruby layout of such markup.
</p>

		</section>
	</section>
	<section id="ruby-model">
<h2 title="Ruby Box Model">2. ~ruby~box~model</h2>

<div>
<p>
~CSS~ruby~modelは、次に基づく：
</p>

<ul>
	<li>
<a href="~TR/html5/text-level-semantics.html#the-ruby-element">W3C HTML5 Ruby Markup</a>
~model
【これは旧~HTML仕様 — 現行の仕様においては <a href="~HEtextlevel#the-ruby-element">§ `ruby^e 要素</a>】
</li>
	<li>
<a href="~TR/ruby/">XHTML Ruby Annotation Recommendation</a>
`RUBY$r
</li>
</ul>

<p>
この~modelにおける~ruby構造は、次のものからなる：
◎
The CSS ruby model is based on the W3C HTML5 Ruby Markup model and the XHTML Ruby Annotation Recommendation [RUBY]. In this model, a ruby structure consists of＼
</p>
</div>

<ul>
	<li>
基底~text（注釈が付与される~text）を表現する， 1 個以上の［
`~ruby基底$を指示する要素
］。
◎
one or more ruby base elements representing the base (annotated) text,＼
</li>
	<li>
それぞれが基底~textに結付けられる注釈を表現する， 1 個以上の~level
— 各~levelは， 1 個以上の［
`~ruby注釈$を指示する要素
］からなる。
◎
associated with one or more levels of ruby annotation elements representing the annotations.＼
</li>
</ul>

<p>
~rubyの構造は、~tableのそれに類似する：
そこには、一連の “~row” （`基底~level$の~text, および各 `注釈~level$）と,
一連の “~col” （各 `~ruby基底$と，それに対応する［
各~levelに属する`~ruby注釈$
］）がある。
◎
The structure of ruby is similar to that of a table: there are “rows” (the base text level, each annotation level) and “columns” (each ruby base and its corresponding ruby annotations).
</p>

<p>
連続する［
基底たちと注釈たち
］は、`~ruby区分$の中に一緒に~group化される。
`~ruby区分$の中では、`~ruby注釈$は，複数の`~ruby基底$に`~span$することもある。
◎
Consecutive bases and annotations are grouped together into ruby segments. Within a ruby segment, a ruby annotation may span multiple ruby bases.
</p>

<p class="note">注記：
~HTMLにおいては、単独の `ruby^e 要素が，複数の`~ruby区分$を包含することもある。
（~XHTML~Ruby~modelでは、単独の `ruby^e 要素が包含し得る`~ruby区分$は， 1 個だけである。）
◎
Note: In HTML, a single &lt;ruby&gt; element may contain multiple ruby segments. (In the XHTML Ruby model, a single &lt;ruby&gt; element can only contain one ruby segment.)
</p>

		<section id="ruby-display">
<h3 title="Ruby-specific display Values">2.1. ~rubyに特有な `display^p 値</h3>

<p>
予め定義-済みな~ruby要素を備えていない文書~言語（~XMLの応用など）用には、作者は，文書~言語の要素を~ruby要素に対応付けることが要求される
— これは、 `display$p ~propで行われる。
◎
For document languages (such as XML applications) that do not have pre-defined ruby elements, authors must map document language elements to ruby elements; this is done with the display property.
</p>

◎名 `display$p
◎新値
`ruby$v | `ruby-base$v | `ruby-text$v | `ruby-base-container$v | `ruby-text-container$v
◎表終

<p>
次に挙げる新たな `display$p 値は、任意な要素に~ruby~layoutの役割をアテガう：
◎
The following new display values assign ruby layout roles to an arbitrary element:
</p>

<dl>
	<dt>`ruby@v</dt>
	<dd>
要素は
`~ruby容器~box@
を生成するよう指定する（~HTML／~XHTMLの `ruby^e 要素に対応する）。
◎
Specifies that an element generates a ruby container box. (Corresponds to HTML/XHTML &lt;ruby&gt; elements.)
</dd>

	<dt>`ruby-base@v</dt>
	<dd>
要素は
`~ruby基底~box@
を生成するよう指定する（~HTML／~XHTMLの `rb^e 要素に対応する）。
◎
Specifies that an element generates a ruby base box. (Corresponds to HTML/XHTML &lt;rb&gt; elements.)
</dd>

	<dt>`ruby-text@v</dt>
	<dd>
要素は
`~ruby注釈~box@
を生成するよう指定する（~HTML／~XHTMLの `rt^e 要素に対応する）。
◎
Specifies that an element generates a ruby annotation box. (Corresponds to HTML/XHTML &lt;rt&gt; elements.)
</dd>

	<dt>`ruby-base-container@v</dt>
	<dd>
要素は
`~ruby基底~容器~box@
を生成するよう指定する（~XHTMLの `rbc^e 要素に対応する
— ~HTMLにおいては，匿名~boxとして生成される）。
◎
Specifies that an element generates a ruby base container box. (Corresponds to XHTML &lt;rbc&gt; elements; generated as an anonymous box in HTML.)
</dd>

	<dt>`ruby-text-container@v</dt>
	<dd>
要素は
`~ruby注釈~容器~box@
を生成するよう指定する（~HTML／~XHTMLの `rtc^e 要素に対応する）。
◎
Specifies that an element generates a ruby annotation container box. (Corresponds to HTML/XHTML &lt;rtc&gt; elements.)
</dd>
</dl>

<p class="trans-note">【
`rb^e, `rtc^e は、現在の~HTMLでは<a href="~HTMLobs#rb">廃されている</a>ので，
`rbc^e と同様に，~HTMLにおいては，匿名~boxとして生成されることになる（この仕様に現れる “XHTML” は、
<a href="~HTMLxml#writing-xhtml-documents">~XML構文を利用する~HTML</a>ではなく，過去に策定された方の仕様を指す）。
】</p>

<p class="advisement">
専用の~ruby~markupを~supportする言語（~HTMLなど）を利用している作者は、
その~markupを利用するべきである
— （ `span^e の様な）任意な要素に
~ruby `display$p 値で~styleをアテガうのでなく。
正しい~markupを利用すれば、~screen読取器や非~CSS描画器が ~ruby構造を解釈できることを確保できる。
◎
Authors using a language (such as HTML) that supports dedicated ruby markup should use that markup rather than styling arbitrary elements (like &lt;span&gt;) with ruby display values. Using the correct markup ensures that screen readers and non-CSS renderers can interpret the ruby structures.
</p>

			<section id="formatting-context">
<h4 title="The Ruby Formatting Context">2.1.1. ~ruby整形~文脈</h4>

<p>
`~ruby容器$は、可分な`行内~levelの~box$【すなわち，`行内~box$】である。
それは、`行内~box$の様に複数~行lに分断され得る。
また，その`包含塊$は、先祖の, 最も近い`塊~容器$になる。
また、行内~boxの内容が［
行内~boxを包含する同じ`行内~整形~文脈$
］に関与するのと同じく，`~ruby容器$とその`基底~level$の内容は［
`~ruby容器$を包含する同じ`行内~整形~文脈$
］に関与する。
◎
Ruby containers are non-atomic inline-level boxes. Like inline boxes, they break across lines, and their containing block is the nearest block container ancestor. And just as the contents of an inline box participate in the same inline formatting context that contains the inline box itself, a ruby container and its base-level contents participate in the same inline formatting context that contains the ruby container itself.
</p>

<p>
しかしながら、`~ruby容器$は，
`~ruby整形~文脈@
も確立する
— すなわち、［
`行内~整形~文脈$の一~区分を成す，自身
］の周りに，更なる構造を築く。
`内部~table要素$と同様に、［
`~ruby基底$／`~ruby注釈$／`~ruby基底~容器$／`~ruby注釈~容器$
］は，
`内部~ruby~box@
と総称される
— これらは、~ruby~layoutに特有な役割を有し，`~ruby容器$の`~ruby整形~文脈$に関与する。
◎
However ruby containers also establish a ruby formatting context that builds further structure around their segment of the inline formatting context. Ruby bases, ruby annotations, ruby base containers, and ruby annotation containers are internal ruby boxes: like internal table elements, they have specific roles in ruby layout, and participate in their ruby container’s ruby formatting context.
</p>

<p>
`行内~box$の内容と同じく、`~ruby容器$の内容（および，その すべての`内部~ruby~box$）用の包含塊は，~ruby容器の包含塊になる。
よって，例えば浮動体を囲い込むのは、各種~ruby~box型ではなく，~ruby容器の包含塊になる。
◎
As with the contents of inline boxes, the containing block for the contents of a ruby container (and all its internal ruby boxes) is the containing block of the ruby container. So floats, for example, are trapped by the ruby container’s containing block, not any of the ruby box types.
</p>

<p class="issue">
`内部~ruby~box$は`行内~level$なのか？
◎
Are internal ruby boxes inline-level?
</p>

			</section>
			<section id="block-ruby">
<h4 title="Non-Inline Ruby">2.1.2. 非~行内~ruby</h4>

<p>
要素の［
`内縁~表示~型$が `ruby$v，`外縁~表示~型$が `inline$v 以外
］である場合、 2 個の~box
— `外縁~表示~型$から要求される `首要~box$, および
【その中に】
`行内~level$の`~ruby容器$ —
が生成されることになる。
要素~上に指定される~propは、すべて，`首要~box$に適用される（また，継承-可能であれば，`~ruby容器~box$にも継承される）。
これにより、要素を
— その内部の~ruby構造は，正しく保守しつつ —
塊として~styleさせられる。
◎
If an element has an inner display type of ruby and an outer display type other than inline, then it generates two boxes: a principal box of the required outer display type type, and an inline-level ruby container. All properties specified on the element apply to the principal box (and if inheritable, inherit to the ruby container box). This allows styling the element as a block, while correctly maintaining the internal ruby structure.
</p>

<p class="note">注記：
［
`絶対的に位置され$た／浮動された
］要素の`外縁~表示~型$は、`塊~化$される（
`CSS-DISPLAY-3$r ／ `CSS2$r
<a href="~CSS2VISUREN#dis-pos-flo">§ 9.7</a>
を見よ）。
`内部~ruby要素$（ `内部~ruby~box$を生成させる要素 ）用には、これにより算出される `display$p 値は `block$v になる。
◎
Note: Absolute positioning or floating an element causes its display value to compute to a block-level equivalent. (See [CSS-DISPLAY-3] or [CSS2] section 9.7.) For the internal ruby display types, this causes their display value to compute to block.
</p>

			</section>
		</section>
		<section id="box-fixup">
<h3 title="Anonymous Ruby Box Generation">2.2. 匿名な~ruby~boxの生成</h3>

<p>
~CSS~modelでは、文書~言語が，各種~ruby~boxのそれぞれに対応する要素を含むことは、要求されない。
文書~構造に欠けている部分に対しては、以下に与えられる，
<a href="~CSS22/tables.html#anonymous-boxes">~tableを正規化するときに利用される規則</a>
`CSS2$r
に似た規則を通して、匿名~boxが暗黙に生成される。
◎
The CSS model does not require that the document language include elements that correspond to each of these components. Missing parts of the structure are implied through the anonymous box generation rules similar to those used to normalize tables. [CSS2]
</p>

<ol>
	<li id="anon-gen-inlinize">
<strong>`塊~levelの~box$を`行内~化$する</strong>：
`~flow内$にある~boxに直に包含されている［
`~ruby容器$／
`内部~ruby~box$【！`~ruby基底~box$／`~ruby注釈~box$／`~ruby基底~容器$／`~ruby注釈~容器$】
］は
— `行内~level$の内容のみを包含するよう —
“`行内~化$” され、
`display$p 値はそれに則って算出される。
例えば，`~flow内$にある要素が［
自身の `display$p は `block^v にされていて，親の `display$p は `ruby-text$v にされている
］場合、要素の `display$p ~propは， `inline-block$v に算出される。
`CSS-DISPLAY-3$r
◎
Inlinify block-level boxes: Any in-flow boxes directly contained by a ruby container, ruby base container, ruby annotation container, ruby base box, or ruby annotation box are “inlinified” per [CSS-DISPLAY-3]), and their display value computed accordingly, so that they contain only inline-level content. For example, the display property of an in-flow element with display: block parented by an element with display: ruby-text computes to inline-block.
</li>
	<li id="anon-gen-anon-ruby">
<p>
<strong>匿名な~ruby容器を生成する</strong>：
不適正に包含されている`内部~ruby~box$【！`~ruby基底~容器$／`~ruby注釈~容器$／`~ruby基底~box$／`~ruby注釈~box$】（および介在する`空白$）からなる，連続する【！＊~CSS22/tables.html#anonymous-boxes 】並びは、匿名な`~ruby容器$内に包装する。
この段の目的においては、次のものが不適正に包含されているとされる：
◎
Generate anonymous ruby containers: Any consecutive sequence of improperly-contained ruby base containers, ruby annotation containers, ruby bases, and/or ruby annotations (and any intervening white space) is wrapped in an anonymous ruby container. For the purpose of this step:
</p>

		<ul>
			<li>
`~ruby基底$であって，その親は［
`~ruby基底~容器$／`~ruby容器$
］でないもの。
◎
an improperly-contained ruby base is one not parented by a ruby base container or ruby container
</li>
			<li>
`~ruby注釈$であって，その親は［
`~ruby注釈~容器$／`~ruby容器$
］でもないもの。
◎
an improperly-contained ruby annotation is one not parented by a ruby annotation container or ruby container
</li>
			<li>
［
`~ruby基底~容器$／`~ruby注釈~容器$
］であって，その親は`~ruby容器$でないもの。
◎
an improperly-contained ruby base container or ruby annotation container is one not parented by a ruby container
</li>
		</ul>
	</li>
	<li id="anon-gen-bare-inlines">
<p>
<strong>親が違えられた`行内~level$の内容を包装する</strong>：
連続する［
~textや`行内~levelの~box$
］からなる並びであって，その親が［
`~ruby容器$／`~ruby基底~容器$
］であるものは、匿名な`~ruby基底$内に包装する。
同様に，連続する［
~textや`行内~levelの~box$
］からなる並びであって，その親が`~ruby注釈~容器$であるものは、匿名な`~ruby注釈$内に包装される。
（この目的においては、親が違えられた`内部~table要素$は，`行内~level$の内容として扱われる
— 親が~ruby~boxにされるものは、最終的に`行内~level$の`~table包装~box$で包装されることになるので。）
◎
Wrap misparented inline-level content: Any consecutive sequence of text and inline-level boxes directly parented by a ruby container or ruby base container is wrapped in an anonymous ruby base. Similarly, any consecutive sequence of text and inline-level boxes directly parented by a ruby annotation container is wrapped in an anonymous ruby annotation. (For this purpose, misparented internal table elements are treated as inline-level content since, being parented by ruby boxes, they will be ultimately wrapped by an inline-level table wrapper box.)

inline table.)
</p>

<p>
ただし，そのように構築された匿名~boxが`空白$のみを包含する場合、それは
`~ruby内 空白@
と見なされ、下に述べるように，破棄されるか保全される。
◎
However, if an anonymous box so constructed contains only white space, it is considered intra-ruby white space and is either discarded or preserved as described below.
</p>
	</li>

	<li id="anony-gen-trim-space">
<strong>頭部／尾部にある空白を削る</strong>：
`~ruby内 空白$のうち，親の唯一の子でない, かつ［
`~ruby容器$／`~ruby注釈~容器$／`~ruby基底~容器$
］内の先頭や末尾に生じるものは、その `display$p が `none^v にされていたかのように除去する。
◎
Trim leading/trailing white space: Any intra-ruby white space that is not the sole child of its parent and occurs at the beginning or end of a ruby container, ruby annotation container, or ruby base container is removed, as if it had display: none
</li>
	<li>
<p>
他の`~ruby内 空白$は、その直前, 直後の同胞~box（`内部~ruby~box$【！`~ruby基底$／`~ruby注釈$／`~ruby基底~容器$／`~ruby注釈~容器$】）に応じて，次の表に挙げる下位型に分類される：
</p>

<table>
<colgroup span="2"></colgroup>
<colgroup span="2"></colgroup>

<thead><tr><th>直前の~box
<th>直後の~box
<th>~box型
<th>下位型
</thead><tbody>

<tr><td>任意
<td>`~ruby注釈~容器$
<td>なし
<td>`~level間 空白@

<tr><td>`~ruby注釈$でない
<td>`~ruby注釈$
<td>なし
<td>同上

<tr><td>`~ruby注釈$
<td>`~ruby注釈$
<td>`~ruby注釈$
<td>`注釈~間 空白@

<tr><td>`~ruby基底$
<td>`~ruby基底$
<td>`~ruby基底$
<td>`基底~間 空白@

<tr><td colspan="2">上に挙げたもの以外の任意の組み合わせ
<td>`~ruby基底$
<td>`区分~間 空白@

</tbody></table>

<p>
これらのうち，`~level間 空白$以外のものは、
`~level内 空白@
と総称される。
</p>

◎
↓</li>

	<li id="anon-gen-discard-space">
<strong>`~level間 空白$を除去する</strong>：
`~level間 空白$は、 `display$p が `none^v にされていたかのように除去する。
◎
Remove inter-level white space: Any intra-ruby white space whose immediately adjacent siblings match one of the patterns below is inter-level white space and is removed, as if it had display: none.

• Previous box｜Next box
• any｜ruby annotation container
• not ruby annotation｜ruby annotation
</li>
	<li id="anon-gen-interpret-space">
<strong>`~level内 空白$を解釈する</strong>：
`~level内 空白$には、上の表に示した対応する~box型をアテガう
— これらは、`~pair法$と~layoutにおいては，後述するように特別に扱われる。
◎
Interpret intra-level white space: Any intra-ruby white space box whose immediately adjacent siblings match one of the patterns below is assigned the box type and subtype defined in the table below:
• Previous box｜Next box｜Box type｜Subtype
• ruby base｜ruby base｜ruby base｜inter-base white space
• ruby annotation｜ruby annotation｜ruby annotation｜inter-annotation white space
• ruby annotation or ruby annotation container｜ruby base or ruby base container｜ruby base｜inter-segment white space
• ruby base or ruby base container｜ruby base container
• ruby base container｜ruby base or ruby base container
◎
The intra-level white space boxes defined above are treated specially for pairing and layout. See below.
</li>

	<li id="anon-gen-unbreak">
<p>
<strong>行l分断を抑止する</strong>：
`~ruby注釈$の内側にあるすべての`強制d行l分断$は、`縮約-可能$な`区分~分断$として，
<a href="~CSSTEXT#line-break-transform">区分~分断の~~変換~規則</a>
`CSS3TEXT$r
による定義に従って変換する（ `white-space$p 値に関わらず）。
◎
Suppress line breaks: Convert all forced line breaks inside ruby annotations (regardless of white-space value) as defined for collapsible segment breaks in CSS Text Level 3 § 4.1.2.
</p>

<p class="issue">
これの目標は、~ruby注釈の中では，行l分断を抑止して~layout~modelを単純~化することにある。
別法として、受容-可能な何らかの種類の挙動を定義しようと試行することもできたが。
◎
The goal of this is to simplify the layout model by suppressing any line breaks within ruby annotations. Alternatively we could try to define some kind of acceptable behavior for them.
</p>
	</li>

	<li id="anon-gen-anon-containers">
<p>
<strong>匿名~level容器を生成する</strong>：
</p>
		<ul>
			<li>
連続する［
`~ruby基底$／`基底~間 空白$
］からなる並びであって，親は`~ruby基底~容器$でないものは、匿名な`~ruby基底~容器$内に包装する。
</li>
			<li>
連続する［
`~ruby注釈$／`注釈~間 空白$
］からなる並びであって，親は`~ruby注釈~容器$でないものは、匿名な`~ruby注釈~容器$内に包装する。
</li>
		</ul>
◎
Generate anonymous level containers: Any consecutive sequence of ruby bases and inter-base white space (and not inter-segment white space) not parented by a ruby base container is wrapped in an anonymous ruby base container. Similarly, any consecutive sequence of ruby annotations and inter-annotation white space not parented by a ruby annotation container is wrapped in an anonymous ruby annotation container.
</li>
</ol>

<p class="issue">
<a href="http://lists.w3.org/Archives/Public/www-archive/2014Jun/att-0027/PastedGraphic-1.png">この図式</a>
を例に取り込む。
◎
Make this diagram into an example.
</p>

<p>
この節の規則により，~ruby~layout構造~内の親子関係がすべて適正にされたなら、~UAは，基底とそれらの注釈とを結付けることになる。
◎
Once all ruby layout structures are properly parented, the UA can start to associate bases with their annotations.
</p>

<p class="note">注記：
~UAには、これらの匿名~box（および，
<a href="#ruby-pairing">§ 注釈の~pair法</a>
による［
匿名かつ空な`~level内 空白$ ~box
］）を，~~実際に内部~構造に作成することは要求されない
— `~pair法$と~layoutが，それらが存在するかのように挙動する限り。
◎
Note: The UA is not required to create any of these anonymous boxes (or the anonymous empty intra-level white space boxes in § 2.3 Annotation Pairing) in its internal structures, as long as pairing and layout behaves as if they existed.
</p>

		</section>
		<section id="ruby-pairing">
<h3 title="Annotation Pairing">2.3. 注釈の~pair法</h3>

<p>
注釈の
`~pair法@
は、`~ruby注釈$たちと`~ruby基底$たちとを結付ける処理-である：
◎
Annotation pairing is the process of associating ruby annotations with ruby bases.＼
</p>

<ul>
	<li>
<p>
各 `~ruby注釈$には、 1 個~以上の `~ruby基底$が結付けられる
— このことを［
`~ruby注釈$は，それらの基底に
`~span@
する
］という（複数の基底に`~span$する`~ruby注釈$は、
`~spanning注釈@
と呼ばれる†）。
◎
Each ruby annotation is associated with one or more ruby bases, and is said to span those bases. (A ruby annotation that spans multiple bases is called a spanning annotation.)
</p>

<p class="trans-note">【†
この訳では，この用語は利用せず、複数に限定する必要がある所では，明示的に
“複数の基底に~spanする”
と記す。
“~spanする”
が単数も複数も含意するのに対し，
“~spanning（~spanしている）”
が単数の否定を含意することは、（少なくとも~~日本語の感覚としては，）直感的でないので。
】</p>
	</li>
	<li>
ある`~ruby基底$に結付けられる`~ruby注釈$の個数は、`注釈~level$ごとに 1 個までである。
`注釈~level$が複数あれば、同じ~ruby基底に複数の`~ruby注釈$が結付けられ得る。
◎
A ruby base is can be associated with only one ruby annotation per annotation level. However, if there are multiple annotation levels, it can be associated with multiple ruby annotations.
</li>
</ul>

<p>
`~pair法$が完了したなら、~ruby “~col” 単位が定義される
— そのそれぞれは、`~ruby区分$内の［
1 個の`~ruby基底$と, ［
各`注釈~level$ごとに それに属する 1 個の（場合によっては匿名かつ空な）`~ruby注釈$
］］で表現される。
◎
Once pairing is complete, ruby “column” units are defined, each represented by a single ruby base and one ruby annotation (possibly an empty, anonymous one) from each annotation level in its ruby segment.
</p>

			<section id="segment-pairing">
<h4 title="Segment Pairing and Annotation Levels">2.3.1. 区分の~pair法と注釈~level</h4>

<div class="p">
<p>
~ruby構造は、いくつかの
`~ruby区分@
に分割される
— 各`~ruby区分$は、次のものからなる：
</p>

<ul>
	<li>
先頭に在る`~ruby基底~容器$。
それは、`~ruby区分$の
`基底~level@
を表現する。
</li>
	<li>
<p>
後続する 1 個以上の`~ruby注釈~容器$
— そのそれぞれは：
</p>
		<ul>
			<li>
基底~text用のある 1 つの
`~level@
を成す注釈を表現する
— `N^V 個目のそれは、 `N^V 個目の~levelを成す注釈を表現する。
</li>
			<li>
`基底~level$の`~ruby基底~容器$と~pairにされる。
</li>
		</ul>
	</li>
</ul>
◎
A ruby structure is divided into ruby segments, each consisting of a single ruby base container followed by one or more ruby annotation containers. Each ruby annotation container in a ruby segment represents one level of annotation for the base text: the first one represents the first level of annotation, the second one represents the second level of annotation, and so on. The ruby base container represents the base level. The ruby base container in each segment is thus paired with each of the ruby annotation containers in that segment.
</div>

<p>
退化した事例を取扱うため、次のような，匿名かつ空な容器が存在するものと見做される：
◎
In order to handle degenerate cases, some empty anonymous containers are assumed:
</p>

<ul>
	<li>
`~ruby容器$の最初の子が`~ruby注釈~容器$である場合、その前に，匿名かつ空な`~ruby基底~容器$が存在するものと見做される。
◎
If the first child of a ruby container is a ruby annotation container, an anonymous, empty ruby base container is assumed to exist before it.
</li>

	<li>
`~ruby容器$が 連続する複数の`~ruby基底~容器$を包含する場合、それらの各~合間に，匿名かつ空な`~ruby注釈~容器$が存在するものと見做される。
◎
Similarly, if the ruby container contains consecutive ruby base containers, anonymous, empty ruby annotation containers are assumed to exist between them.
</li>

</ul>

<p>
`区分~間 空白$は、実質的に，自前の`~ruby区分$を成す。
◎
Inter-segment white space is effectively a ruby segment of its own.
</p>

			</section>
			<section id="base-annotation-pairing">
<h4 title="Unit Pairing and Spanning Annotations">2.3.2. 単位ごとの~pair法, 複数の基底に~spanする注釈</h4>

<p>
`~ruby区分$の中では、`~ruby基底~容器$内の各`~ruby基底$は、同じ`~ruby区分$内の各`~ruby注釈~容器$に属する 1 個の`~ruby注釈$と，~pairにされる。
◎
Within a ruby segment, each ruby base in the ruby base container is paired with one ruby annotation from each ruby annotation container in its ruby segment.
</p>

<p>
`~ruby注釈~容器$が 1 個の匿名な`~ruby注釈$しか包含しない場合、その`~ruby注釈$は，その`~ruby区分$内のすべての`~ruby基底$と~pairにされる（すなわち，それらに`~span$する）。
◎
If a ruby annotation container contains only a single, anonymous ruby annotation, then that ruby annotation is paired with (i.e. spans across) all of the ruby bases in its ruby segment.
</p>

<div >
<p>
他の場合、各`~ruby注釈$と, その区分~内の対応する`~ruby基底$とが、順に~pairにされる。
~ruby注釈と~ruby基底の個数が一致しない場合：
</p>

<ul>
	<li>
対応する`~ruby注釈$がない`~ruby基底$は、［
`~ruby注釈~容器$の末尾に挿入される，匿名かつ空な注釈
］と~pairにされる。
</li>
	<li>
対応する`~ruby基底$がない`~ruby注釈$は、［
`~ruby基底~容器$の末尾に挿入される，匿名かつ空な基底
］と~pairにされる。
</li>
</ul>
◎
Otherwise, each ruby annotation is paired, in order, with the corresponding ruby base in that segment. If there are not enough ruby annotations in a ruby annotation container, the remaining ruby bases are paired with anonymous empty annotations inserted at the end of the ruby annotation container. If there are not enough ruby bases, any remaining ruby annotations pair with empty, anonymous bases inserted at the end of the ruby base container.
</div>

<p>
複数の基底に明示的に~spanさせる~ruby~markup（例： XHTML Complex Ruby Annotations ）を~supportする実装は、そのような各~注釈と, それが`~span$している基底たちとが~pairにされるように，`~pair法$の規則を適切に調整するモノトスル。
◎
If an implementation supports ruby markup with explicit spanning (e.g. XHTML Complex Ruby Annotations), it must adjust the pairing rules to pair spanning annotations to their bases appropriately.
</p>

<div class="p">
<p>
`~level内 空白$は、注釈に対する標準な`~pair法$には関与しない
— ただし：
</p>

<ul>
	<li>
`~level内 空白$を挟んで隣接な［
2 個の`~ruby基底$ ／ 2 個の`~ruby注釈$
］が［
2 個の`~ruby注釈$ ／ 2 個の`~ruby基底$
］と~pairにされている下では、その空白も，後者の 2 個に挟まれた`~level内 空白$
— 無いならば、匿名かつ空な`~level内 空白$~boxが存在するものと見做す —
と~pairにされる。
</li>
	<li>
`~level内 空白$を挟んで隣接な 2 個の`~ruby基底$が，同じ`~ruby注釈$と~pairにされている下では（注釈は それらの基底に`~span$している）、その空白も，その~ruby注釈と~pairにされる。
</li>
</ul>

◎
Intra-level white space does not participate in standard annotation pairing. However, if the immediately-adjacent ruby bases or ruby annotations are paired
• with two ruby bases or annotations that surround corresponding intra-level white space in another level, then the so-corresponding intra-level white space boxes are also paired.
• with a single spanning ruby annotation, then the intra-level white space is also paired to that ruby annotation
• with two ruby bases or annotations with no intervening intra-level white space, then the intra-level white space box pairs with an anonymous empty intra-level white space box assumed to exist between them.
</div>

<p class="issue">
図式を挿入する。
◎
Insert diagram
</p>

			</section>
			<section id="nested-pairing">
<h4 title="Complex Spanning with Nested Ruby">2.3.3. 入子の~rubyを伴う複階的な~span法</h4>

<p>
`~ruby容器$が
`入子に@
されたときの`~pair法$は、最も深い`~ruby容器$から始まり，外へ拡がる。
外縁`~ruby容器$の`~pair法$の視点からは、その中に入子にされた各`~ruby容器$は、~levelごとに単独の［
`~ruby基底$ ／`~ruby注釈$
］を表現しているものと数えられる。
したがって、［
外縁`~ruby容器$を成す`~ruby注釈$のうち，ある`入子の~ruby$と~pairにされているもの
］たちは，［
その入子にされた`~ruby容器$を成す`~ruby基底$すべて
］と~pairにされる（それらに`~span$する）。
入子にされた`~ruby容器$内の各`~ruby注釈~容器$は、［
自身と同じ`注釈~level$の，外縁`~ruby容器$における`~ruby注釈~容器$
］の一部を占め，［
外縁`~ruby容器$内に直に包含されていた
］かのように~layoutに関与する。
◎
When ruby containers are nested, pairing begins with the deepest ruby container, then expands out. From the pairing perspective of the outer ruby container, each ruby container nested within another ruby container counts as representing a single ruby base/annotation per level. The outer ruby container’s ruby annotations paired to the nested ruby are therefore paired with (and span) all of the nested ruby container’s ruby bases. Each ruby annotation container in the nested ruby container occupies the same annotation level in the outer ruby container as it does in the inner one and participates in its layout as if it were directly contained in the outer ruby container.
</p>

<p>
この処理-は再帰的である。
したがって，入子の`~ruby容器$の利用すれば、複階的な~span法の関係性を表現できるようになる。
◎
This process is recursive. Thus, using nested ruby containers allows the representation of complex spanning relationships.
</p>

<p class="issue">
これが，~ruby基底たちの内側にある~ruby容器に対する~layoutの取扱いから外されるのか，特別に取扱われる必要があるどうかは、明らかでない。
見出すための~layoutがより良く定義されるまで，待っている所にある…
◎
It’s not clear whether this falls out of layout handling of ruby containers inside ruby bases or needs to be handled specially. Waiting until layout is better-defined to find out...
</p>

			</section>
		</section>
		<section id="autohide">
<h3 title="Autohiding Base-identical Annotations">2.4. 基底と一致する注釈を自動で隠す法</h3>

<p>
`~ruby注釈$の~text内容が それの基底と正確に同じである場合、それは
`隠され@
る。
`~ruby注釈$を隠すことは、［
注釈の`~pair法$ ／
他の`~level$における~boxの塊-軸~沿いの位置決め
］には影響しない。
しかしながら，`隠され$た注釈は、可視にはならず，［
同~levelの中で隣接な`~ruby注釈~box$の並びを分離する
］以外には，~layoutへの影響iはない
— それが別々の区分に所属していて，［
`隠され$た注釈の基底は`~ruby基底$ではなく介在する行内であった
］かのように。
◎
If a ruby annotation has the exact same text content as its base, it is hidden. Hiding a ruby annotation does not affect annotation pairing or the block-axis positioning of boxes in other levels. However the hidden annotation is not visible, and it has no impact on layout other than to separate adjacent sequences of ruby annotation boxes within its level, as if they belonged to separate segments and the hidden annotation’s base were not a ruby base but an intervening inline.
</p>

<div class="example">

<p>
このことは、`日本漢字$と`平仮名$が混在する日本語~単語~用の注釈の表示を，正しく行内~化できるようにするためにある。
例えば、単語
"振仮名"
は、次のように行内~化されるべきである：
◎
This is to allow correct inlined display of annotations for Japanese words that are a mix of kanji and hiragana. For example, the word 振り仮名 should be inlined as
</p>

<figure>
振仮名(ふりがな)
</figure>

<p>
したがって、次のように~mark-upされる：
◎
and therefore marked up as
</p>

`furigana-separate^xCode

<p>
しかしながら，~rubyとして表示されるときは、 “り” は，`隠され$るべきである。
◎
However, when displayed as ruby, the “り” should be hidden
</p>

<figure><div title="各 日本漢字 基底~文字の上に，その発音を与える振仮名~用の平仮名による注釈が現れる。">
`furigana-separate^dgm
◎
alt=
Hiragana annotations for 振り仮名 appear, each pronunciation above its kanji base character.
</div><figcaption>
振仮名~用の`平仮名$~ruby。
"り" は`平仮名$内にすでにあるので、その上には，対する`平仮名$注釈は示されないことに注目。
◎
Hiragana ruby for 振り仮名. Notice there is no hiragana annotation above り, since it is already in hiragana.
</figcaption></figure>

</div>

<p>
`ruby-merge$p の算出d値が `merge$v になる場合、自動で隠すのは不能化される。
`ruby-merge$p の算出d値が `auto$v になる場合，~UAは自動で隠すかどうか裁定してもヨイが、~UAが選んだ~algoが `separate$v が生産する結果と類似なものを生産する場合には，自動で隠すことが推奨される。
◎
When the computed value of ruby-merge is merge, the autohiding is disabled. When the computed value of ruby-merge is auto, the user agent may decide whether to autohide or not, but it is recommended to autohide if the algorithm the user agent chose produces the results similar to separate would produce.
</p>

<p>
この自動で隠す挙動~用の内容~比較は、［
（ `white-space$p による）空白の縮約-法 ／
（ `text-transform$p による）~text変形n
］よりも先に行われ，要素は無視される（~boxの `textContent^c のみを考慮する）。
◎
The content comparison for this auto-hiding behavior takes place prior to white space collapsing (white-space) and text transformation (text-transform) and ignores elements (considers only the textContent of the boxes).
</p>

<p class="note">注記：
~CSS~Rubyの将来の~levelでは，自動で隠すときの制御も追加され得るが、この~levelでは常に強制される。
◎
Note: Future levels of CSS Ruby may add controls for auto-hiding, but in this level it is always forced.
</p>

		</section>
		<section id="white-space">
<h3 title="White Space Collapsing">2.5. 空白の縮約-法</h3>

<p>
~ruby構造の中の空白のうち，次のいずれかに該当するものは、
<a href="#anon-gen-discard-space">破棄される</a>：
◎
White space within a ruby structure is discarded
</p>

<ul>
	<li>
［
`~ruby容器$ ／
`~ruby注釈~容器$【！`~ruby注釈$容器】 ／
`~ruby基底~容器$
］の先頭や末尾にあるもの。
◎
at the beginning and end of a ruby container, ruby annotation container, or ruby base container,
</li>
	<li>
`~ruby基底~容器$と, それに後続する`~ruby注釈~容器$との合間にあるもの。
◎
between a ruby base container and its following ruby annotation container,
</li>
	<li>
`~ruby注釈~容器$たちの各~合間にあるもの。
◎
between ruby annotation containers.
</li>
</ul>

<div class="example">
<p>
例えば，次の~markupは、間隔を伴わずに表示されることになる：
◎
For example, the following markup will display without any spaces:
</p>

`tokyo^xCode

</div>

<p>
しかしながら，［
`~ruby区分$たちの各~合間 ／
`~ruby基底$たちの各~合間 ／
`~ruby注釈$たちの各~合間
］では、空白は破棄されず，［
`区分~間 空白$ ／
`基底~間 空白$ ／
`注釈~間 空白$
］として描画するために保守される（<a href="#box-fixup">§ 匿名~ruby~boxの生成</a>を見よ）。
◎
Between ruby segments, between ruby bases, and between ruby annotations, however, white space is not discarded, and is maintained for rendering as inter-base, inter-annotation, or inter-segment white space. (See Anonymous Ruby Box Generation, above.)
</p>

<div class="example">

<p>
空白を保全する規則により、~Latinなどの~spaceで分離される用字系にも，~rubyを利用できるようになる。
例えば：
◎
The rules preserving white space allow ruby to be used with space-separated scripts such as Latin. For example,
</p>

`WWW^xCode

<p>
それはまた、注釈付き空白も保全されることを確保する。
例えば：
◎
They also ensure that annotated white space is preserved. For example,
</p>

`Gainsboro^xCode

</div>

<p>
破棄されない空白が`縮約-可能$になる所では、標準な`空白~処理~規則$ `CSS3TEXT$r に従って縮約することになる。
しかしながら，`~ruby区分$たちの合間にある`縮約-可能$な空白（`区分~間 空白$）用には、［
縮約するときの挙動を決定するための文脈的~text
］は，両~側にある`~ruby基底$により与えられる
— ~source文書~順序における空白の両~側にある~textではなく。
◎
Where undiscarded white space is collapsible, it will collapse following the standard white space processing rules. [CSS3TEXT] For collapsible white space between ruby segments (inter-segment white space), however, the contextual text for determining collapsing behavior is given by the ruby bases on either side, not the text on either side of the white space in source document order.
</p>

<div class="note">注記：

<p>
`空白~処理~規則$では、`区分~分断$（ `line feed^en など）を包含している空白~並びは，［
`漢字$, および`仮名$
］文字たちの合間では，
<a href="~CSSTEXT#line-break-transform">無に縮約される</a>。
これは、［
中国語／日本語
］~rubyでは、~ruby~markupの字下げに，空白を安全に利用できることを意味する。
例えば，次の~markupは、間隔を伴わずに表示されることになる：
◎
Note: The white space processing rules cause a white space sequence containing a segment break (such as a line feed) to collapse to nothing between Han and Kana characters. This means that Chinese and Japanese ruby can safely use white space for indentation of ruby markup. For example, the following markup will display without any spaces:
</p>

`nosmoke-1^xCode

<p>
しかしながら、`区分~分断$を包含しない空白は，完全には縮約しないので、次の~markupは，
1 個目と 2 個目の~ruby~pairの合間に間隔を伴って表示されることになる：
◎
However, white space that does not contain a segment break does not collapse completely away, so this markup will display with a space between the first and second ruby pairs:
</p>

`nosmoke-2^xCode

</div>

		</section>
	</section>
	<section id="ruby-layout">
<h2 title="Ruby Layout">3. ~ruby~layout</h2>

<p>
~ruby構造が~lay-outされるときは、それの`基底~level$は，［
それの`~ruby基底$たちが`行内~box$たちの定例の並びであった
］かのように、当の行l上に~lay-outされた上で，それの `vertical-align$p ~propに正確に則って整列される。
各`~ruby基底~容器$は、それの各`~ruby基底$の~margin~boxすべてを正確に包含するように，~sizeされ位置される。
`~ruby基底~容器$に`~flow内$にある内容が無い場合、
1 個の空な`~ruby基底$を包含していたかのように，~sizeされ位置される。
◎
When a ruby structure is laid out, its base level is laid out on the line, aligned according to its vertical-align property exactly as if its ruby bases were a regular sequence of inline boxes. Each ruby base container is sized and positioned to contain exactly all of its ruby bases’ margin boxes. If a ruby base container has no in-flow content, it is sized and positioned as if it contained a single empty ruby base.
</p>

<p>
次に、`基底~level$に結付けられている各`~ruby注釈$が，
適用-可能な `ruby-position$p 値に則って，それぞれの`~ruby基底~box$を基準に位置される。
ある~levelの中の（単独の`~ruby容器$の中の）
`~ruby注釈$たちは、［
それらが同じ`行内~整形~文脈$に関与している`行内~box$たちであった
］かのように，互いに整列される。
各`~ruby注釈~容器$は、各`~ruby注釈$の~margin~boxをすべてを正確に包含するように，~sizeされ位置される。
`~ruby基底~容器$に`~flow内$にある内容が無い場合、
1 個の空な`~ruby注釈$を包含していたかのように，~sizeされ位置される。
◎
Ruby annotations associated with the base level are then positioned with respect to their ruby base boxes according to the applicable ruby-position values. Ruby annotations within a level (within a single ruby container) are aligned to each other as if they were inline boxes participating in the same inline formatting context. Each ruby annotation container is sized and positioned to contain exactly all of its ruby annotations’ margin boxes. If a ruby annotation container has no in-flow content, it is sized and positioned as if it contained a single empty ruby annotation.
</p>

<p>
各`~ruby注釈~容器$は、対応する`~ruby基底~容器$の
上面／下面
から外方へ，介在する間隔を伴わずに堆積される。
◎
Ruby annotation containers are stacked outward over or under their corresponding ruby base container, without any intervening space.
</p>

<p class="issue">
塊-軸~marginは相殺する【！？】べきか？
これは，~layoutをより堅牢にするが、行内-軸~沿いにおける行内の挙動と一貫しなくなる。
◎
Should block-axis margins collapse? This makes layout more robust, but is inconsistent with how inlines behave along the inline-axis.
</p>

<p>
~ruby容器（または それの断片）は、それの最も幅広な~levelの内容と同じ幅広に測定される。
同様に，~ruby “~col” の中の［
`~ruby基底~box$／`~ruby注釈~box$
］たちは、その “~col” 内の最も幅広な内容に測定される。
複数の基底に`~span$している注釈に対しては（ `ruby-merge$p により，そのように~spanするように装っているものも含む）、それを成す`~ruby注釈~box$たちの測定結果を，そのそれぞれを結付けている`~ruby基底~box$たちの総和に合致させるモノトスル。
◎
A ruby container (or fragment thereof) measures as wide as the content of its widest level. Similarly, ruby base boxes and ruby annotation boxes within a ruby “column” have the measure of the widest content in that “column”. In the case of spanning annotations (whether actually spanning or pretending to span per ruby-merge), the measures of the ruby annotation box and the sum of its associated ruby base boxes must match.
</p>

<p>
~ruby内容がそれを成す~boxの測定結果より狭小なときに 余分の間隔を分布する方法は、
`ruby-align$p ~propが指定する。
◎
How the extra space is distributed when ruby content is narrower than the measure of its box is specified by the ruby-align property.
</p>

<p class="issue">
~ruby［
基底／注釈
］たちの~sizeは、~colか内容のどっちに合わせるべきか？
◎
Should the ruby bases and annotations size to the column, or size to the content?
</p>

		<section id="inter-character-layout">
<h3 title="Inter-character Ruby Layout">3.1. 文字~間~rubyの~layout</h3>

<p>
文字~間の注釈の~layoutは特別になる。
`ruby-position$p が `inter-character$v 注釈を指示する場合、影響される`~ruby注釈~box$たちは，継合され, `基底~level$の~layoutの一部として測定される。
当の`~ruby基底~容器$は、［
`~ruby基底~box$たち, および
`inter-character$v `~ruby注釈~box$たち
］の両者を含むように~sizeされるモノトスル。
同様に、影響される`~ruby注釈~容器$は，それの内容~boxが`~ruby基底~容器$のそれと一致するように~sizeされる。
◎
Inter-character annotations have special layout. When ruby-position indicates inter-character annotations, the affected ruby annotation boxes are spliced into and measured as part of the layout of the base level. The ruby base container must be sized to include both the ruby base boxes as well as the inter-character ruby annotation boxes. The affected ruby annotation container is similarly sized so that its content box coincides with that of the ruby base container.
</p>

<p>
他の~levelの注釈たちを~lay-outする目的においては、
`inter-character$v 注釈は、実質的に，それの基底の一部になる。
<span class="issue">
あるいは、 2 つの基底の合間にある “準” 基底になるべきか？
</span>
`inter-character$v 注釈は、それが`~span$しているどの基底よりも後に配置される。
◎
For the purpose of laying out other levels of annotations, an inter-character annotation effectively becomes part of its base. Or should it become a quasi-base between two bases? A spanning inter-character annotation is placed after all the bases that it spans.
</p>

		</section>
		<section id="box-style">
<h3 title="Styling Ruby Boxes">3.2. ~ruby~boxの~style法</h3>

<p>
［
`margin$p ／ `border$p ／ `padding$p
］~propは、`~ruby基底~容器$にも`~ruby注釈~容器$にも適用されない。
◎
The margin, border, and padding properties do not apply to ruby base container boxes nor to ruby annotation container boxes.
</p>

<p class="issue">
これらは、<a href="#nested-pairing">~ruby内部の~ruby容器~box</a>にも適用しないベキか？
適用する場合、何を意味する？
◎
Should they also not apply to ruby-internal ruby container boxes? If they do, what does that mean?
</p>

<p>
加えて，［
`~ruby基底~容器~box$ ／
`~ruby注釈~容器~box$ ／
<a href="#nested-pairing">~ruby内部の~ruby容器~box</a>
］上では、~UAは，次に挙げるものを~supportすることは要求されない
⇒＃
各種 背景~prop ／
各種 外形線~prop ／
~当の~boxの限界域が~~露わになるような他の任意の~prop
◎
Additionally, the UA is not required to support any of the background properties or outline properties, or any other property that illustrates the bounds of the box on ruby base container boxes, ruby annotation container boxes, or ruby-internal ruby container boxes.＼
</p>

<p>
~UAは、これらの~boxを，単純に その内容の~layoutに対する［
継承と制御
］用の抽象-化として実装してもヨイ。
◎
The UA may implement these boxes simply as abstractions for inheritance and control over the layout of their contents.
</p>

		</section>
		<section id="line-breaks">
<h3 title="Breaking Across Lines">3.3. 複数~行lへの分断-法</h3>

<p>
`~ruby容器$全体が 1 行lに収まり切らない, かつ
すべての~levelが同時に分断を許容している場合、~rubyは，分断されてもヨイ。
~rubyは，［
基底, 注釈
］が成す集合どうしの合間にて分断することが最も多いが、`~ruby基底$（および, それに結付けられ, それに並行する各`~ruby注釈~box$たち）の中でも，分断できる
— `行-分断ng規則$がそれを許容するならば。
◎
When there is not enough space for an entire ruby container to fit on the line, the ruby may be broken wherever all levels simultaneously allow a break. Ruby most often breaks between base-annotation sets, but if the line-breaking rules allow it, can also break within a ruby base (and, in parallel, its associated ruby annotation boxes).
</p>

<p>
~rubyが複数~行lに分断されるときは、各`~ruby注釈$は対応する`~ruby基底$たちと一緒であり続けるモノトスル。
行lは，`~ruby基底$とその`注釈$たちの合間では `分断されない^emモノトスル
— `inter-character$v `注釈$の事例においても。
◎
Whenever ruby breaks across lines, ruby annotations must stay with their respective ruby bases. The line must not break between a ruby base and its annotations, even in the case of inter-character annotations.
</p>

<figure><div title="注音符号~rubyにおける行l分断ng機会を示す図式">

<div style="padding: 2em 0;">
<div id="_dgm-r-break-b">
	<div style="color:blue; width:3em; text-align:center;">~ruby
基底</div>
	<div style="color:red; width:1.5em; position:relative;">
		<div style="position:absolute; top:-2em; left:0; white-space:nowrap;">~ruby~text（基底の右）</div>
		<div style="position:absolute; top:-1em; left:0;">↓</div>
	</div>
<div style="width:0; border:none; color:gray;">
	<div style="position:absolute; top:0; width:0; height:4em; border:dashed currentcolor 0.1em;"></div>
	<div style="position:absolute; width:16em; left:-8em; bottom:-2.5em; text-align:center;">行l分断ng機会</div>
</div>
<div style="color:blue; width:3em; text-align:center;">~ruby
基底</div>
	<div style="color:red; width:1.5em; position:relative;">
		<div style="position:absolute; top:-1em; left:0;">↓</div>
	</div>
</div>

</div>
◎
alt=
Diagram showing the line breaking opportunity in a "Bopomofo" ruby
</div><figcaption>
`inter-character$v ~rubyにおける行l分断ng機会
◎
inter-character ruby line breaking opportunity
</figcaption></figure>

			<section id="break-between">
<h4 title="Breaking Between Bases">3.3.1. 基底~間の分断-法</h4>

<p>
代表的な事例では、［
`~ruby基底~box$／`~ruby注釈~box$
］には，内部の行l折返ngを禁止するように~styleがアテガわれ、強制d分断は包含しない（
<a href="#default-stylesheet">付録 A</a>
を見よ）。
そのような事例では、`~ruby容器$を分断できる所は、隣接な`~ruby基底$どうしの合間であって，かつ それら複数の`~ruby基底$に`~span$している`~ruby注釈$も無いときに限られる。
◎
In typical cases, ruby base boxes and ruby annotation boxes are styled to forbid internal line wrapping and do not contain forced breaks. (See Appendix A.) In such cases the ruby container can only break between adjacent ruby bases, and only if no ruby annotations span those ruby bases.
</p>

<figure><div title="複階的な~rubyにおける行l分断ng機会を示す図式">
<div
	id="_dgm-r-break-a"
	style="padding: 2em 0;"
>
	<div style="color:green;">~group~ruby↓</div>
	<div style="border:thin solid green; padding:0.2em; display:inline-block;">
<table><tbody>
<tr><td><span>~ruby~text（上面）</span>

<td rowspan="5" style="padding:0;"><div style="position:relative; top:-0.5em; width:0.2em; color:gray;">&nbsp;
<div style="position:absolute; top:0; height:10em; border:dashed currentcolor 0.1em;"
><div style="position:absolute; left:-8em; bottom:-1em; width:16em; text-align:center;"
>行l分断ng機会</div></div>
</div>

<td><span>~ruby~text</span>
<tr><td><td>
<tr style="color:blue;"><td><span>~ruby基底</span><td><span>~ruby基底</span>
<tr><td><td>
<tr><td><span>~ruby~text（下面）</span><td><span>~ruby~text</span>
</tbody></table>
	</div>
</div>

◎
alt=
Diagram showing the line breaking opportunity in a complex ruby
</div><figcaption>
~rubyにおける行l分断ng機会
◎
Ruby line breaking opportunity
</figcaption></figure>

<p>
隣接な 2 つの`~ruby基底$の合間で ~rubyを分断できるかどうかは、基底~text用の通常の`行-分断ng規則$により
— 正確に［
当の`~ruby基底$たちが隣接な`行内~box$たちであった
］かのように —
制御される。
（注釈たちは、`基底~level$用の自動折返し機会を決定するときには無視される。）
◎
Whether ruby can break between two adjacent ruby bases is controlled by normal line-breaking rules for the base text, exactly as if the ruby bases were adjacent inline boxes. (The annotations are ignored when determining soft wrap opportunities for the base level.)
</p>

<div class="example">

<p>
例えば、隣接な~ruby基底が［
“蝴”, “蝶”
］であったなら、行lは，それらの合間で分断されてもヨイ
,
—  2 個の`漢字$文字の合間では，通常は行lを分断することが許容されるので。
しかしながら， `word-break$p が `keep-all$v である場合、その行l分断は禁止される。
◎
For example, if two adjacent ruby bases are “蝴” and “蝶”, the line may break between them, because lines are normally allowed to break between two Han characters. However, if word-break is keep-all, that line break is forbidden.
</p>

`kocho^xCode

</div>

<p>
`基底~間 空白$は、`~ruby基底$たちの各~合間にある行l分断~機会を評価するときには 有意になり，行l分断がそこにあるときには縮約される
— 行内たちの各~合間にある空白と同じく。
同様に、`注釈~間 空白$も行l分断の所で削られる。
◎
Inter-base white space is significant for evaluating line break opportunities between ruby bases. As with white space between inlines, it collapses when the line breaks there. Similarly, annotation white space is also trimmed at a line break.
</p>

<div class="example">
<p>
例えば、次の~markupが与えられたとき：
◎
For example, given the following markup:
</p>

`onetwo^xCode

<p>
~spaceに因り，行lは［
“one”, “two“
］の合間で分断されてもヨイ。

行l分断がそこにある場合、その~space, および “1”, “2” の合間にある~spaceは、標準な~CSS`空白~処理~規則$に則って消去る。
`CSS3TEXT$r
◎
Due to the space, the line may break between “one” and “two“. If the line breaks there, that space—and the space between “1” and “2”—disappears, in accordance with standard CSS white space processing rules. [CSS3TEXT]
</p>

</div>

			</section>
			<section id="break-within">
<h4 title="Breaking Within Bases">3.3.2. 基底たちの中での分断-法</h4>

<p>
より長い基底~text用には、 ( 基底, 注釈 ) ~pairの中でも分断ngを許容した方が，適切になることもある。
例えば，英文を日本語~翻訳で注釈する場合、~textを折返すのを許容した方が，段落における行l分断-法は適度に挙動するようになる。
◎
For longer base texts, it is sometimes appropriate to allow breaking within a base-annotation pair. For example, if an English sentence is annotated with its Japanese translation, allowing the text to wrap allows for reasonable line breaking behavior in the paragraph.
</p>

<p class="issue">
読者が これを単なる仕様~策定者の世迷言と考えないよう，~~具体的な例を挿入する。
◎
Insert scanned example so people don’t think this is just the ramblings of an insane spec-writer.
</p>

<p>
`~ruby基底$の中で`行-分断ng$が許容されるのは、［
`~ruby基底$, および それに並行する どの`注釈$の `white-space$p ~propも，それを許容する
］, かつ各［
基底~box／注釈~box
］の内容`の中^em（すなわち，始端でも終端でもない）に`自動折返し機会$が存在する場合に限られる。
`~ruby基底$の内容を成す各~断片と`注釈$のそれらとの間には，構造上の対応関係はないので、~UAは，［
基底の中, 注釈の中
］の機会たちの どの~~組み合わせで分断してもヨイが、各~断片における［
基底の内容, 注釈の内容
］が成す分量比が互いに近くなるよう試みることが推奨される。
◎
Line-breaking within a ruby base is only allowed if the white-space property of the ruby base and all its parallel annotations allow it, and there exists a soft wrap opportunity within (i.e. not at the start or end) the content of each base/annotation box. Since there is no structural correspondence between fragments of content within ruby bases and annotations, the UA may break at any set of opportunities; but it is recommended that the UA attempt to proportionally balance the amount of content inside each fragment.
</p>

<p>
`inter-character$v `注釈$の中には、行l分断ng機会はない。
◎
There are no line breaking opportunities within inter-character annotations.
</p>

<p>
各~断片の中における~ruby整列は、`行-分断ng$より後になる。
◎
Ruby alignment takes place within each fragment, after line-breaking.
</p>

			</section>
		</section>
		<section id="bidi">
<h3 title="Bidi Reordering">3.4. 双向~並替ng</h3>

<p>
単独の段落の中で，方向性が互いに反対向きの 用字系に属する文字が混在する場合、
~Unicode双方向-~algoにより，論理的に格納された~textは 視覚的な呈示~用に並替えられる。
◎
The Unicode bidirectional algorithm reorders logically-stored text for visual presentation when characters from scripts of opposing directionalities are mixed within a single paragraph.
</p>

<p>
`~ruby注釈$と対応する`~ruby基底$との対応関係を保全するため、次の制約が課される：
◎
To preserve the correspondance of ruby annotations to their respective ruby bases, a few restrictions must be imposed:
</p>

<ul>
	<li>
［
`~ruby基底$／`~ruby注釈$
］の内容の連続性は、保たれるモノトスル。
◎
The contents of a ruby base or ruby annotation must remain contiguous.
</li>

	<li>
`~ruby基底$と，対応する`~ruby注釈$たちとは、一緒に並替えられるモノトスル。
◎
Ruby annotations must be reordered together with their ruby bases.
</li>

	<li>
`~ruby注釈$が`~span$している`~ruby基底$たちの連続性は、保たれるモノトスル。
◎
All ruby bases spanned by a single ruby annotation must remain contiguous.
</li>
</ul>

<p>
その結果：
◎
To this end,
</p>

<ul>

	<li>
<p>
双向~隔離は、［
すべての`内部~ruby~box$と, 
`~ruby容器$
］に対し，強制される
— すなわち， `unicode-bidi$p の算出d値は、指定d値に応じて，次のようになる
⇒＃
`normal$v ならば `isolate$v ／
`embed$v ならば `isolate^v ／
`bidi-override$v ならば `isolate-override$v
◎
Bidi isolation is forced on all internal ruby boxes and the ruby container: the normal and embed values of unicode-bidi compute to isolate, and bidi-override computes to isolate-override.
</p>

<p class="note">注記：
このことは、［
暗黙的な双向~並替ngが，~ruby基底たちをまたがって働く
］ことはないことを意味する。
よって，作者は、［
`~ruby容器$に宣言される方向性は，その内容に~~実際に合致する
］ことを確保する必要がある。
◎
Note: This means that implicit bidi reordering does not work across ruby bases, so authors will need to ensure that the ruby container’s declared directionality does indeed match its contents.
</p>
	</li>
	<li>
~layoutの間，同じ`~ruby容器$の中にある`~ruby区分$たちは、`~ruby容器$の `direction$p ~propにより順序付けられる。
◎
During layout, ruby segments are ordered within the ruby container by the direction property of their ruby container.
</li>
	<li>
<p>
同じ区分の中の［
`~ruby基底$／`~ruby注釈$
］たちは、その区分の`~ruby基底~容器$の `direction$p ~propにより，対応する容器の中で順序付けられる。
◎
Within a segment, ruby bases and ruby annotations are ordered within their respective containers by the direction property of the segment’s ruby base container.
</p>

<p class="note">注記：
このことは、`~ruby注釈~容器$の `direction$p ~propは，~layoutの目的においては無視されることを意味する。
しかしながら，容器の子へは依然として継承できる
— その結果，それが包含するどの`~ruby注釈$の`行内~基底~方向$にも影響する。
◎
Note: This means the direction property on ruby annotation containers is ignored for the purpose of layout. However, it can still inherit into the container’s children and thereby affect the inline base direction of any ruby annotations it contains.
</p>
	</li>
</ul>

<p>
他の`行内~level$の内容と同じく、`内部~ruby~box$たちの双向~並替ngは、`行-分断ng$の後に起こる
— 内容が複数~行lに分割されるときには、自身の論理-順序に則るようにするため。
◎
As with other inline-level content, the bidi reordering of internal ruby boxes happens after line-breaking so that content is divided across lines according to its logical order.
</p>

<p>
~CSSにおける双方向-~textについての より深い論は
`CSS3-WRITING-MODES$r を見よ。
◎
See [CSS3-WRITING-MODES] for a more in-depth discussion of bidirectional text in CSS.
</p>

		</section>
		<section id="line-height">
<h3 title="Line Spacing">3.5. 行l間の間隔法</h3>

<p>
~CSSでは、 `line-height$p ~propが，各~行lの合間の間隔法を制御する。
ある行l上の行内~内容が `line-height$p より短いときは、
<a href="~CSS2VISUDET#line-height">CSS2.1 § 10.8</a>
に指定されるように，内容の両~側に半-行間が追加される。
`CSS2$r
◎
The line-height property controls spacing between lines in CSS. When inline content on line is shorter than the line-height, half-leading is added on either side of the content, as specified in CSS2.1§10.8. [CSS2]
</p>

<p>
各 行l間の間隔法が一貫することを確保するため、~rubyを伴う文書における
`line-height$p は、概して，~textの各~行lの合間に置かれる~rubyを収容するに十分な大きさが確保されるようにされる。
したがって，普通は、［
`~ruby注釈~容器$／`~ruby注釈~box$
］は，行lの行内~内容に測定される縦幅には寄与しない
— どの［
整列（ `vertical-align$p を見よ） ／ 行高~計算
］も、それが正確に通常の行内であったかのように，`~ruby基底~容器$のみを利用して遂行される。
◎
In order to ensure consistent spacing of lines, documents with ruby typically ensure that the line-height is large enough to accommodate ruby between lines of text. Therefore, ordinarily, ruby annotation containers and ruby annotation boxes do not contribute to the measured height of a line’s inline contents; any alignment (see vertical-align) and line-height calculations are performed using only the ruby base container, exactly as if it were a normal inline.
</p>

<p>
しかしながら，`~ruby容器$に指定された `line-height$p が、［
上端にある`~ruby注釈~容器$の上端から，下端にある`~ruby注釈~容器$の下端
］までの距離に満たない場合、［［
塊が 3 個の行lからなっていて, その各~行lが これと一致する~rubyを包含している
］場合にも，互いの`~ruby容器$は重合しない
］ように，`~ruby基底~容器$の適切な側（たち）に行間が追加される。
◎
However, if the line-height specified on the ruby container is less than the distance between the top of the top ruby annotation container and the bottom of the bottom ruby annotation container, then additional leading is added on the appropriate side(s) of the ruby base container such that if a block consisted of three lines each containing ruby identical to this, none of the ruby containers would overlap.
</p>

<p class="note">注記：
これは、`~ruby注釈$たちが`行l~box$の中に保たれることは確保しない。
これは単に、
`各 行l間の間隔法がすべて等しい^em, かつ
`~ruby注釈$たちの量と位置決めも互いに等価な場合に，重合するのを避けるに十分な部屋を確保するに過ぎない。
◎
Note: This does not ensure that the ruby annotations remain within the line box. It merely ensures that if all lines had equal spacing and equivalent amounts and positioning of ruby annotations, there would be enough room to avoid overlap.
</p>

<p>
作者は、~rubyを収容するに適切な［
`line-height$p ／ `padding$p
］を確保するべきである。
また、特に，塊の［
先頭／末尾
］の所, および
行lが［
段落の既定の~font~sizeより高い`行内~level$の内容（画像, `行内~塊$, `vertical-align$p でズラされた要素たち，など）
］を包含するときに，注意深くなるべきである。
◎
Authors should ensure appropriate line-height and padding to accommodate ruby, and be particularly careful at the beginning or end of a block and when a line contains inline-level content (such as images, inline blocks, or elements shifted with vertical-align) taller than the paragraph’s default font size.
</p>

<figure><div title="各~行lの内容は，その行l高さの~~中段に居座る。上下各~側にある追加的な間隔は半行間（ half-leading ）と呼ばれる。~rubyは半行間の 2 倍~以下ならば，行lと行lの合間に収まるが、それは，~rubyが前の行lに所属する半行間も占めることを意味する。">
<div
	id="_dgm-rlh-a"
	style="width:8em; font-size: 1.6em; text-align:center; line-height:1.2"
>
	<div style="border:0.05em dotted blue; padding:0.4em 0;">
<div style="border:0.1em solid gray;">前の行l</div>
	</div>
	<div style="border:0.05em dotted blue; padding:0.4em 0; position:relative;">
<div style="position:absolute; top:-0.7em; width:100%;"><span style="font-size:0.5em; color:red; border:0.2em solid gray;">~ruby~text</span></div>
<div style="border:0.1em solid gray;">~ruby基底</div>
	</div>
</div>

◎
alt=
The content of each line sits in the middle of its line height; the additional space on each side is called half-leading. Ruby fits between lines if it is smaller than twice the half-leading, but this means that it occupies space belonging to the half-leading of the previous line.
</div><figcaption>
~ruby注釈たちは、行lを~overflowすることが多い
— 作者は、~ruby注釈付き行lの［
上面／下面
］にある内容の間隔を必要十分にとって，~ruby用の部屋を残すことを確保するべきである。
◎
Ruby annotations will often overflow the line; authors should ensure content over/under a ruby-annotated line is adequately spaced to leave room for the ruby.
</figcaption></figure>

<p class="note">注記：
~rubyが［
整列／行l~layout
］にどう影響するかについての更なる制御は、
`CSS Line Layout Module Level 3^cite 【 `CSS-INLINE-3$r ？】
の一部になる。
それは現在，書き直しの過程にあり、現在の草案には依拠するべきでない。
◎
Note: More control over how ruby affects alignment and line layout will be part of the CSS Line Layout Module Level 3. Note, it is currently in the process of being rewritten; the current drafts should not be relied upon.
</p>

		</section>
	</section>
	<section id="ruby-props">
<h2 title="Ruby Formatting Properties">4. 各種~ruby整形~prop</h2>

<p>
~rubyの
<a href="#rubypos">位置決め</a>,
<a href="#collapsed-ruby">~text分布</a>,
<a href="#rubyalign">整列</a>
を制御するため、以下の各種~propが導入される。
◎
The following properties are introduced to control ruby positioning, text distribution, and alignment.
</p>

		<section id="rubypos">
<h3 title="Ruby Positioning: the ruby-position property">4.1. ~rubyの位置決め： `ruby-position^p ~prop</h3>

◎名 `ruby-position@p
◎値 `over$v | `under$v | `inter-character$v
◎初 `over$v
◎適 ~ruby注釈~容器
◎継 される
◎百 受容しない
◎算 指定された~keyword
◎順 文法に従う
◎ア 離散的
◎表終

<p>
この~propは、~ruby~textの 基底から~~相対的な位置を制御する。
各種 値の意味は：
◎
This property controls position of the ruby text with respect to its base. Values have the following meanings:
</p>

<p class="issue">
`Roland Steiner^en 氏から，既定の値として `auto^v を加えることが要請されている。
<!-- 
<a href="https://lists.w3.org/Archives/Public/www-style/2009May/0194.html"></a>
<a href="https://lists.w3.org/Archives/Public/www-style/2009May/0189.html"></a>
<a href="https://lists.w3.org/Archives/Public/public-i18n-core/2009AprJun/0064.html"></a>
-->
`<a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=ruby-position%3A+undesirable+default+value+%27before%27+for+complex+ruby&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;period_month=&amp;period_year=&amp;index-grp=Public__FULL&amp;index-type=t&amp;type-index=www-style&amp;resultsperpage=20&amp;sortby=date">this thread</a>, <a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=Styling+of+complex+Ruby&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;period_month=&amp;period_year=&amp;index-grp=Public__FULL&amp;index-type=t&amp;type-index=public-i18n-core&amp;resultsperpage=20&amp;sortby=date">this one</a>^en
を見よ。
現在の提案は、省略可能な `alternate^v? ~keywordを追加する。
◎
Issue-107: Roland Steiner has requested the addition of an auto value as default. See this thread and this one. Current proposal is to add an optional alternate? keyword.
</p>

<dl>

	<dt>`over@v</dt>
	<dd>
~ruby~textは、基底の`行-上面$に現れる。
◎
The ruby text appears line-over the base.
</dd>
	<dd>
<figure><div title="横書き~modeにおける基底の上に現れる~ruby~glyph~layoutの図式">
`shinkansen-top^dgm
◎
alt=
Diagram of ruby glyph layout in horizontal mode with ruby text appearing above the base
</div><figcaption>
横書き~layoutにおける日本語~基底~textの上面にある~ruby
◎
Ruby over Japanese base text in horizontal layout
</figcaption></figure>
</dd>
	<dd>
<figure><div title="縦書き~modeにおける基底の右に縦に現れる~ruby~glyph~layoutの図式">
`shinkansen-right^dgm
◎
alt=
Diagram of ruby glyph layout in vertical mode with ruby text appearing vertically on the right of the base
</div><figcaption>
縦書き~layoutにおける日本語~基底~textの上面（すなわち右端）にある~ruby
◎
Ruby to the right of Japanese base text in vertical layout
</figcaption></figure>
</dd>

	<dt>`under@v</dt>
	<dd>
~ruby~textは、基底の`行-下面$に現れる。
表語的 東Asian書記体系で利用されるのは 相対的に稀な設定であり、教育用~textに最も見出され易い。
◎
The ruby text appears line-under the base. This is a relatively rare setting used in ideographic East Asian writing systems, most easily found in educational text.
</dd>
	<dd>
<figure><div title="横書き~modeにおける基底の下に現れる~ruby~glyph~layoutの図式">
`shinkansen-bottom^dgm
◎
alt=
Diagram of ruby glyph layout in horizontal mode with ruby text appearing below the base
</div><figcaption>
横書き~layoutにおける日本語~基底~textの下面にある~ruby
◎
Ruby under Japanese base text in horizontal layout
</figcaption></figure>
</dd>
	<dd>
<figure><div title="縦書き~modeにおける基底の左に縦に現れる~ruby~glyph~layoutの図式">
`shinkansen-left^dgm
◎
alt=
Diagram of ruby glyph layout in vertical mode with ruby text appearing vertically on the left of the base
</div><figcaption>
縦書き~layoutにおける日本語~基底~textの下面（すなわち左端）にある~ruby
◎
Ruby to the left of Japanese base text in vertical layout
</figcaption></figure>
</dd>

	<dt>`inter-character@v</dt>
	<dd>
~ruby~textは、横書き~textにおいては基底の右端に現れる。
この値は、`~ruby注釈~容器$の `writing-mode$p の算出d値を `vertical-rl$v に強制する。
◎
The ruby text appears on the right of the base in horizontal text. This value forces the computed value of writing-mode of the ruby annotation container to be vertical-rl.
</dd>
	<dd>
この値は、とりわけ台湾で利用されている，繁体字~中国語の特別な事例~用に供されている：
その文脈においては
— 基底~文字の~layoutが横書きのときでも —
（`注音符号$用の~glyphたちからなる）~rubyは，基底~glyphの右端~側に沿って縦方向に現れる：
◎
This value is provided for the special case of traditional Chinese as used especially in Taiwan: ruby (made of bopomofo glyphs) in that context appears vertically along the right side of the base glyph, even when the layout of the base characters is horizontal:
</dd>
	<dd>
<figure><div title="台湾式~rubyの例">
`bopomofo^dgm
◎
alt=
Example of Taiwanese-style ruby
</div><figcaption>
横書き~layoutにおける，繁体字~中国語における “注音符号” ~ruby~text（青色）
【~ruby~textの右端に在るのは声調~符】
◎
“Bopomofo” ruby in traditional Chinese (ruby text shown in blue for clarity) in horizontal layout
</figcaption></figure>
</dd>

</dl>

<p>
複数の`~ruby注釈~容器$が同じ `ruby-position$p になる場合、それらは，`~level$がより低い注釈ほど 基底~textに近くなるように，塊~軸~沿いに堆積される。
◎
If multiple ruby annotation containers have the same ruby-position, they stack along the block axis, with lower levels of annotation closer to the base text.
</p>

		</section>
		<section id="collapsed-ruby">
<h3 title="Sharing Annotation Space: the ruby-merge property">4.2. 注釈~間隔の共有-法： `ruby-merge^p ~prop</h3>

◎名 `ruby-merge@p
◎値 `separate$v | `merge$v | `auto$v
◎初 `separate$v
◎適 `~ruby注釈~容器$
◎継 される
◎百 受容しない
◎算 指定された~keyword
◎順 文法に従う
◎ア 算出d値の型による
◎表終

<div class="p">
<p>
この~propは、~ruby容器~box内に~ruby注釈~boxが 1 つ以上あるときに，注釈は 次のどれに従って描画されるべきかを制御する：
</p>

<ul>
	<li>
~pairどうしの分離を保つ（ `separate^v する）
</li>
	<li>
ひとまとめに
`注釈を併合する@
（ `merge^v する）
</li>
	<li>
分離を保つかどうかを，可用な空間に基づいて決定する（ `auto^v ）
</li>
</ul>
◎
This property controls how ruby annotation boxes should be rendered when there are more than one in a ruby container box: whether each pair should be kept separate, the annotations should be merged and rendered as a group, or the separation should be determined based on the space available.
</div>

<p>
各種 値の意味は：
◎
Possible values:
</p>

<dl>
	<dt>`separate@v</dt>
	<dd>
各~ruby注釈~boxは、それが`~span$する基底~box（たち）と同じ~col（たち）内に描画される。
この~styleは、 `JLREQ$r では “~mono~ruby” と呼ばれている。
<!-- モノルビ -->
◎
Each ruby annotation box is rendered in the same column(s) as its corresponding base box(es). This style is called “mono ruby” in [JLREQ].
</dd>
	<dd class="example">
<p>
例えば、次の 2 つの~markupを描画した結果は，同じになる：
◎
For example, the following two markups render the same:
</p>

`mujo-separate-1^xCode

<p>
◎
and:
</p>

`mujo-separate-2^xCode

	</dd>

	<dt>`merge@v</dt>
	<dd>
同じ行l上の同じ`~ruby区分$の中の
すべての`~ruby注釈~box$は、連結され，それらの内容は［［
それぞれが`~span$する`~ruby基底~box$たちすべて
］に`~span$する，単独の`~ruby注釈~box$
］に所属していたかのように~lay-outされる。
この~styleによる描画は、
`JLREQ$r による “~group~ruby” に類似する
— ただし，複数~行lに分断されるときは、各`~ruby注釈$は，対応する`~ruby基底$と一緒に保たれる。
◎
All ruby annotation boxes within the same ruby segment on the same line are concatenated, and laid out as if their contents belonged to a single ruby annotation box spanning all their associated ruby base boxes. This style renders similar to “group ruby” in [JLREQ], except that ruby annotations are kept together with their respective ruby bases when breaking lines.
</dd>
	<dd class="example">
<p>
次の 2 つの~markupの描画は、両者とも文字~並びは 1 行lに収まるならば，同じになる：
◎
The following two markups render the same both characters fit on one line:
</p>

`mujo-collapse-1^xCode

<p>
◎
and:
</p>

`mujo-collapse-2^xCode

<p>
しかしながら，後者は、 2 つの基底が複数~行lに分割されるときには，
`separate$v のときと同じに描画される。
◎
However, the second one renders the same as ruby-position: separate when the two bases are split across lines.
</p>
	</dd>

	<dt>`auto@v</dt>
	<dd>
<p >
~UAは、各~ruby注釈~boxが，対応する基底~boxに描画される方法を決定する際には、次が満たされる限り，どのような~algoを利用してもヨイ：
<!-- with the intention that -->
</p>

<ul ><li>すべての注釈が，それらに対応する基底の上面に収まる場合の結果は、
“~mono~ruby” と一致する。
</li><li>ある注釈が それが~spanする基底より幅広になる場合には、それらの基底と隣接な基底との
合間に間隔が課されないよう，何らかの仕方で空間が共有される。
</li></ul>

◎
The user agent may use any algorithm to determine how each ruby annotation box is rendered to its corresponding base box, with the intention that if all annotations fit over their respective bases, the result is identical to “mono ruby”, but if some annotations are wider than their bases the space is shared in some way to avoid imposing space between bases.
</dd>
	<dd class="example">
<p>
アリな~algoとして、次が挙げられる：
</p>
<ul>
	<li>
`JLREQ$r にて “熟語~ruby” として述べられているもの。
</li>
	<li>
“熟語~ruby” をより単純~化した別の~algoとして、
各~ruby注釈~boxが対応する基底~boxの送幅に収まる場合には， `separate$v として描画し、いずれかが収まらない場合は `merge$v として描画する。
</li>
</ul>

◎
One possible algorithm is described as “jukugo ruby” in [JLREQ].
◎
Another, more simplified algorithm of “jukugo ruby” is to render as separate if all ruby annotation boxes fit within the advances of their corresponding base boxes, and render as merge otherwise.
</dd>

</dl>

		</section>
		<section id="ruby-align-property">
<h3 title="Ruby Text Distribution: the ruby-align property">4.3. ~ruby~text 分布： `ruby-align^p ~prop</h3>
<span id="rubyalign"></span>

◎名 `ruby-align@p
◎値 `start$v | `center$v | `space-between$v | `space-around$v
◎初 `space-around$v
◎適 `~ruby基底$, `~ruby注釈$, `~ruby基底~容器$, `~ruby注釈~容器$
◎継 される
◎百 受容しない
◎算 指定された~keyword
◎順 文法に従う
◎ア 算出d値の型による
◎表終

<p>
この~propは、種々の~ruby~boxの中で，その内容が対応する~boxを正確に埋めないときに，~textが分布される方法を指定する。
`ruby-align$p により分布される間隔は、両端揃えに因り分布される間隔とは無関係であり，独立になることに注意。
◎
This property specifies how text is distributed within the various ruby boxes when their contents do not exactly fill their respective boxes. Note that space distributed by ruby-align is unrelated to, and independent of, any space distributed due to justification.
</p>

<p>
各種 値の意味は：
◎
Values have the following meanings:
</p>

<dl>

	<dt>`start@v</dt>
	<dd>
~ruby内容は、~boxの始端~辺に整列される。
◎
The ruby content is aligned with the start edge of its box.
</dd>
	<dd>
<figure><div
	title="~rubyにおける~glyph~layoutの図式：注釈と基底の~~長さが揃わないときに，短い方が左端に整列される様子を示す"
>
<x-box
	id="_dgm-ra-l"
>
<x-rt>`四^xF`五^xF`六^xF`七^xF`4^xP</x-rt>
<x-rb>`一^xF`二^xF`三^xF</x-rb>
</x-box>

<x-box
	id="_dgm-ra-r"
><x-rt>`三^xF`四^xF`五^xF`六^xF`七^xF`八^xF</x-rt>
<x-rb>`一^xF`二^xF`2^xP</x-rb>
</x-box>

◎
alt=
Diagram of glyph layout in left aligned ruby when ruby text is shorter than base／Diagram of glyph layout in left aligned ruby when ruby text is longer than base
</div><figcaption>
`start$v による~rubyの分布
◎
start ruby distribution
</figcaption></figure>
	</dd>

	<dt>`center@v</dt>
	<dd>
~ruby内容は、~boxの中で中央寄せにされる。
◎
The ruby content is centered within its box.
</dd>
	<dd>
<figure><div
	title="~rubyにおける~glyph~layoutの図式：注釈と基底の~~長さが揃わないときに，短い方が中央寄せにされる様子を示す"
>
<x-box
	id="_dgm-ra-c"
>
<x-rt>`四^xF`五^xF`六^xF`七^xF</x-rt>
<x-rb>`一^xF`二^xF`三^xF</x-rb>
</x-box>

<x-box
	id="_dgm-ra-c-rb"
>
<x-rt>`三^xF`四^xF`五^xF`六^xF`七^xF`八^xF</x-rt>
<x-rb>`一^xF`二^xF</x-rb>
</x-box>

◎
alt=
Diagram of glyph layout in center aligned ruby when ruby text is shorter than base／Diagram of glyph layout in center aligned ruby when ruby text is longer than base
</div><figcaption>
`center$v による~rubyの分布
◎
center ruby distribution
</figcaption></figure>
	</dd>

	<dt>`space-between@v</dt>
	<dd>
~ruby内容は（ `text-justify$p により定義される）通常の~text両端揃えに対するときと同じように拡がる
— ただし，`両端揃え機会$が無い場合、内容は中央寄せにされる。
◎
The ruby content expands as defined for normal text justification (as defined by text-justify), except that if there are no justification opportunities the content is centered.
</dd>
	<dd>
<figure><div
	title="~rubyにおける~glyph~layoutの図式：注釈と基底の~~長さが揃わないときに，短い方を成す字lたちが分布するように整列される様子を示す"
>
<x-box
	id="_dgm-ra-dl"
>
<x-rt>`四^xF`1.33^xP`五^xF`1.33^xP`六^xF`1.33^xP`七^xF</x-rt>
<x-rb>`一^xF`二^xF`三^xF</x-rb>
</x-box>

<x-box
	id="_dgm-ra-dl-rb"
>
<x-rt>`三^xF`四^xF`五^xF`六^xF`七^xF`八^xF</x-rt>
<x-rb>`一^xF`2^xP`二^xF</x-rb>
</x-box>
◎
alt=
Diagram of glyph layout in distribute-letter aligned ruby when ruby text is shorter than base／Diagram of glyph layout in distribute-letter aligned ruby when ruby text is longer than base
</div><figcaption>
`space-between$v による~ruby分布
◎
space-between ruby distribution
</figcaption></figure>
	</dd>

	<dt>`space-around@v</dt>
	<dd>
`両端揃え機会$が余分に存在する場合には，間隔のうち半分は~ruby内容の前, 半分は後に分布されることを除いて、
`space-between$v のときと同じになる。
◎
As for space-between except that there exists an extra justification opportunities whose space is distributed half before and half after the ruby content.
</dd>
	<dd class="example">
<p>
典型的な実装は、既定では，`両端揃え機会$を［
隣接な~CJK`文字$たちの各~合間には定義し, 隣接な~Latin`文字$たちの各~合間には定義しない
］ので、これによる結果は `JLREQ$r に推奨される挙動になるべきである：
◎
Since a typical implementation will by default define justification opportunities between every adjacent pair of CJK characters and not between adjacent pairs of Latin characters, this should result in the behavior recommended by [JLREQ]:
</p>

<ul>
	<li>
<p>
全角~ruby内容に対しては，次のように分布される：
◎
 for wide-cell ruby content to be distributed...
</p>

<figure><div
	title="~rubyにおける~glyph~layoutの図式：注釈と基底の長さが揃わない, かつ短い方が~~全角のときに，短い方が自動的に整列される様子を示す"
>
<x-box
	id="_dgm-ra-ds"
>
<x-rt>`四^xF`1^xP`五^xF`1^xP`六^xF`1^xP`七^xF</x-rt>
<x-rb>`一^xF`二^xF`三^xF</x-rb>
</x-box>

<x-box
	id="_dgm-ra-ds-rb"
>
<x-rt>`三^xF`四^xF`五^xF`六^xF`七^xF`八^xF</x-rt>
<x-rb>`一^xF`1^xP`二^xF</x-rb>
</x-box>

◎
alt=
Diagram of glyph layout in auto aligned ruby when ruby text is shorter than base／Diagram of glyph layout in auto aligned ruby when ruby text is longer than base
</div><figcaption>
`space-around$v による~ruby分布では、全角~textには，間隔が置かれる
◎
Wide-cell text in space-around ruby distribution is spaced apart
</figcaption></figure>

			</li>
			<li>
<p>
一方で、半角~glyph~rubyは中央寄せにされるように：
◎
... and narrow-cell glyph ruby to be centered.
</p>

<figure><div
	title="~rubyにおける~glyph~layoutの図式：注釈と基底の長さが揃わない, かつ短い方が~~半角のときに，短い方が自動的に整列される様子を示す"
>
<x-box
	id="_dgm-ra-dc-h"
>
<x-rt>`4^xH`5^xH`6^xH`7^xH</x-rt>
<x-rb>`一^xF`二^xF`三^xF</x-rb>
</x-box>

<x-box
	id="_dgm-ra-dc-rb-h"
>
<x-rt>`四^xF`五^xF`六^xF`七^xF`八^xF`九^xF</x-rt>
<x-rb>`1^xH`2^xH`3^xH</x-rb>
</x-box>

◎
alt=
Diagram of glyph layout in auto aligned ruby when halfwidth ruby text is shorter than base／Diagram of character layout in auto aligned ruby when ruby text is longer than narrow-width base
</div><figcaption>
`space-around$v による~ruby分布における半角幅~ruby~textは中央寄せにされる。
◎
Narrow-width ruby text in space-around ruby distribution is centered
</figcaption></figure>

			</li>
		</ul>
	</dd>
</dl>

<p class="issue">
複数の基底に`~span$している注釈が伴われる状況で，間隔を分布する方法を説明する段落を追加する。
◎
Add a paragraph explaining how to distribute space in situations with spanning annotations.
</p>

		</section>
		<section id="ruby-text-decoration">
<h3 title="Ruby Text Decoration">4.4. ~ruby~text装飾</h3>

<p>
~text装飾は、基底~textから各 注釈へは伝播しない。
◎
Text decoration does not propagate from the base text to the annotations.
</p>

<p>
~rubyの先祖に~text装飾が指定されたときは、その装飾は，~ruby基底~容器の内容~区画 全体にわたって
— 長い注釈を収容するために~ruby基底~内容の各~側に追加された余分の間隔も含め —
描かれる。
この余分の間隔は、~text装飾が~ruby基底~自身に指定されている場合には，装飾されない
— ~text装飾が その~boxに直に指定されたときに，~boxの自前の~paddingは装飾されないのと類似に。
`CSS3-TEXT-DECOR$r
◎
When text decoration is specified on an ancestor of the ruby, it is drawn across the entire content area of the ruby base container, including any extra space added on either side of the ruby base contents to accommodate long annotations. When text decoration is specified on a ruby base itself, this extra space is not decorated, similar to how a box’s own padding is not decorated when text decoration is specified directly on that box. [CSS3-TEXT-DECOR]
</p>

<p>
~text装飾は、直に［
~ruby基底~容器／~ruby注釈~容器
］に指定されてもヨイ
— そのような事例では、その装飾は，容器のすべての［
基底／注釈
］（同順）に伝播され，継続性のため，それらの各~合間にも描かれる。
◎
Text decoration may be specified directly on ruby base containers and ruby annotation containers: in such cases it is propagated to all of the container’s bases or annotations (respectively), and is also drawn between them for continuity.
</p>

<p>
~ruby注釈の位置は、基底~textに適用されている［
上線／下線
］装飾との競合を避けるため，調整されてもヨイ。
基本的な，~font~sizeと基底線~整列が一貫である事例では、［
上線／下線
］は，当の`基底~level$と その側にある注釈との合間に位置される。
◎
The positions of ruby annotations may be adjusted to avoid potential conflicts with overline and underline decorations applied to the base text. In the basic case of consistent font size and baseline alignment, an underline or overline is positioned between the base level and any annotations on that side.
</p>

<p class="issue">
この節は、隣接な基底や注釈を成す内容の合間に装飾を描くことについて，もう少し明確化する必要がある。
それは、それらの各~boxとそれが属する~colの幅広さが~~等しくなるかどうかに依存する。
◎
This section needs some clarification about drawing decorations between the content of adjacent bases/annotations. Depends on if those boxes are as wide as their column or not.
</p>

		</section>
	</section>
	<section id="edge-effects">
<h2 title="Edge Effects">5. 辺における効果</h2>

		<section id="ruby-overhang">
<h3 title="Overhanging Ruby: the ruby-overhang property">5.1. 張出し~ruby： `ruby-overhang^p ~prop</h3>

◎名 `ruby-overhang@p
◎値 `~auto0$v | `none$v
◎初 `~auto0^v
◎適 ~ruby注釈~容器
◎継 される
◎百 受容しない
◎算 指定された~keyword
◎順 文法に従う
◎ア 算出された値~型による
◎表終

<p>
`ruby-overhang$p ~propは、`~ruby注釈$が［
`~ruby容器$の外側にある隣接な~text
］と重合してもよいかどうかを制御する。
各種 値の意味は：
◎
The ruby-overhang property controls whether ruby annotations may overlap adjacent text outside the ruby container. Values have the following meanings:
</p>

<dl>
	<dt>`~auto0@v</dt>
	<dd>
`~ruby注釈~容器$は、対応する`~ruby基底~容器$より長くなるときは，隣接な~boxに部分的に重合してもヨイ。
◎
When a ruby annotation container is longer than its corresponding ruby base container, the ruby annotation container may partially overlap adjacent boxes.
</dd>
	<dd>
どの条件の下で，どれだけ張出すかは、~UAが決定する。
◎
Whether, how much, and under which conditions to overhang are determined by the UA.
</dd>

	<dt>`none@v</dt>
	<dd>
`~ruby注釈~容器$は、自身の外へ拡張することは，決して許容されない。
◎
A ruby annotation container is never allowed to extend past the ruby annotation container.
</dd>
</dl>

<p>
`~ruby注釈$は、張出すことが許容されないときには，伝統的な`行内~box$の様に挙動する。
すなわち、~boxの境界の中に描画されるものは，~boxの自前の内容に限られ、隣接な要素がその境界を超えて~~侵入することはない：
◎
When ruby annotations are not allowed to overhang, the ruby behaves like a traditional inline box, i.e. only its own contents are rendered within its boundaries and adjacent elements do not cross the box boundary:
</p>

<!-- 
clip: rect(0,0,0,10px)
<div style="position:relative">
<div style="display:inline-block; position:absolute">
</div></div>
 -->
<figure><div
	title="~ruby~boxと隣接な~textとの相互作用を示す図式"
>
<div
	id="_dgm-ro-n"
>
<x-box class="x-outside">
<x-rt>`0.1^xP</x-rt>
<x-rb><x-full style="border-left:none;">…</x-full></x-rb>
</x-box><x-box>
<x-rt>`三^xF`四^xF`五^xF`六^xF`七^xF`八^xF</x-rt>
<x-rb>`一^xF`1^xP`二^xF</x-rb>
</x-box><x-box class="x-outside">
<x-rt>`0.1^xP</x-rt>
<x-rb><x-full style="border-right:none;">…</x-full></x-rb>
</x-box>
</div>
◎
alt=
Diagram showing the ruby boxes interacting with adjacent text
</div><figcaption>
単純~ruby
— その~textが，隣接な~textへ張出すことは、許容されない
◎
Simple ruby whose text is not allowed to overhang adjacent text
</figcaption></figure>

<p>
一方で、`~ruby注釈~容器$が隣接な内容まで張出すことが許容されていて，容器の内容が基底より幅広なときには、隣接な`行内~level$の内容は，`~ruby容器~box$が成す区画の中に部分的に描画され、`~ruby注釈$が隣接な内容の~~傍にある区画に部分的に重合するのも許容される：
◎
However, if a ruby annotation container is allowed to overhang adjacent content and it happens to be wider than its base, then adjacent inline-level content is partially rendered within the area of the ruby container box, allowing the ruby annotation to partially overlap the upper/lower areas of such adjacent content:
</p>

<figure><div
	title="~ruby~boxと隣接な~textとの相互作用を示す図式"
>
<div
	id="_dgm-ro-a"
>
<x-box class="x-outside">
<x-rt>`0.1^xP</x-rt>
<x-rb style="position:relative; left:0.9em;"><x-full style="border-left:none;">…</x-full></x-rb>
</x-box><x-box>
<x-rt>`三^xF`四^xF`五^xF`六^xF`七^xF`八^xF</x-rt>
<x-rb>`一^xF`1^xP`二^xF</x-rb>
</x-box><x-box class="x-outside">
<x-rt>`0.1^xP</x-rt>
<x-rb style="position:relative; right:0.9em;"><x-full style="border-right:none;">…</x-full></x-rb>
</x-box>
</div>
◎
alt=
Diagram showing the ruby boxes interacting with adjacent text
</div><figcaption>
単純な~ruby
— その~textは、隣接な~textへ張出すことが許容されている
◎
Simple ruby whose text is allowed to overhang adjacent text
</figcaption></figure>

<p class="note">注記：
`~ruby基底$に関係する`~ruby注釈$が別の`~ruby基底$に張出せるかどうかは、
`ruby-merge$p により制御される。
◎
Note: Whether ruby annotations related to a ruby base can overhang another ruby base is controlled by ruby-merge.
</p>

<p>
張出しの挙動が［
基底／~ruby~text
］内容の整列に影響することはない。
整列は、張出す挙動の設定に関わらず，同じ仕方で得られ、重合するために可用な間隔が決定される前に算出される。
それは、 `ruby-align$p ~propにより制御される。
◎
The alignment of the contents of the base or the ruby text is not affected by overhanging behavior. Alignment is achieved the same way regardless of the overhang behavior setting and it is computed before the space available for overlap is determined. It is controlled by the ruby-align property.
</p>

<p class="issue">
編集者は、一部の事例では，張出しが整列と相互作用する必要もあると疑っている
— 要検討。
◎
I suspect overhanging interacts with alignment in some cases; might need to look into this later.
</p>

<p class="example">
~UAは、張出す長さの最大として，
`JIS4051$r により推奨される 1 個の~ruby~text文字の長さを利用してよい。
日本語において~ruby~textが 隣接な文字に張出せる方法についての詳細な規則は、
`JLREQ$r に述べられている。
◎
The user agent may use [JIS4051] recommendation of using one ruby text character length as the maximum overhang length. Detailed rules for how ruby text can overhang adjacent characters for Japanese are described by [JLREQ].
</p>

		</section>
		<section id="line-edge">
<h3 title="Line-edge Alignment">5.2. 行l端~辺における整列</h3>

<p>
`~ruby基底$より長い`~ruby注釈~box$が，行lの［
始端／終端
］辺を超えるときは、~UAは行lの辺に触れる側の
`~ruby注釈$を基底の対応する辺に整列するように`強制してもヨイ^em。
この型の整列は、 `JLREQ$r にて述べられている。
◎
When a ruby annotation box that is longer than its ruby base is at the start or end edge of a line, the user agent may force the side of the ruby annotation that touches the edge of the line to align to the corresponding edge of the base. This type of alignment is described by [JLREQ].
</p>

<p>
この挙動を制御する仕組みは、この~levelの仕様では供されない。
◎
This level of the specification does not provide a mechanism to control this behavior.
</p>

<figure><div
	title="~rubyにおける~glyph~layoutの図式：行l端にある注釈が基底より長いときに，注釈が行l端~辺に整列される様子を示す"
>
<div
	style="padding-top: 2em;"
>
<x-box
	id="_dgm-ra-le-l"
	style="position: relative;"
>
<div style="position: absolute; top:-2em; left:-0.2em; height: 8em; border-left: thin dashed blue; white-space:nowrap;">左端~margin辺</div>
<x-rt>`三^xF`四^xF`五^xF`六^xF`七^xF`八^xF</x-rt>
<x-rb>`一^xF`1^xP`二^xF`1^xP</x-rb>
</x-box>
<x-box
	id="_dgm-ra-le-r"
	style="position:relative;"
>
<div style="position: absolute; top:-2em; right:-0.2em; height: 8em; border-right: thin dashed blue; white-space:nowrap; text-align:right;">右端~margin辺</div>
<x-rt>`三^xF`四^xF`五^xF`六^xF`七^xF`八^xF</x-rt>
<x-rb>`1^xP`一^xF`1^xP`二^xF</x-rb>
</x-box>

</div>
◎
alt=
Diagram of glyph layout in line-edge aligned ruby when ruby text is shorter than base／Diagram of glyph layout in line-edge aligned ruby when ruby text is longer than base
</div><figcaption>
行l端~辺における整列
◎
Line-edge alignment
</figcaption></figure>

		</section>
	</section>
	<section id="default-stylesheet">
<h2 title="Default Style Sheet">付録 A. 既定の~stylesheet</h2>

~INFORMATIVE

		<section id="default-ua-ruby">
<h3 title=" A.1 Supporting Ruby Layout">A.1. ~ruby~layoutを~supportするとき</h3>

<p>
~HTML／~XHTML
による~ruby~markupを~ruby~layoutとして描画するための
既定の~UA~stylesheetは、次で表現される：
◎
The following represents a default UA style sheet for rendering HTML and XHTML ruby markup as ruby layout:
</p>

<pre class="lang-css">
ruby { display: ruby; }
rp   { display: none; }
rbc  { display: ruby-base-container; }
rtc  { display: ruby-text-container; }
rb   { display: ruby-base; white-space: nowrap; }
rt   { display: ruby-text; }
ruby, rb, rt, rbc, rtc { unicode-bidi: isolate; }

rtc, rt {
  font-variant-east-asian: ruby;  /* <span class="comment">`CSS3-FONTS^r を見よ</span> */
  text-emphasis: none;            /* <span class="comment">`CSS3-TEXT-DECOR$r を見よ</span> */
  white-space: nowrap;
  line-height: 1; }
rtc:lang(zh), rt:lang(zh) {
  ruby-align: center; }

rtc, :not(rtc) &gt; rt {
  font-size: 50%; }
rtc:lang(zh-TW), :not(rtc) &gt; rt:lang(zh-TW) {
  font-size: 30%; }               /* <span class="comment">`注音符号$</span> */
</pre>

<p class="note">注記：
作者は、上の規則を利用するべきでない
— ~ruby~layoutを~supportする~UAは、上の規則を既定で供するべきである。
◎
Note: Authors should not use the above rules: a UA that supports ruby layout should provide these by default.
</p>

<p>
利用者が “最小~font~size” を制御できる特能を実装している~UAは、~ruby注釈~用の最小を縮小することも考慮するベキである。
◎
UAs implementing a user-controlled “minimum font size” feature should consider scaling that minimum down for ruby annotations.
</p>

		</section>
		<section id="default-inline">
<h3 title=" A.2 Inlining Ruby Annotations">A.2. ~ruby注釈の行内~化法</h3>

<p>
~HTML／~XHTML
による~ruby~markupを~inline注釈として描画するための
見本~stylesheetは、次で表現される:
◎
The following represents a sample style sheet for rendering HTML and XHTML ruby markup as inline annotations:
</p>

<pre class="lang-css">
ruby, rb, rt, rbc, rtc, rp {
  display: inline;
  white-space: inherit;
  font: inherit;
  text-emphasis: inherit;
}
</pre>

		</section>
		<section id="default-parens">
<h3 title=" A.3 Generating Parentheses">A.3. 丸括弧の生成-法</h3>

<p>
あいにく， Selectors は~text~nodeには合致し得ないので、~HTMLにおける 丸括弧を伴わない~ruby注釈に，丸括弧を 自動的かつ正しく追加する規則を~CSSで表出することはアリでない。
（このことは、~HTMLの~rubyでは，対応する要素の無い 生の~textにより暗黙に`~ruby基底$も可能にされているためである。）
しかしながら，［
`rb^e ／ `rtc^e
］が厳格に利用されている事例に対しては、次の規則で取扱える。
◎
Unfortunately, because Selectors cannot match against text nodes, it’s not possible with CSS to express rules that will automatically and correctly add parentheses to unparenthesized ruby annotations in HTML. (This is because HTML ruby allows implying the ruby base from raw text, without a corresponding element.) However, these rules will handle cases where either &lt;rb&gt; or &lt;rtc&gt; is used rigorously.
</p>

<pre class="lang-css">
/* Parens around &lt;rtc&gt; */
rtc::before { content: "("; }
rtc::after  { content: ")"; }

/* Parens before first &lt;rt&gt; not inside &lt;rtc&gt; */
rb  + rt::before,
rtc + rt::before { content: "("; }

/* Parens after &lt;rt&gt; not inside &lt;rtc&gt; */
rb ~ rt:last-child::after,
rt + rb::before  { content: ")"; }
rt + rtc::before { content: ")("; }
</pre>

		</section>
	</section>
	<section id="glossary">
<h2 title="Glossary">6. 用語集</h2>

<dl>
	<dt>
`注音符号@
（ `Bopomofo^en ／ `Zhuyin Fuhao^en ）
（中国語：
<span lang="zh-Bopo">ㄅㄆㄇㄈ</span> ／
<span lang="zh-Hant">~~注音符號</span> ／
<span lang="zh-Hans">~~注音符号</span>
）
◎
Bopomofo or Zhuyin Fuhao (Chinese: ㄅㄆㄇㄈ, 注音符號, or 注音符号)
</dt>
	<dd>
中国語の発音符に利用される 37 文字と 4 声調からなる符~法
— とりわけ標準中国語（ `standard Mandarin^en ）。
これらは、~ruby注釈~用に利用されることが多いが，それに~~限定されない。
【台湾のそれ。大陸の中国語に標準な<span lang="zh">拼音</span>（ `pinyin^en ）ではない。】
◎
37 characters and 4 tone markings used as phonetics in Chinese, especially standard Mandarin. These are often, but not exclusively, used for ruby annotations.
</dd>
	<dd>
<figure>
<p>
【！img src="css-ruby/zhuyin-example.png"】
【代替~text†：】
注音符号（青色）は、横書き~textにおける各 `中文漢字$の右側に沿って縦方向に連なる。
◎
Bopomofo characters (in blue) run vertically along the right side of each Hanzi character in the horizontal text.
</p>

<p class="trans-note">【†
原文のこの箇所にある画像は、まだ無い（ `img^e ~tagのみ在る）。
`inter-character$v に挙げられた図が，およそ該当するであろう。
】</p>


<figcaption>
中国語において文字~間~発音符の注釈として利用される注音符号の例。
◎
Example of Bopomofo used as phonetic inter-character annotations in Chinese
</figcaption></figure>
	</dd>
	<dd>
`注音符号~声調~符@
は、（~~論理順で）各 注音符号~音節の終端に生じる文字であり、間隔法を要する。
それらは、概して，別々の筋~内に，他の注音符号の右肩【！right of or above】に表示される。
また、声調~符の位置は，音節~内の文字~数に依存する。
しかしながら，中立的な声調~符は、注音符号の
— 傍ではなく —
前に（かつ同じ行lに）配置される。
【！See Taiwanese requirements doc for EPUB at https://lists.w3.org/Archives/Public/www-archive/2020Apr/att-0005/EGLS_TW_eng.ppt】
◎
Bopomofo tone marks are spacing characters that occur (in memory) at the end of each bopomofo syllable. They are typically displayed in a separate track to the right of or above the other bopomofo characters, and the position of the tone mark depends on the number of characters in the syllable. The neutral tone mark, however, is placed before (and in line with) the bopomofo, not alongside it.
</dd>
	<dd class="note">注記：
~UA, ~font下位~systemは、~textを表示する際に，各~glyphを
— それが［
~ruby注釈~内で生じるか, 通常の行内~内容として生じるか
］に応じて —
正しく［
位置される／相対的に整列される
］ことを確保する責を負う
— `注音符号~声調~符$を含め。
そのような~glyph配置は、~CSS~ruby~layoutの機能ではない。
◎
Note: The user agent and font subsystem are responsible for ensuring the correct relative alignment and positioning of glyphs, including bopomofo tone marks, when displaying text—whether the text occurs in ruby annotations or as normal inline content. Such glyph placement is not a function of CSS ruby layout.
</dd>

	<dt>
`漢字@
（ `Han^en ）
</dt>
	<dd class="trans-note">【
この項は、この訳による補足。
明確に定義されてないが、主に日中韓で利用されている
~~漢字／表語文字
の総称と思われる（該当する文字は、他の用字系にもあるかもしれない）。
】</dd>

	<dt>
`韓文漢字@
（ `Hanja^en ）
（韓国語： <span lang="ko">~~漢字</span> ）
◎
Hanja (Korean: 漢字)
</dt>
	<dd>
韓国語~書記体系の下位集合であり，中国語~書記体系から［
借用された／適応させた
］表語的~文字を用立てるもの。
`日本漢字$も見よ。
◎
Subset of the Korean writing system that utilizes ideographic characters borrowed or adapted from the Chinese writing system. Also see Kanji.
</dd>

	<dt>
`中文漢字@
（ `Hanzi^en ）
（中国語：
<span lang="zh-Hans">汉字</span> ／
<span lang="zh-Hant">漢字</span>
）
</dt>
	<dd class="trans-note">【
この項は、この訳による補完。
中国語の~~漢字を指すと見受けられる。
（中国語は ほぼすべて漢字で記され，ほぼ “中国語の字l” と同義になるので、用語として挙げられていないのかもしれない。）
】</dd>

	<dt>
`平仮名@
（ `hiragana^en ）
（日本語： ~~平仮名）
◎
Hiragana (Japanese: 平仮名)
</dt>
	<dd>
日本語の音節的~用字系, または その用字系の文字。
筆記的には、丸まった外見。
日本語~書記体系の下位集合であり、`日本漢字$や`片仮名$と一緒に利用される。
近現代では、日本語~単語を書く際に［
日本漢字が［
可用でない／適切でない
］とき／
単語の~~送り~~仮名（ `ending^en ）や~~助詞（ `particle^en ）
］に利用されることがほとんどである。
`片仮名$も見よ。
◎
Japanese syllabic script, or character of that script. Rounded and cursive in appearance. Subset of the Japanese writing system, used together with kanji and katakana. In recent times, mostly used to write Japanese words when kanji are not available or appropriate, and word endings and particles. Also see Katakana.
</dd>

	<dt>
`表語文字@
（ `ideograph^en ）
◎
</dt>
	<dd>
~alphabeticなど音節的な用字系の文字とは対照的に、［
~idea／単語／単語のある成分
］を表現するときに利用される文字（用字系に応じて いくつか変種がある）。
東Asia（日中韓, 他）で利用されるものが、最もよく知られた表語的 用字系である。
◎
A character that is used to represent an idea, word, or word component, in contrast to a character from an alphabetic or syllabic script. The most well-known ideographic script is used (with some variation) in East Asia (China, Japan, Korea,...).
</dd>

	<dt>
`仮名@
（ `kana^en ）
（日本語： ~~仮名）
◎
Kana (Japanese: 仮名)
</dt>
	<dd>
`平仮名$, `片仮名$を併せた総称。
◎
Collective term for hiragana and katakana.
</dd>

	<dt>
`日本漢字@
（ `Kanji^en ）
（日本語： ~~漢字）
◎
Kanji (Japanese: 漢字)
</dt>
	<dd>
日本語における，`表語文字$を指す用語
— 日本語で利用される`表語文字$。
日本語~書記体系の下位集合であり、`平仮名$, `片仮名$と一緒に利用される。
`韓文漢字$も見よ。
◎
Japanese term for ideographs; ideographs used in Japanese. Subset of the Japanese writing system, used together with hiragana and katakana. Also see Hanja.
</dd>

	<dt>
`片仮名@
（ `katakana^en ）
（日本語： ~~片仮名）
◎
Katakana (Japanese: 片仮名)
</dt>
	<dd>
日本語の音節的~用字系, または その用字系の文字。
角張った外見。
日本語~書記体系の下位集合であり、`日本漢字$, `平仮名$と一緒に利用される。
近現代では、主に外来語を書くときに利用される。
`平仮名$も見よ。
◎
Japanese syllabic script, or character of that script. Angular in appearance. Subset of the Japanese writing system, used together with kanji and hiragana. In recent times, mainly used to write foreign words. Also see Hiragana.
</dd>
</dl>

	</section>
	<section id="acknowledgments">
<h2 title="Acknowledgments">謝辞</h2>

<p>
この仕様は、次の方々からの助力~抜きにはアリでなかった：
◎
This specification would not have been possible without the help from:
</p>

<div lang="en-x-a0">
David Baron,
Robin Berjon,
Susanna Bowen,
Stephen Deach,
Martin Dürst,
Hideki Hiura (<span lang="ja">樋浦 秀樹</span>),
Masayasu Ishikawa (<span lang="ja">石川雅康</span>),
Taichi Kawabata,
Chris Pratley,
Xidorn Quan,
Takao Suzuki (<span lang="ja">鈴木 孝雄</span>),
Frank Yung-Fong Tang,
Chris Thrasher,
Masafumi Yabe (<span lang="ja">家辺勝文</span>),
Boris Zbarsky,
Steve Zilles.
</div>

<p>
以前の編集者たちにも特別な謝意を：
</p>

<div lang="en-x-a0">
Special thanks goes to the previous editors: Michel Suignard and Marcin Sawicki of Microsoft, and Richard Ishida of W3C.
</div>

	</section>
	<section id="changes">
<h2 title="Changes">変更点</h2>

<p>
この節では、以前の発行版からの変更点を文書化する。
◎
This section documents the changes since previous publications.
</p>

<dl>
	<dt id="changes-20140805">
2014年 8月 5日 作業草案からの変更点
◎
Changes since the 5 August 2014 WD
</dt>
	<dd>
~rubyが張出す挙動に対する基本的な制御-用に，
`ruby-overhang$p を追加し直した。
◎
Add back ruby-overhang: auto | none for basic control over ruby overhang behavior.
</dd>
	<dd>
行内~化が `CSS-DISPLAY-3$r と調和するようにした。
◎
Harmonize inlinification with the CSS Display Module.
</dd>
	<dd>
下線や上線と競合する場合には，~rubyや圏点をズラすことを~UAに許容した。
◎
Allow UA to shift ruby/emphasis marks if they conflict with underlines/overlines.
</dd>
	<dd>
`ruby-merge$p の算出d値が `collapse^v †のときには、自動で隠すのを不能化した。
【† `merge$v に更新された。】
◎
Disable autohiding when the computed value of ruby-merge is collapse.
</dd>
	<dd>
<a href="#default-stylesheet">既定の~stylesheet</a>を調節した。
◎
Tweak the default style sheet.
</dd>
	<dd>
~text装飾との相互作用を定義する
<a href="#ruby-text-decoration">§ ~ruby~text装飾</a>
を追加した。
◎
Add section defining interaction with text decoration.
</dd>
	<dd>
`ruby-position$p の［
`right^v, `left^v
］値を次の~levelへ先送りした。
◎
Defer the right and left values of ruby-position to the next level.
</dd>
	<dd>
~ruby`~pair法$の規則を，匿名な~ruby注釈に~spanしているもの（すなわち， `rtc^e 要素に直に包含される内容）に限り適用されるよう変更した。【？】
◎
Change ruby pairing rules to only apply spanning on anonymous annotations (i.e. content directly contained by an rtc).
</dd>
	<dd>
~pairは、［
~ruby基底／~ruby注釈
］を自動-生成される空な匿名［
~ruby基底／~ruby注釈
］で `excess^en する【？】。
◎
Pair excess bases / annotations with auto-generated empty anonymous bases / annotations.
</dd>
	<dd>
`ruby-position$p は `first-line$pe に適用することにした。
（<a href="~CSSissue/2998">課題 #2998</a>）
◎
Apply ruby-position to ::first-line. (Issue 2998)
</dd>
	<dd>
~ruby~box【`~ruby容器$】, その内容の包含塊は、他の`行内~box$の事例と同じく，最も近い塊~容器であることを明確化した。
◎
Clarify containing block of ruby boxes and contents is, as in the case of other inline boxes, the nearest block container.
</dd>
	<dd>
親が違えられた内部~table要素の取扱いを明確化した。
◎
Clarify handling of misparented internal table elements.
</dd>
	<dd>
［
`~ruby容器$／`~ruby注釈~容器$／`~ruby基底~容器$【！~ruby基底~基底~容器】
］内の［
頭部, 尾部
］にある空白は、~pair法に干渉しないよう，削ることにした。
◎
Trim leading/trailing white space in ruby containers, base base containers, and annotation containers to prevent it from interfering with pairing.
</dd>
	<dd>
空な［
`~ruby基底$, `~ruby注釈~容器$
］の~layout効果を定義した。
◎
Define layout effect of empty base and annotation containers.
</dd>
	<dd>
［
`~ruby基底~容器$／`~ruby注釈~容器$
］に対する［
~margin, ~padding, ~border
］は不能化するようにした（が、［
`~ruby基底$／`~ruby注釈$
］においては不能化されない）。
◎
Disable margins, padding, and borders on ruby base containers and ruby annotation containers (but not on ruby bases and ruby annotations).
</dd>

	<dt id="changes-20130919">
2013年 9月 19日 作業草案からの変更点
◎
Changes since the 19 September 2013 WD
</dt>
	<dd>
匿名~boxの生成~規則と空白の取扱い規則を書き直した。
匿名な空白~boxに特化された`~pair法$を定義した。
◎
Rewrite anonymous box generation rules and white space handling rules, defined specialized pairing of anonymous white space boxes.
</dd>
	<dd>
`~pair法$から，`入子の~ruby$の取扱いを取り出した。
（ ~sizing／~layoutを介して取扱うことになる。）【？】
◎
Take nested ruby handling out of pairing. (Will be handling it via sizing/layout.)
</dd>
	<dd>
~ruby構造の双向~layoutを定義した。
◎
Define bidi layout of ruby structures.
</dd>

	<dt id="changes-20110630">
2011年 6月 30日 作業草案からの変更点
◎
Changes since the 30 June 2011 WD
</dt>
	<dd>
`ruby-span^p および
`rbspan^a への言及を除去した。
~HTML~rubyにおいては、明示的な~spanningは
— 暗黙的な~spanningの~~支持を受けて —
利用されない。
両側へ~~異常に~spanする一部の事例は取扱えなくなるが、~~現時点では，その要件は無いように見受けられる（複階的な~XHTML~Rubyを全部的に~supportする実装は、~tableにて~spanしている~cellを取扱うときと同じ魔法な仕方で，~markupから~spanningを黙示できる。
~level 1 においては、この制御を含めることは必要とされないと見受けられる。）
◎
Remove ruby-span and mentions of rbspan.
• Explicit spanning is not used in HTML ruby in favor of implicit spanning. This can’t handle some pathological double-sided spanning cases, but there seems to be no requirement for these at the moment. (For implementations that support full complex XHTML Ruby, they can imply spanning from the markup the same magic way that we handle cell spanning from tables. It doesn’t seem necessary to include controls this in Level 1.)
</dd>
	<dd>
`ruby-overhang^p, および
`ruby-align^p に対する `line-end^v は、~level 2 へ先送りした。
これは、いくぶん複雑で高度な特能である。
この挙動を~UAが定義することにして，受容-可能な~optionを成す何らかの例を供する提案がある。
◎
Defer ruby-overhang and ruby-align: line-end to Level 2.
• It’s somewhat complicated, advanced feature. Proposal is to make this behavior UA-defined and provide some examples of acceptable options.
</dd>
	<dd>
`rp$e 要素~用に `display^p 値 `rp^v を要請する国際化WGから追加された課題を，
`display^p に `none^v を利用することにより~closeした。
`rp^v には， `ruby$e が~rubyとして表示されるときに隠すことが想定されているが、これはすでに， `none^v で容易に成遂げれる。
◎
Close issue requesting display: rp: use display: none.
• The Internationalization WG added an issue requesting a display value for rp elements. They’re supposed to be hidden when ruby is displayed as ruby. But this is easily accomplished already with display: none.
</dd>
	<dd>
`ruby-position$p 値を `text-emphasis-position$p に合致するよう変更した。
保つ必要がある `inter-character$v 以外は、~ruby位置と `text-emphasis-position$p を整列する方がイミを成し，［
横書き／縦書き
］に対する様々な選好の組合nを正しく取扱えるので。
◎
Change ruby-position values to match text-emphasis-position.
• Other than inter-character, which we need to keep, it makes more sense to align ruby positions with text-emphasis-position, which can correctly handle various combinations of horizontal/vertical preferences.
</dd>
	<dd>
`ruby-align$p 用の値［
`left^v, `right^v, `end^v
］は、利用されておらず，必要ないので除去した。
◎
Remove unused values of ruby-align.
• left, right, and end are not needed.
</dd>
	<dd>
`ruby-align$p の用の値［
`auto^v,
`distribute-letter^v,
`distribute-space^v
］を［
`space-between$v,
`space-around$v
］に置換した。
`auto^v は，内容を検分することに依拠して挙動を決定していたが、
`space-around$v と標準な両端揃え規則を併用するだけで避けれる（それは、~CJK間の間隔法は許容する一方で，~Latin間には許容しない）。
`CSS-FLEXBOX-1$r, `CSS-ALIGN-3$r
における各種 分布~keywordとの一貫性を得るため，および
`text-justify^p: `distribute^v の定義への~linkを避けるため、［
`distribute-letter^v, `distribute-space^v
］を［
`space-between^v, `space-around^v
］に置換した。
◎
Replace auto, distribute-letter, and distribute-space from ruby-align with space-between and space-around.
• The auto value relied on inspecting content to determine behavior; this can be avoided by just using space-around with standard justification rules (which allow spacing between CJK but not between Latin). Replaced distribute-letter and distribute-space with space-between and space-around for consistency with distribution keywords in [CSS-FLEXBOX-1] and [CSS-ALIGN-3] and to avoid any links to the definition of text-justify: distribute.
</dd>
	<dd>
熟語の描画を制御する `ruby-merge$p ~propを追加した。
これは、~style上の効果であり，構造上の効果ではない。
以前の~modelでは、構造上の効果と見做して，~markupを変更することで それを取扱うよう示唆していた。
 :(
◎
Added ruby-merge property to control jukugo rendering.
• This is a stylistic effect, not a structural one; the previous model assumed that it was structural and suggested handling it by changing markup. :(
</dd>
	<dd>
`ruby-position$p から `inline^v を除去した。
これは、~rubyに関係するすべての要素~上で， `display^p を `inline^v にすることを介して行えるので。
<a href="#default-inline">§ ~ruby注釈の行内~化法</a>
を見よ。
◎
Remove inline from ruby-position.
• This is do-able via display: inline on all the ruby-related elements, see Appendix A.
</dd>
	<dd>
国際化WGから要請された
<a href="#default-stylesheet">既定の~style</a>
規則を追加した。
◎
Added Default Style rules
• As requested by Internationalization WG.
</dd>
	<dd>
匿名~boxの生成~規則を書いて、基底と注釈の`~pair法$を定義した。
今や，~HTML~ruby~markupが成す~~膨大な順列~すべてを取扱うはずである。
◎
Wrote anonymous box generation rules
• And defined pairing of bases and annotations. Should now handle all the crazy proposed permutations of HTML ruby markup.
</dd>
	<dd>
~rubyの~layoutを定義した。
間隔~分布, 空白の取扱い, 行l分断-法, 行l堆積-法, 等々を詳細に定義した。
双向性の課題は~openなまま残された。
◎
Defined layout of ruby
• Defined in detail space distribution, white space handling, line breaking, line stacking, etc. Open issue left for bidi.
</dd>
</dl>

	</section>
</main></div>
