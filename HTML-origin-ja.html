<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>HTML Standard — Origin, Sandboxing（日本語訳）</title>
<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-whatwg.css" type="text/css" />
<script src="common0.js" ></script>
<script src="common1.js" async></script>

<style>

@supports (display: grid) and (display: contents) {

._compare-origin {
	max-width: 28em;
}

._compare-origin tr {
	grid-template-areas:
		"A A"
		"B B"
		"同一 同じ"
	;
	grid-template-columns: 1fr 1fr;
}

._compare-origin tr > *:nth-child(1) {
	grid-area: A;
	white-space: nowrap;
}

._compare-origin tr > *:nth-child(2) {
	grid-area: B;
	white-space: nowrap;
}

._compare-origin tr > *:nth-child(3) {
	grid-area: 同一;
}

._compare-origin tr > *:nth-child(4) {
	grid-area: 同じ;
}

}

</style>

<script>

Util.ready = function(){
	const source_data = {
		toc_main: 'MAIN',
		generate: expand
	};
	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w~一-鿆あ-ん]+|`(.+?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){

if(!key) {//%
	return `<var>${match.slice(1)}</var>`;
}

let text = key;
let href = '';

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `HTML-references.html#refs${key}`;
	break;
case 'l':
	text = `"<code class="literal">${text}</code>"`;
	break;
case 'm':
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 'sbox': // sandboxing flags
	text = `閲覧文脈~sandbox化( ${key} )~flag`;
	break;
case 'U':
	text = `U+${key}`;
	break;
case 'smb':
	text = `(<span class="char-symbol">${text}</span>)`;
	break;
case 'sl':
	text = `[[${key}]]`;
	break;
case 'en':
	return `<span lang="en-x-a0">${key}</span>`;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;


	}
}

</script>

<script type="text/plain" id="_source_data">


●●options

spec_date:2020-04-30
trans_update:2020-04-01
source_checked:191126
page_state_key:HTML
spec_status:LS
original_url:https://html.spec.whatwg.org/multipage/origin.html
site_nav:browsers,security,html
nav_prev:WINDOW
nav_next:HISTORY
trans_1st_pub:2016-07-12


●●class_map
e:element
a:attr
et:event-type
E:error
U:code-point
sl:js-slot
v:value

●●tag_map
I:code
m:code
c:code
e:code
a:code
et:code
E:code
sl:span
U:span
v:code
i:i
cite:cite

●●words_table

database::::データベース
iframe:
	unfortunate

	●仕様
アタられ:consultされ:あたられ
採用-:adopt:~
基礎的な:fundamental:~
自明:trivial:~
	-:substeps
	~~協調する:if they do the same thing
	なり得る:potentially
	にもかかわらず:nonetheless
	加えて:Furthermore
	様々な程度:varying degrees
	広く:widely
	方が好ましい:in favor of

	●network／保安
IPv4:
IPv6:
IP:
下位domain:subdomain:::下位ドメイン
navigator::::ナビゲータ
隔離-:isolate:~
権限:authority:~
強制d:forced:強制
公共:public::~
逃れる:escapeする:~

	信用できない:untrusted
	CORS-cross-origin
	CORS-same-origin
	~secure化-:secured

	●環境 ／ 閲覧
補助:auxiliary::~
成分組:tuple:~
閉じる:closeする::~
	閉じるとき:closing
開く:openする::~
開いた:openした::~
	-:back

	●UI
modal::::モーダル
popup:
再生-:play:~
一過:transient::~

	around
	Control key
	~scroll用:scrolling
	~tab付き:tabbed

	●構文
分割-:split:~
接頭-:prefix:~
	過ぎない:past
	-:頭部の

	●未分類
出自の:originating:~
動作者:actor:~
	getting
読取る:readする:読み取る
書込む:writeする:書き込む
	-:common
同等:equal:~
同等性:equality:~
和集合:union:~
実効:effective:~
	種類:
自動:automatic:~
通貨:currency:~

	~~投出:raise
	変異しない:immutable
	対応付け:map
	~~述べ
	-:prefixed
	選ばれ
	選ぶ:choose する
	meant
	said
	~instance化-:instantiate
	:exactly
	連結-
	hosting
	非:non
	:per
	point
	元~host:originalHost

	●指示語
	尾部:end
	:these
	:such as
	-:next


●●original_id_map


●●words_table1

document-domain:<code>document.domain</code> 

●●link_map



	●IDL
I.Document:~HTMLdom#document
	I.WindowProxy:~WINDOW#windowproxy
E.SecurityError:~WEBIDL#securityerror

m.document.domain:#dom-document-domain
m.domain:#dom-document-domain
m.localStorage:~WEBSTORAGE#dom-localstorage
m.window.alert:~HTMLGAPI#dom-window-alert
m.window.confirm:~HTMLGAPI#dom-window-confirm
m.window.print:~HTMLGAPI#dom-window-print
m.window.prompt:~HTMLGAPI#dom-window-prompt
m.window.open:~WINDOW#dom-window-open

	●event
et.beforeunload:~HTMLindex#event-beforeunload

	●要素
e.img:~HEimages#the-img-element
e.iframe:~HEembed#the-iframe-element
e.audio:~HEmedia#the-audio-element
e.video:~HEmedia#the-video-element


	●内容属性
a.sandbox:~HEembed#attr-iframe-sandbox
a.target:~HTMLlinks#attr-hyperlink-target

	●code
	m.onclick

	●
文書:~HTMLdom#the-document-object

	●閲覧文脈
~top-level閲覧文脈:~BROWSERS#top-level-browsing-context
閲覧文脈:~BROWSERS#browsing-context
閲覧文脈を選ぶ規則:~BROWSERS#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name
作動中の文書:~BROWSERS#active-document
属する閲覧文脈:~BROWSERS#concept-document-bc
入子にしている閲覧文脈:~BROWSERS#nested-browsing-context
子~閲覧文脈:~BROWSERS#child-browsing-context
容器~文書:~BROWSERS#bc-container-document
補助~閲覧文脈:~BROWSERS#auxiliary-browsing-context
新たな閲覧文脈を作成する:~BROWSERS#creating-a-new-browsing-context

	●生成元／sandbox（origin.html
	§:#origin
	§:#sandboxing
	§:#relaxing-the-same-origin-restriction
	:#origin-2
	:#unicode-serialisation-of-an-origin
	:~HTMLforms#sandboxSubmitBlocked
	:~HEmedia#attr-media-autoplay
	:~HTMLinteraction#attr-fe-autofocus
	:~NAVI#sandboxPluginNavigate
	:~WAPI#sandboxScriptBlocked
	:~HEembed#sandboxPluginEmbed
	:~HEembed#sandboxPluginObject

生成元:#concept-origin
不透明な生成元:#concept-origin-opaque
成分組~生成元:#concept-origin-tuple
o.~scheme:#concept-origin-scheme
o.~host:#concept-origin-host
o.~port:#concept-origin-port
o.~domain:#concept-origin-domain
実効~domain:#concept-origin-effective-domain
生成元を直列化する:#ascii-serialisation-of-an-origin
o.直列化:#ascii-serialisation-of-an-origin
同一-生成元:#same-origin
同じ生成元~domain:#same-origin-domain
同じ~site:#same-site
~scheme無しで同じ~site:#schemelessly-same-site

~scheme＆登録-可能な~domain:#scheme-and-registrable-domain
~site:#site
~siteを得る:#obtain-a-site

登録-可能な~domain接尾辞または同等:#is-a-registrable-domain-suffix-of-or-is-equal-to


v.allow-popups:#attr-iframe-sandbox-allow-popups
v.allow-top-navigation:#attr-iframe-sandbox-allow-top-navigation
v.allow-top-navigation-by-user-activation:#attr-iframe-sandbox-allow-top-navigation-by-user-activation
v.allow-same-origin:#attr-iframe-sandbox-allow-same-origin
v.allow-forms:#attr-iframe-sandbox-allow-forms
v.allow-pointer-lock:#attr-iframe-sandbox-allow-pointer-lock
v.allow-scripts:#attr-iframe-sandbox-allow-scripts
v.allow-popups-to-escape-sandbox:#attr-iframe-sandbox-allow-popups-to-escape-sandbox
v.allow-modals:#attr-iframe-sandbox-allow-modals
v.allow-orientation-lock:#attr-iframe-sandbox-allow-orientation-lock
v.allow-presentation:#attr-iframe-sandbox-allow-presentation
v.allow-downloads:#attr-iframe-sandbox-allow-downloads

~sandbox法~flag集合:#sandboxing-flag-set
作動中の~sandbox法~flag集合:#active-sandboxing-flag-set
強制d~sandbox法~flag集合:#forced-sandboxing-flag-set
~popup~sandbox法~flag集合:#popup-sandboxing-flag-set
~iframe~sandbox法~flag集合:#iframe-sandboxing-flag-set

sbox.~document-domain:#sandboxed-document.domain-browsing-context-flag
sbox.~form:#sandboxed-forms-browsing-context-flag
sbox.~navi:#sandboxed-navigation-browsing-context-flag
許可-済み~navigator:#one-permitted-sandboxed-navigator
sbox.~plugin:#sandboxed-plugins-browsing-context-flag
sbox.~pointer~lock:#sandboxed-pointer-lock-browsing-context-flag
sbox.~script:#sandboxed-scripts-browsing-context-flag
sbox.非~利用者~作動化~top-level~navi:#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag
sbox.利用者~作動化~top-level~navi:#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag
sbox.生成元:#sandboxed-origin-browsing-context-flag
sbox.自動~特能:#sandboxed-automatic-features-browsing-context-flag
sbox.補助~navi:#sandboxed-auxiliary-navigation-browsing-context-flag
sbox.方位~lock:#sandboxed-orientation-lock-browsing-context-flag
sbox.呈示:#sandboxed-presentation-browsing-context-flag
sbox.~download:#sandboxed-downloads-browsing-context-flag

~sandboxは補助~閲覧文脈に伝播する~flag:#sandbox-propagates-to-auxiliary-browsing-contexts-flag
~sandbox化( ~modal )~flag:#sandboxed-modals-flag

~sandbox法~flag群を決定する:#determining-sandboxing-flags
~sandbox法~指令を構文解析する:#parse-a-sandboxing-directive

	●用語 HTML
l.document-domain:~HTMLINFRA#document-domain-feature
~plugin:~HTMLINFRA#plugin
~secure化でき:~HTMLINFRA#concept-plugin-secure

~CORS非同一-生成元:~HTMLurl#cors-cross-origin
~CORS同一-生成元:~HTMLurl#cors-same-origin

~navi:~NAVI#navigate
~navigate応答を処理する:~NAVI#process-a-navigate-response
現在の~window:~WINDOW#_bc-window

画像~data:~HEimages#img-req-data
利用は許容されて:~HEembed#allowed-to-use
~media~data:~HEmedia#media-data
~media要素:~HEmedia#media-element

一過な作動化:~HTMLinteraction#transient-activation

~hyperlinkを~downloadする:~HTMLlinks#downloading-hyperlinks
~downloadとして:~HTMLlinks#as-a-download

	●用語（外部
~ASCII空白で分割する:~INFRA#split-on-ascii-whitespace
~tuple:~INFRA#tuple

	●URL1
同等な~host:~URL1#concept-host-equals
~hostを直列化する:~URL1#concept-host-serializer
~host構文解析器:~URL1#concept-host-parser

x.~host:~URL1#concept-host
url.~domain:~URL1#concept-domain
url.~host:~URL1#concept-url-host
url.~port:~URL1#concept-url-port
url.~scheme:~URL1#concept-url-scheme
~IPv4~address:~URL1#concept-ipv4
~IPv6~address:~URL1#concept-ipv6
整数を直列化する:~URL1#serialize-an-integer
公共~接尾辞:~URL1#host-public-suffix
登録-可能な~domain:~URL1#host-registrable-domain

~network~scheme:~FETCH#network-scheme

~node文書:~DOM4#concept-node-document


●●trans_metadata
<p>
~THIS_PAGEは、~WHATWGによる HTML 仕様の
Loading Web pages 章の
<a href="~SPEC_URL">§ Origin, § Sandboxing</a>
を日本語に翻訳したものです。
~PUB
</p>

</script>


<body>

<header>
	<hgroup>
<h1>生成元, サンドボックス法 — Origin, Sandboxing</h1>
	</hgroup>
</header>

<main id="MAIN" hidden>

		<section id="_conventions">
<h2>【この訳に固有の表記規約】</h2>

<p>
この訳の，~algoや定義の記述に利用されている各種記号（ ~LET, ~IF, ε, 此れ, ~THROW 等々）の意味や定義の詳細は，~SYMBOL_DEF_REFを~~参照されたし。
</p>

		</section>
		<section id="origin">
<h2 title="Origin">7.5. 生成元</h2>

<p>
<ruby>生成元<rt>せいせいもと</rt></ruby>（ `origin^en ）は、~Webの~security~modelにおける基礎的な通貨である。
~Web~platformにおける，ある生成元を共有する動作者たちは、互いを信用し，同じ権限を有するものと見做される。
互いの生成元が相違する動作者たちは、敵対的になり得るものと見なされ，様々な程度で互いに隔離される。
◎
Origins are the fundamental currency of the Web's security model. Two actors in the Web platform that share an origin are assumed to trust each other and to have the same authority. Actors with differing origins are considered potentially hostile versus each other, and are isolated from each other to varying degrees.
</p>

<p class="example">
例えば
`bank.example.com^c
にて~hostされている X 銀行の ~Web~siteが
`charity.example.org^c
にて~hostされている Y 事業体の~Web~siteの~DOMを精査しようと試行した場合、
`SecurityError$E 例外が~~投出されることになる。
◎
For example, if Example Bank's Web site, hosted at bank.example.com, tries to examine the DOM of Example Charity's Web site, hosted at charity.example.org, a "SecurityError" DOMException will be raised.
</p>

<p class="trans-note">【
“~~生成元” という訳語は、おそらく，~HTTP用語
<a href="~RFC7230#generate">~~生成する</a>
（ `generate^en ）に由来する
— より詳細~には、~HTTP要請に対し
<a href="~RFC7230#origin-server">応答を生成した~server</a>
（ `origin server^en ）（を識別する情報）を指す。
したがって， “~~生成元” の “~~元” の読みは、
`original^en（ “~~元の” ）を意味する “もと” であり， “げん” ではない。
】</p>

<hr>

<p id="origin-2">
`生成元@
（ `origin^en ）は、次のいずれかとして与えられる：
◎
An origin is one of the following:
</p>

<dl class="def-list">
	<dt>`不透明な生成元@</dt>
	<dd>
直列化して再度~作成し直せないような，内部的な値であって（`生成元を直列化する$ときは `null^l に直列化される）、有意義な演算は，同等性を~testすることに限られる。
◎
An internal value, with no serialization it can be recreated from (it is serialized as "null" per serialization of an origin), for which the only meaningful operation is testing for equality.
</dd>
	<dt>`成分組~生成元@</dt>
	<dd>
<p>
次のものからなる（括弧内はとり得る値）：
◎
A tuple consists of:
</p>

		<ul>
			<li>
`~scheme@o（ `~scheme$url ）
◎
A scheme (a scheme).
</li>
			<li>
`~host@o （ `~host$url ）
◎
A host (a host).
</li>
			<li>
`~port@o （ `~port$url ）
◎
A port (a port).
</li>
			<li>
<p>
`~domain@o （ ~NULL または `~domain$url ）。
他が言明されない限り， ~NULL とする。
◎
A domain (null or a domain). Null unless stated otherwise.
</p>
			</li>
		</ul>

<p class="note">注記：
`生成元$は共有され得る
— 例えば、複数の`文書$間で。
加えて、`生成元$は，一般に変異しない。
`成分組~生成元$の`~domain$oに限り，それも
`document.domain$m ~APIを通してのみ，変更され得る。
◎
Origins can be shared, e.g., among multiple Document objects. Furthermore, origins are generally immutable. Only the domain of a tuple origin can be changed, and only through the document.domain API.
</p>
	</dd>
</dl>

<div class="algorithm">
<p>
`生成元$ %生成元 の
`実効~domain@
は、次に従って算出される：
◎
The effective domain of an origin origin is computed as follows:
</p>

<ol>
	<li>
~IF［
%生成元 は`不透明な生成元$である
］
⇒
~RET ~NULL
◎
If origin is an opaque origin, then return null.
</li>
	<li>
~IF［
%生成元 の`~domain$o ~NEQ ~NULL
］
⇒
~RET %生成元 の`~domain$o
◎
If origin's domain is non-null, then return origin's domain.
</li>
	<li>
~RET %生成元 の`~host$o
◎
Return origin's host.
</li>
</ol>
</div>

<p>
仕様が定義する様々な~objは，`生成元$を有するように定義される。
これらの`生成元$は、次のうち，最初に該当する項目に従って決定される：
◎
Various specification objects are defined to have an origin. These origins are determined as follows:
</p>

<dl>
	<dt>
`文書$ %文書 に対しては：
◎
For Document objects
</dt>
	<dd>
［
`新たな閲覧文脈を作成する$, および`~navi$
］~algoが、構築~時に`生成元$をアテガう。
他の場合【アテガわなかった場合？】、
`DOM$r に定義される既定の挙動が適用される。
◎
The create a new browsing context and navigation algorithms assign the origin at construction time. Otherwise, the default default behavior as defined in DOM applies. [DOM]
</dd>

	<dt>
`img$e 要素による画像に対しては：
◎
For images of img elements
</dt>
	<dd>
<p>
その`画像~data$に応じて：
</p>

		<dl class="switch">
			<dt>
`~CORS非同一-生成元$である場合：
◎
If the image data is CORS-cross-origin
◎
</dt>
			<dd>
一意かつ`不透明な生成元$
— これは、画像の作成-時にアテガわれる。
◎
A unique opaque origin assigned when the image is created.
</dd>
			<dt>
`~CORS同一-生成元$である場合：
◎
If the image data is CORS-same-origin
</dt>
			<dd>
要素の`~node文書$の`生成元$
◎
The img element's node document's origin.
</dd>
		</dl>
	</dd>

	<dt>
`~media要素$（ `audio$e ／ `video$e ）に対しては：
◎
For audio and video elements
</dt>
		<dd>
<p>
その`~media~data$に応じて：
</p>

			<dl class="switch">
			<dt>
`~CORS非同一-生成元$である場合：
◎
If the media data is CORS-cross-origin
</dt>
			<dd>
一意かつ`不透明な生成元$
— これは、~media~dataの~fetch時にアテガわれる。
◎
A unique opaque origin assigned when the media data is fetched.
</dd>
			<dt>
`~CORS同一-生成元$である場合：
◎
If the media data is CORS-same-origin
</dt>
			<dd>
要素の`~node文書$の`生成元$
◎
The media element's node document's origin.
</dd>
		</dl>
	</dd>
</dl>

<p>
他の仕様は、特定0の［
`文書$ ／ 画像 ／ `~media要素$
］の`生成元$を指定して上の定義を上書きし得る。
◎
Other specifications can override the above definitions by themselves specifying the origin of a particular Document object, image, or media element.
</p>

<hr>

<div class="algorithm">
<p>
`生成元を直列化する@
ときは、所与の
( `生成元$ %生成元 )
に対し，次を適用して得られる文字列を返す：
◎
The serialization of an origin is the string obtained by applying the following algorithm to the given origin origin:
</p>

<ol>
	<li>
~IF［
%生成元 は`不透明な生成元$である
］
⇒
~RET `null^l
◎
If origin is an opaque origin, then return "null".
</li>
	<li>
%結果 ~LET 次を順に連結した結果
⇒＃
%生成元 の`~scheme$o,
`://^l,
`~hostを直列化する$( %生成元 の`~host$o )
◎
Otherwise, let result be origin's scheme.
◎
Append "://" to result.
◎
Append origin's host, serialized, to result.
</li>
	<li>
~IF［
%生成元 の`~port$o ~EQ ~NULL
］
⇒
~RET %結果
◎
↓</li>
	<li>
~RET 次を順に連結した結果
⇒＃
%結果,
`003A^U `:^smb,
`整数を直列化する$( %生成元 の`~port$o )
◎
If origin's port is non-null, append a U+003A COLON character (:), and origin's port, serialized, to result.
◎
Return result.
</li>
</ol>
</div>

<p class="example">
`成分組~生成元$
( `https^l, `xn--maraa-rta.example^l, ~NULL, ~NULL ) 
の`直列化$oは、
`https://xn--maraa-rta.example^l
になる。
◎
The serialization of ("https", "xn--maraa-rta.example", null, null) is "https://xn--maraa-rta.example".
</p>

<p id="unicode-serialisation-of-an-origin" class="note">注記：
`生成元の~Unicode直列化^i も利用されていたが、それが広く採用されたことは，決してない。
◎
There used to also be a Unicode serialization of an origin. However, it was never widely adopted.
</p>

<hr>

<p>
2 つの`生成元$ %A, %B が
`同一-生成元@
であるとは、次のいずれかを満たすことをいう：
◎
Two origins, A and B, are said to be same origin if the following algorithm returns true:
</p>

<ul>
	<li>
［
%A, %B とも`不透明な生成元$である
］~AND［
%A ~EQ %B
］
◎
If A and B are the same opaque origin, then return true.
</li>
	<li>
［
%A, %B とも`成分組~生成元$である
］~AND［
%A, %B の ( `~scheme$o, `~host$o, `~port$o ) は各~成分ごとに一致する
］
◎
If A and B are both tuple origins and their schemes, hosts, and port are identical, then return true.
◎
Return false.
</li>
</ul>

<p>
2 つの`生成元$ %A, %B が
`同じ生成元~domain@
であるとは、次のいずれかを満たすことをいう：
◎
Two origins, A and B, are said to be same origin-domain if the following algorithm returns true:
</p>

<ul>
	<li>
［
%A, %B とも`不透明な生成元$である
］~AND［
%A ~EQ %B
］
◎
If A and B are the same opaque origin, then return true.
</li>
	<li>
<p>
［
%A, %B とも`成分組~生成元$である
］~AND［
%A, %B は次のいずれかを満たす
］：
</p>
		<ul>
			<li>
［
%A の`~domain$o ~EQ %B の`~domain$o ~NEQ ~NULL
］~AND［
%A の`~scheme$o ~EQ %B の`~scheme$o
］
</li>
			<li>
［
%A の`~domain$o ~EQ %B の`~domain$o ~EQ ~NULL
］~AND［
( %A, %B )
は`同一-生成元$である
］
</li>
		</ul>
◎
If A and B are both tuple origins, run these substeps:
• If A and B's schemes are identical, and their domains are identical and non-null, then return true.
• Otherwise, if A and B are same origin and their domains are identical and null, then return true.
◎
Return false.
	</li>
</ul>

<div class="example">

<table class="grid-table _compare-origin">
<thead><tr><th>%A ( ~scheme, ~host, ~port, ~domain )
<th>%B
<th>`同一-生成元$？
<th>`同じ生成元~domain$？
</thead><tbody>

<tr><td>(`https^l, `example.org^l, ~NULL, ~NULL)
<td>(`https^l, `example.org^l, ~NULL, ~NULL)
<td>✅
<td>✅

<tr><td>(`https^l, `example.org^l, 314, ~NULL)
<td>(`https^l, `example.org^l, 420, ~NULL)
<td>❌
<td>❌

<tr><td>(`https^l, `example.org^l, 314, `example.org^l)
<td>(`https^l, `example.org^l, 420, `example.org^l)
<td>❌
<td>✅

<tr><td>(`https^l, `example.org^l, ~NULL, ~NULL)
<td>(`https^l, `example.org^l, ~NULL, `example.org^l)
<td>✅
<td>❌

<tr><td>(`https^l, `example.org^l, ~NULL, `example.org^l)
<td>(`http^l, `example.org^l, ~NULL, `example.org^l)
<td>❌
<td>❌
</tbody></table>

</div>

<p>
2 つの`生成元$ %A, %B が
`~scheme無しで同じ~site@
であるとは、次のいずれかを満たすことをいう：
◎
Two origins, A and B, are said to be schemelessly same site if the following algorithm returns true:
</p>

<ul>
	<li>
［
%A, %B とも`不透明な生成元$である
］~AND［
%A ~EQ %B
］
◎
If A and B are the same opaque origin, then return true.
</li>
	<li>
<p>
［
%A, %B とも`成分組~生成元$である
］~AND［
( %A の`~host$o %hostA, %B の`~host$o %hostB )
は次のいずれかを満たす
］：
</p>
		<ul>
			<li>
［
( %hostA, %hostB )
は`同等な~host$である
］~AND［
%hostA の`登録-可能な~domain$ ~EQ ~NULL
］
</li>
			<li>
( %hostA の`登録-可能な~domain$, %hostB の`登録-可能な~domain$ )
は、どちらも ~NULL でない, かつ`同等な~host$である
</li>
		</ul>
◎
If A and B are both tuple origins, then:
• Let hostA be A's host, and let hostB be B's host.
• If hostA equals hostB and hostA's registrable domain is null, then return true.
• If hostA's registrable domain equals hostB's registrable domain and is non-null, then return true.
◎
Return false.
</li>
</ul>

<p>
2 つの`生成元$ %A, %B が
`同じ~site@
であるとは、次のいずれも満たすことをいう：
◎
Two origins, A and B, are said to be same site if both of the following statements are true:
</p>

<ul>
	<li>
( %A, %B )
は、`~scheme無しで同じ~site$である
◎
A and B are schemelessly same site
</li>
	<li>
<p>
次のいずれかを満たす：
</p>
		<ul>
			<li>
%A, %B とも`不透明な生成元$である
</li>
			<li>
［
%A, %B とも`成分組~生成元$である
］~AND［
%A の`~scheme$o ~EQ %B の`~scheme$o
］
</li>
		</ul>
◎
A and B are either both opaque origins, or both tuple origins with the same scheme
</li>
</ul>

<p class="note">注記：
［
`同一-生成元$, `同じ生成元~domain$
］の概念と違って、［
`~scheme無しで同じ~site$, `同じ~site$
］においては，［
`~port$o, `~domain$o
］成分は無視される。
◎
Unlike the same origin and same origin-domain concepts, for schemelessly same site and same site, the port and domain components are ignored.
</p>

<p class="warning">
`URL^cite にて
<a href="~URL1#warning-avoid-psl">説明される理由</a>から，［
`同じ~site$,
`~scheme無しで同じ~site$
］の概念は、アリなときは避けるベキである
— `同一-生成元$を検査する方が好ましい。
◎
For the reasons explained in URL, the same site and schemelessly same site concepts should be avoided when possible, in favor of same origin checks.
</p>

<div id="example-same-site" class="example">
<p>
所与の`公共~接尾辞$［
`wildlife.museum^l, `museum^l, `com^l
］および，そうでない `example.com^l に対し：
◎
Given that wildlife.museum, museum, and com are public suffixes and that example.com is not:
</p>

<table class="grid-table _compare-origin"><tbody>
<tr><th>%A ( ~scheme, ~host )
<th>%B
<th>`~scheme無しで同じ~site$？
<th>`同じ~site$？
<tr><td>(`https^l, `example.com^l)
<td>(`https^l, `sub.example.com^l)
<td>✅
<td>✅
<tr><td>(`https^l, `example.com^l)
<td>(`https^l, `sub.other.example.com^l)
<td>✅
<td>✅
<tr><td>(`https^l, `example.com^l)
<td>(`http^l, `non-secure.example.com^l)
<td>✅
<td>❌
<tr><td>(`https^l, `r.wildlife.museum^l)
<td>(`https^l, `sub.r.wildlife.museum^l)
<td>✅
<td>✅
<tr><td>(`https^l, `r.wildlife.museum^l)
<td>(`https^l, `sub.other.r.wildlife.museum^l)
<td>✅
<td>✅
<tr><td>(`https^l, `r.wildlife.museum^l)
<td>(`https^l, `other.wildlife.museum^l)
<td>❌
<td>❌
<tr><td>(`https^l, `r.wildlife.museum^l)
<td>(`https^l, `wildlife.museum^l)
<td>❌
<td>❌
<tr><td>(`https^l, `wildlife.museum^l)
<td>(`https^l, `wildlife.museum^l)
<td>❌
<td>❌
</tbody></table>

<p>
（ここでは、［
`~port$o, `~domain$o
］成分は考慮されないので省略している。）
◎
(Here we have omitted the port and domain components since they are not considered.)
</p>

<p class="trans-note">【
最後の項は、なぜ`~scheme無しで同じ~site$にならない？
】</p>
【！https://github.com/whatwg/html/pull/5287】

</div>

			<section id="sites">
<h4 title="Sites">7.5.1. ~site</h4>

<p>
`~scheme＆登録-可能な~domain@
は、
( `~scheme$url, `~domain$url )
が成す`~tuple$である。
◎
A scheme-and-registrable-domain is a tuple of a scheme and a domain.
</p>

<p>
`~site@
は、次に挙げるいずれかである
⇒＃
`不透明な生成元$ ／
`成分組~生成元$であって, その`~host$oの`登録-可能な~domain$ ~EQ ~NULL であるもの ／
`~scheme＆登録-可能な~domain$
◎
A site is an opaque origin, a tuple origin whose host's registrable domain is null, or a scheme-and-registrable-domain.
</p>

<div class="algorithm">
<p>
`~siteを得る@
ときは、所与の
( 生成元 %生成元 )
に対し，次を走らす：
◎
To obtain a site, given an origin origin, run these steps:
</p>
<ol>
	<li>
~IF［
%生成元 は`不透明な生成元$である
］
⇒
~RET %生成元
◎
If origin is an opaque origin, then return origin.
</li>
	<li>
%~domain ~LET %生成元 の`~host$oの`登録-可能な~domain$
◎
↓</li>
	<li>
~IF［
%~domain ~EQ ~NULL
］
⇒
~RET %生成元
◎
If origin's host's registrable domain is null, then return origin.
</li>
	<li>
~RET ( %生成元 の`~scheme$o, %~domain )
◎
Return (origin's scheme, origin's host's registrable domain).
</li>
</ol>
</div>

			</section>
			<section id="relaxing-the-same-origin-restriction">
<h3 title="Relaxing the same-origin restriction">7.5.2. 同一-生成元による制約の緩め方</h3>

<dl class="domintro">
	<dt>%document . `domain$m [ = %domain ]</dt>
	<dd>
~security検査~用に利用される現在の~domainを返す。
◎
Returns the current domain used for security checks.
</dd>
	<dd>
下位domainを除去するような値に設定して，`生成元$の`~domain$oを変更できる
— そうすることにより，
同じ~domainにおける他の下位domain上の~pageと互いに~accessできるようになる（それらも，同じことをしたならば）。
（ただし，~sandbox化された `iframe$e においては設定できない。）
◎
Can be set to a value that removes subdomains, to change the origin's domain to allow pages on other subdomains of the same domain (if they do the same thing) to access each other. (Can't be set in sandboxed iframes.)
</dd>
</dl>

<div class="algorithm">
<p>
所与の文字列 %~host接尾辞~文字列 は`~host$x %元~host に対し
`登録-可能な~domain接尾辞または同等@
であるかどうか決定するときは、次を走らす：
◎
To determine if a string hostSuffixString is a registrable domain suffix of or is equal to a host originalHost, run these steps:
</p>

<ol>
	<li>
~IF［
%~host接尾辞~文字列 ~EQ 空~文字列
］
⇒
~RET ~F
◎
If hostSuffixString is the empty string, then return false.
</li>
	<li>
%~host ~LET `~host構文解析器$( %~host接尾辞~文字列 )
◎
Let host be the result of parsing hostSuffixString.
</li>
	<li>
~IF［
%~host ~EQ `失敗^i
］
⇒
~RET ~F
◎
If host is failure, then return false.
</li>
	<li>
<p>
~IF［
( %~host, %元~host )
は`同等な~host$でない
］：
◎
If host does not equal originalHost, then:
</p>
		<ol>
			<li>
<p>
~IF［
%~host , %元~host のいずれかは`~domain$urlでない 
］
⇒
~RET ~F
◎
If host or originalHost is not a domain, then return false.
</p>

<p class="note">注記：
すなわち、
`~IPv4~address$ ／ `~IPv6~address$
による`~host$xは除外する。
◎
This excludes hosts that are an IPv4 address or an IPv6 address.
</p>
			</li>
			<li>
~IF［［
%~host に `002E^U `.^smb を接頭した結果
］は %元~host の尾部に<!-- 正確に＊ -->合致しない
］
⇒
~RET ~F
◎
If host, prefixed by a U+002E FULL STOP (.), does not exactly match the end of originalHost, then return false.
</li>
			<li>
~IF［
( %~host, %~host の`公共~接尾辞$ )
は`同等な~host$である `URL$r
］
⇒
~RET ~F
◎
If host equals host's public suffix, then return false. [URL]
</li>
		</ol>
	</li>
	<li>
~RET ~T
◎
Return true.
</li>
</ol>
</div>

<p class="idl-def">
`Document$I 上の
`domain@m
属性は、次で定義される：
</p>

<ul>
	<li>
<p>
取得子は、次を走らすモノトスル：
◎
The domain attribute's getter must run these steps:
</p>
		<ol>
			<li>
%実効~domain ~LET 此れの`生成元$の`実効~domain$
◎
Let effectiveDomain be this Document object's origin's effective domain.
</li>
			<li>
~IF［
%実効~domain ~EQ ~NULL
］
⇒
~RET 空~文字列
◎
If effectiveDomain is null, then return the empty string.
</li>
			<li>
~RET `~hostを直列化する$( %実効~domain )
◎
Return effectiveDomain, serialized.
</li>
		</ol>
	</li>
	<li>
<p>
設定子は、次を走らすモノトスル：
◎
The domain attribute's setter must run these steps:
</p>
		<ol>
			<li>
~IF［
此れが`属する閲覧文脈$ ~EQ ~NULL
］
⇒
~THROW `SecurityError$E
◎
If this Document object's browsing context is null, then throw a "SecurityError" DOMException.
</li>
			<li>
~IF［
`~document-domain$sbox ~IN
此れにて`作動中の~sandbox法~flag集合$
］
⇒
~THROW `SecurityError$E
◎
If this Document object's active sandboxing flag set has its sandboxed document.domain browsing context flag set, then throw a "SecurityError" DOMException.
</li>
			<li>
~IF［
此れには `document-domain$l 特能の`利用は許容されて$いない
］
⇒
~THROW `SecurityError$E
◎
If this Document object is not allowed to use the "document-domain" feature, then throw a "SecurityError" DOMException.
</li>
			<li>
%実効~domain ~LET 此れの`生成元$の`実効~domain$
◎
Let effectiveDomain be this Document object's origin's effective domain.
</li>
			<li>
~IF［
%実効~domain ~EQ ~NULL
］
⇒
~THROW `SecurityError$E
◎
If effectiveDomain is null, then throw a "SecurityError" DOMException.
</li>
			<li>
~IF［
所与の値は %実効~domain に対し`登録-可能な~domain接尾辞または同等$でない
］
⇒
~THROW `SecurityError$E
◎
If the given value is not a registrable domain suffix of and is not equal to effectiveDomain, then throw a "SecurityError" DOMException.
</li>
			<li>
此れの`生成元$の`~domain$o ~SET `~host構文解析器$( 所与の値 )
◎
Set this Document object's origin's domain to the result of parsing the given value.
</li>
		</ol>
	</li>
</ul>

<p class="note">注記：
`domain$m 属性は、同じ~domain上の異なる~host上の~pageどうしが互いの
DOM に~accessすることを可能化するために利用される。
◎
The document.domain attribute is used to enable pages on different hosts of a domain to access each other's DOMs.
</p>

<p class="warning">
他者と~hostを共有しているときは、`document.domain$m 属性を利用しないこと。
信用できない第三者主体が［
同じ~IP~address上の~portだけ異なる~HTTP~server
］を~hostできる場合、［
通常は同じ~host上の異なる~siteどうしを保護する，同一-生成元による保護
］は，失敗することになる
— `document.domain$m 属性が利用されて以降は、生成元の比較-時に，その~portは無視されるので。
◎
Do not use the document.domain attribute when using shared hosting. If an untrusted third party is able to host an HTTP server at the same IP address but on a different port, then the same-origin protection that normally protects two different sites on the same host will fail, as the ports are ignored when comparing origins after the document.domain attribute has been used.
</p>

			</section>
		</section>
		<section id="sandboxing">
<h2 title="Sandboxing">7.6. ~sandbox法</h2>

<p>
`~sandbox法~flag集合@
は、以下に挙げる各種~flagのうち，いくつかからなる集合である。
この集合は、それが含む各種~flagを通して，信用できない資源が持ち得る能を制約するために利用される：
◎
A sandboxing flag set is a set of zero or more of the following flags, which are used to restrict the abilities that potentially untrusted resources have:
</p>

【！ flag ~IN ~sandbox法~flag集合 ↔ flag ~EQ ~T】

<p class="trans-note">【
“<a href="https://en.wikipedia.org/wiki/Sandbox_(computer_security)">~sandbox</a>”
—  “（こどもの）砂場” （ “監獄” を和らげた語（一般に，より制約も緩い））。
】【
以下に現れる各種
“`X^sbox”
は、
“［
X について，閲覧文脈を~sandbox化する（ X の機能を抑止する）
］ことを指示する~flag”
と解釈する
— そのように解釈し易いよう、この訳では，関数的に記している。
】【
以下に現れる “内容” とは、［
これらの~flagが適用される閲覧文脈
］内の内容を指す。
】</p>

<dl>
	<dt>
`~navi@sbox
◎
The sandboxed navigation browsing context flag
</dt>
	<dd>
<p>
この~flagは、~sandbox化されている当の閲覧文脈を %B とするとき，
次に挙げるもの以外の`閲覧文脈$ %C に対しては，
%B の内容が %C を
<a href="~NAVI#sandboxLinks">~navigateするのを防止する</a>
：
</p>
		<ul>
			<li>
%B 自身
</li>
			<li>
%B が内側に更に入子にしている閲覧文脈
</li>
			<li>
%B が開いた`補助~閲覧文脈$（これは、`補助~navi$sboxにより保護される）†
</li>
			<li>
%B の`~top-level閲覧文脈$（これは、
`利用者~作動化~top-level~navi$sbox,
`非~利用者~作動化~top-level~navi$sbox
により保護される）
</li>
		</ul>
◎
This flag prevents content from navigating browsing contexts other than the sandboxed browsing context itself (or browsing contexts further nested inside it), auxiliary browsing contexts (which are protected by the sandboxed auxiliary navigation browsing context flag defined next), and the top-level browsing context (which is protected by the sandboxed top-level navigation without user activation browsing context flag and sandboxed top-level navigation with user activation browsing context flag defined below).
</dd>
	<dd>†
この制約にもかかわらず，［
`補助~navi$sbox ~NIN `~sandbox法~flag集合$
］の下では、ある種の事例では，新たな`~top-level閲覧文脈$として
%~popup 【すなわち、`補助~閲覧文脈$】を開くことが許容される。
そのような %~popup の作成-時には、それを作成した`閲覧文脈$が，
%~popup の
`許可-済み~navigator@††
として設定される
— それは、（ ~naviに関して~sandbox化されていても）実際には %~popup を~navigateすることが許可される。
（他の場合、 %~popup に対する~naviは，`~navi$sboxにより防止される。）
◎
If the sandboxed auxiliary navigation browsing context flag is not set, then in certain cases the restrictions nonetheless allow popups (new top-level browsing contexts) to be opened. These browsing contexts always have one permitted sandboxed navigator, set when the browsing context is created, which allows the browsing context that created them to actually navigate them. (Otherwise, the sandboxed navigation browsing context flag would prevent them from being navigated even if they were opened.)
</dd>
	<dd class="trans-note">【††
“`one permitted sandboxed navigator^en”
— この “`one^en” は、［
%~popup に対し`許可-済み~navigator$とされるものは、 1 個だけあること
］を表していると見受けられる。
】</dd>

	<dt>
`補助~navi@sbox
◎
The sandboxed auxiliary navigation browsing context flag
</dt>
	<dd>
この~flagは、内容が
<a href="~BROWSERS#sandboxWindowOpen">新たな補助~閲覧文脈を作成するのを防止する</a>
—
例えば［
`target$a 属性 ／
`window.open()$m ~method
］を利用して。
◎
This flag prevents content from creating new auxiliary browsing contexts, e.g. using the target attribute or the window.open() method.
</dd>

	<dt>`非~利用者~作動化~top-level~navi@sbox</dt>
	<dt>`利用者~作動化~top-level~navi@sbox</dt>
	<dd>
両~flagとも、内容が その`~top-level閲覧文脈$を［
<a href="~NAVI#sandboxLinks">~navigateするのを防止する</a> ／
<a href="~WINDOW#sandboxClose">閉じるのを防止する</a>
］。
これらは順に、~sandbox化されている閲覧文脈の`現在の~window$の`一過な作動化$が［
~F のとき, ~T のとき
］に限り，アタられる。
◎
The sandboxed top-level navigation without user activation browsing context flag
◎
This flag prevents content from navigating their top-level browsing context and prevents content from closing their top-level browsing context. It is consulted only when the sandboxed browsing context's WindowProxy's [[Window]] value does not have transient activation.
</dd>
	<dd>
両~flagとも、影響するのは`~top-level閲覧文脈$に限られる
— ［
この~flag（`一過な作動化$に応じて適切な方） ~NIN `~sandbox法~flag集合$
］の下では、内容は，その`~top-level閲覧文脈$を~navigateできる。
が、他の`閲覧文脈$は，依然として他の~flag
— `~navi$sboxや, （場合によっては）`補助~navi$sbox —
により保護される。
◎
When the sandboxed top-level navigation without user activation browsing context flag is not set, content can navigate its top-level browsing context, but other browsing contexts are still protected by the sandboxed navigation browsing context flag and possibly the sandboxed auxiliary navigation browsing context flag.
◎
The sandboxed top-level navigation with user activation browsing context flag
◎
This flag prevents content from navigating their top-level browsing context and prevents content from closing their top-level browsing context. It is consulted only when the sandboxed browsing context's WindowProxy's [[Window]] value has transient activation.
◎
As with the sandboxed top-level navigation without user activation browsing context flag, this flag only affects the top-level browsing context; if it is not set, other browsing contexts might still be protected by other flags.
</dd>

	<dt>
`~plugin@sbox
◎
The sandboxed plugins browsing context flag
</dt>
	<dd>
この~flagは、内容が［
<a href="~HEembed#sandboxPluginEmbed">`embed^e 要素を利用して</a> ／
<a href="~HEembed#sandboxPluginObject">`object^e 要素を利用して</a>
］, あるいは［
それらが`入子にしている閲覧文脈$に対する
<a href="~NAVI#sandboxPluginNavigate">~naviを通して</a>
］~pluginを~instance化するのを防止する
— それらの`~plugin$を`~secure化でき$ない限り。
◎
This flag prevents content from instantiating plugins, whether using the embed element, the object element, or through navigation of their nested browsing context, unless those plugins can be secured.
</dd>

	<dt>
`生成元@sbox
◎
The sandboxed origin browsing context flag
</dt>
	<dd>
この~flagは、
<a href="~BROWSERS#sandboxOrigin">内容を一意な生成元~内に強制する</a>
— したがって，内容が［
同じ`生成元$からの他の内容
］に~accessするのを防止する。
◎
This flag forces content into a unique origin, thus preventing it from accessing other content from the same origin.
</dd>
	<dd>
この~flagはまた、~scriptが `document.cookie^m ~IDL属性を
<a href="~HTMLdom#sandboxCookies">読取る／書込むのを防止する</a>
ことに加え， `localStorage$m への~accessも阻止する。
◎
This flag also prevents script from reading from or writing to the document.cookie IDL attribute, and blocks access to localStorage.
</dd>

	<dt>
`~form@sbox
◎
The sandboxed forms browsing context flag
</dt>
	<dd>
この~flagは、
<a href="~HTMLforms#sandboxSubmitBlocked">~form提出を阻止する</a>
。
◎
This flag blocks form submission.
</dd>

	<dt>
`~pointer~lock@sbox
◎
The sandboxed pointer lock browsing context flag
</dt>
	<dd>
この~flagは、 Pointer Lock ~APIを不能化する。
`POINTERLOCK$r
◎
This flag disables the Pointer Lock API. [POINTERLOCK]
</dd>

	<dt>
`~script@sbox
◎
The sandboxed scripts browsing context flag
</dt>
	<dd>
この~flagは、
<a href="~WAPI#sandboxScriptBlocked">~script実行を阻止する</a>。
◎
This flag blocks script execution.
</dd>

	<dt>
`自動~特能@sbox
◎
The sandboxed automatic features browsing context flag
</dt>
	<dd>
<p >
この~flagは、次に挙げるような自動的に誘発される特能を阻止する：
</p>

<ul ><li><a href="~HEmedia#attr-media-autoplay">動画を自動的に再生する</a>
</li><li><a href="~HTMLinteraction#attr-fe-autofocus">~form~controlを自動的に~focusする</a>
</li></ul>

◎
This flag blocks features that trigger automatically, such as automatically playing a video or automatically focusing a form control.
</dd>

	<dt>
`~document-domain@sbox
◎
The sandboxed document.domain browsing context flag
</dt>
	<dd>
この~flagは、 `document.domain$m 設定子の利用を防止する。
◎
This flag prevents content from using the document.domain setter.
</dd>

	<dt>
`~sandboxは補助~閲覧文脈に伝播する~flag@
◎
The sandbox propagates to auxiliary browsing contexts flag
</dt>
	<dd>
この~flagは、［
内容にて`作動中の~sandbox法~flag集合$
］を［
内容が作成する`補助~閲覧文脈$
］に継承させることにより，内容が ~sandboxから逃れるのを防止する。
◎
This flag prevents content from escaping the sandbox by ensuring that any auxiliary browsing context it creates inherits the content's active sandboxing flag set.
</dd>

	<dt>
`~sandbox化( ~modal )~flag@
◎
The sandboxed modals flag
</dt>
	<dd>
<p>
この~flagは、［
内容が，次のいずれかの特能を利用して~modal~dialogを生産する
］のを防止する：
◎
This flag prevents content from using any of the following features to produce modal dialogs:
</p>

<ul><li>`window.alert()$m
</li><li>`window.confirm()$m
</li><li>`window.print()$m
</li><li>`window.prompt()$m
</li><li>`beforeunload$et ~event
</li></ul>

	</dd>

	<dt>
`方位~lock@sbox
◎
The sandboxed orientation lock browsing context flag
</dt>
	<dd>
この~flagは、~screen方位を~lockする能を不能化する。
`SCREENORIENTATION$r
◎
This flag disables the ability to lock the screen orientation. [SCREENORIENTATION]
</dd>
	<dt>
`呈示@sbox
◎
The sandboxed presentation browsing context flag
</dt>
	<dd>
この~flagは、 Presentation API を不能化する。
`PRESENTATION$r
◎
This flag disables the Presentation API. [PRESENTATION]
</dd>

	<dt>
`~download@sbox
◎
The sandboxed downloads browsing context flag
</dt>
	<dd>
この~flagは、内容が次のいずれかを通して~downloadを起動したり~instance化することを防止する
⇒＃
`~hyperlinkを~downloadする$／
`~navigate応答を処理する$ときに`~downloadとして$取扱われるもの
◎
This flag prevents content from initiating or instantiating downloads, whether through downloading hyperlinks or through navigation that gets handled as a download.
</dd>
</dl>

<div class="algorithm">
<p>
`~sandbox法~指令を構文解析する@
手続きは、所与の (
文字列 %入力,
`~sandbox法~flag集合$ %出力
)
に対し，次を走らすモノトスル：
◎
When the user agent is to parse a sandboxing directive, given a string input, a sandboxing flag set output, it must run the following steps:
</p>

<ol>
	<li>
%~tokenたち ~LET `~ASCII空白で分割する$( %入力 )
◎
Split input on ASCII whitespace, to obtain tokens.
</li>
	<li>
%出力 を空にする
◎
Let output be empty.
</li>
	<li>

<p>
以下に挙げる各種~flagを，対応する記述の条件が満たされるならば
%出力 に追加する：
◎
Add the following flags to output:
</p>
		<ul>
			<li>
`~navi$sbox
⇒
無条件
◎
The sandboxed navigation browsing context flag.
</li>
			<li>
`補助~navi$sbox
⇒
`allow-popups@v ~NIN %~tokenたち
◎
The sandboxed auxiliary navigation browsing context flag, unless tokens contains the allow-popups keyword.
</li>
			<li>
`非~利用者~作動化~top-level~navi$sbox
⇒
`allow-top-navigation@v
~NIN %~tokenたち
◎
The sandboxed top-level navigation without user activation browsing context flag, unless tokens contains the allow-top-navigation keyword.
</li>
			<li>
<p>
`利用者~作動化~top-level~navi$sbox
⇒
［
`allow-top-navigation-by-user-activation@v
~NIN %~tokenたち
］~AND［
`allow-top-navigation$v ~NIN %~tokenたち
］
◎
The sandboxed top-level navigation with user activation browsing context flag, unless tokens contains either the allow-top-navigation-by-user-activation keyword or the allow-top-navigation keyword.
</p>

<p class="note">注記：
したがって、［
`allow-top-navigation$v ~IN %~tokenたち
］の場合、
`allow-top-navigation-by-user-activation$v
の効果はなくなる。
この理由から、両~keywordとも指定するのは，文書~適合性の~errorになる。
◎
This means that if the allow-top-navigation is present, the allow-top-navigation-by-user-activation keyword will have no effect. For this reason, specifying both is a document conformance error.
</p>
			</li>
			<li>
`~plugin$sbox
⇒
無条件
◎
The sandboxed plugins browsing context flag.
</li>
			<li>
<p>
`生成元$sbox
⇒
`allow-same-origin@v ~NIN %~tokenたち
◎
The sandboxed origin browsing context flag, unless the tokens contains the allow-same-origin keyword.
</p>

<div class="note">

<p>注記：
`allow-same-origin$v ~keywordは、次の 2 つの事例に意図されている：
◎
The allow-same-origin keyword is intended for two cases.
</p>

<ul>
	<li>
<p>
一つは、同じ~siteからの内容を，次のように~sandbox化するための利用：
</p>

<ul ><li>内容による~scriptingは不能化する。
</li><li>内容が成す~DOMへの~accessは許容する。
</li></ul>
◎
First, it can be used to allow content from the same site to be sandboxed to disable scripting, while still allowing access to the DOM of the sandboxed content.
</li>
	<li>
<p>
もう一つは、第三者主体~siteからの内容を埋込むときに，その内容を次のように~sandbox化するための利用：
</p>

<ul ><li>その~siteが ~popupを開く, 等々は防止する。
</li><li>［
埋込まれた~pageが、~dataを格納するための~database~API, 等を利用して，その出自の~siteと通信する
］ことは防止しない。
</li></ul>

◎
Second, it can be used to embed content from a third-party site, sandboxed to prevent that site from opening popups, etc, without preventing the embedded page from communicating back to its originating site, using the database APIs to store data, etc.
</li>
</ul>
</div>

			</li>
			<li>
`~form$sbox
⇒
`allow-forms@v ~NIN %~tokenたち
◎
The sandboxed forms browsing context flag, unless tokens contains the allow-forms keyword.
</li>
			<li>
`~pointer~lock$sbox
⇒
`allow-pointer-lock@v ~NIN %~tokenたち
◎
The sandboxed pointer lock browsing context flag, unless tokens contains the allow-pointer-lock keyword.
</li>
			<li>
`~script$sbox
⇒
`allow-scripts@v ~NIN %~tokenたち
◎
The sandboxed scripts browsing context flag, unless tokens contains the allow-scripts keyword.
</li>
			<li>
<p>
`自動~特能$sbox
⇒
`allow-scripts$v ~NIN %~tokenたち
◎
The sandboxed automatic features browsing context flag, unless tokens contains the allow-scripts keyword (defined above).
</p>

<p class="note">注記：
この~flagは、`~script$sboxと同じ~keywordで緩められる
— この~flagにより許容されなくなる宣言的な特能は、~scriptが可能化されている下では自明にアリになるので。
◎
This flag is relaxed by the same keyword as scripts, because when scripts are enabled these features are trivially possible anyway, and it would be unfortunate to force authors to use script to do them when sandboxed rather than allowing them to use the declarative features.
</p>
			</li>
			<li>
`~document-domain$sbox
⇒
無条件
◎
The sandboxed document.domain browsing context flag.
</li>
			<li>
`~sandboxは補助~閲覧文脈に伝播する~flag$
⇒
`allow-popups-to-escape-sandbox@v ~NIN %~tokenたち
◎
The sandbox propagates to auxiliary browsing contexts flag, unless tokens contains the allow-popups-to-escape-sandbox keyword.
</li>
			<li>
`~sandbox化( ~modal )~flag$
⇒
`allow-modals@v ~NIN %~tokenたち
◎
The sandboxed modals flag, unless tokens contains the allow-modals keyword.
</li>
			<li>
`方位~lock$sbox
⇒
`allow-orientation-lock@v ~NIN %~tokenたち
◎
The sandboxed orientation lock browsing context flag, unless tokens contains the allow-orientation-lock keyword.
</li>
			<li>
`呈示$sbox
⇒
`allow-presentation@v ~NIN %~tokenたち
◎
The sandboxed presentation browsing context flag, unless tokens contains the allow-presentation keyword.
</li>
			<li>
`~download$sbox
⇒
`allow-downloads@v ~NIN %~tokenたち
◎
The sandboxed downloads browsing context flag, unless tokens contains the allow-downloads keyword.
</li>
		</ul>
	</li>
</ol>
</div>

<hr>

<p>
`~sandbox法~flag集合$には、次に挙げる種類のものがある：
</p>

<ul>
	<li>
<p>
各`~top-level閲覧文脈$は、
`~popup~sandbox法~flag集合@
を有する
— それは：
</p>

<ul ><li>`閲覧文脈$の作成-時には、空~集合になるモノトスル。
</li><li>`閲覧文脈を選ぶ規則$により拡充される。
</li></ul>
◎
Every top-level browsing context has a popup sandboxing flag set, which is a sandboxing flag set. When a browsing context is created, its popup sandboxing flag set must be empty. It is populated by the rules for choosing a browsing context.
</li>
	<li>
<p>
各［
`iframe$e 要素が`入子にしている閲覧文脈$
］は、
`~iframe~sandbox法~flag集合@
を有する
— それは：
</p>

<ul ><li>所与の特定0の時点に，どの~flagが含められるかは、
`iframe$e 要素の`sandbox$a 属性により決定される。
</li></ul>

◎
Every browsing context that is an iframe element's nested browsing context has an iframe sandboxing flag set, which is a sandboxing flag set. Which flags in an iframe sandboxing flag set are set at any particular time is determined by the iframe element's sandbox attribute.
</li>
	<li>
<p>
各`文書$は、
`作動中の~sandbox法~flag集合@
を有する
— それは：
</p>

<ul><li>`文書$の作成-時には、空~集合になるモノトスル。
</li><li>`~navi$~algoにより拡充される。
</li></ul>

◎
Every Document has an active sandboxing flag set, which is a sandboxing flag set. When the Document is created, its active sandboxing flag set must be empty. It is populated by the navigation algorithm.
</li>
	<li>
<div class="p">
<p>
`~navi$~algoにより得られる各~資源は、
`強制d~sandbox法~flag集合@
を有する
— それは：
</p>

<ul ><li>既定では空~集合とする。
</li><li>他の仕様は，ある種の~flagをこの集合に入れるように定義し得る。
</li></ul>

◎
Every resource that is obtained by the navigation algorithm has a forced sandboxing flag set, which is a sandboxing flag set. A resource by default has no flags set in its forced sandboxing flag set, but other specifications can define that certain flags are set.
</div>

<p class="note">注記：
`強制d~sandbox法~flag集合$は、特に，
Content Security Policy `CSP$r により利用される。
◎
In particular, the forced sandboxing flag set is used by Content Security Policy. [CSP]
</p>
	</li>
</ul>

<hr>

<div class="algorithm">
<p>
`~sandbox法~flag群を決定する@
ときは、所与の
( `閲覧文脈$ %B )
に対し、次を走らす：
◎
To determine sandboxing flags for a browsing context browsing context, return the union of the flags that are present in the following sandboxing flag sets:
</p>

<ol>
	<li>
%~flag集合 ~LET 空~集合
◎
↓</li>
	<li>
~IF［
%B は`~top-level閲覧文脈$である
］
⇒
%~flag集合 に［
%B の`~popup~sandbox法~flag集合$
］を成すすべての~flagを追加する
◎
If browsing context is a top-level browsing context, then: the flags set on the popup sandboxing flag set.
</li>
	<li>
~IF［
%B は ある `iframe$e 要素が`入子にしている閲覧文脈$である
］
⇒
%~flag集合 に［
%B の`~iframe~sandbox法~flag集合$
］を成すすべての~flagを追加する
◎
If browsing context is an iframe element's nested browsing context, then: the flags set on the iframe sandboxing flag set.
</li>
	<li>
~IF［
%B は`子~閲覧文脈$である
］
⇒
%~flag集合 に［
%B の`容器~文書$にて`作動中の~sandbox法~flag集合$
］を成すすべての~flagを追加する
◎
If browsing context is a child browsing context, then: the flags set on browsing context's container document's active sandboxing flag set.
</li>
	<li>
~RET %~flag集合
◎
↑↑</li>
</ol>
</div>

		</section>
</main>
