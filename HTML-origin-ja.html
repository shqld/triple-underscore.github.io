<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>HTML Standard — Origin, Sandboxing（日本語訳）</title>
<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-whatwg.css" type="text/css" />
<script src="common0.js" ></script>
<script src="common1.js" async></script>

<style type="text/css">


@supports (display: grid) {

.layout-grid > tr {
	display: grid;
	border-bottom: solid silver medium;
}

.layout-grid > tr > * {
	display: block;
	border: solid silver thin;
	border-width: thin 0 0 0;
}

#_compare-origin {
	display: block;
}

#_compare-origin > .layout-grid > tr {
	grid-template-areas:
		"A A"
		"B B"
		"同一 同じ"
	;
	grid-template-columns: 12em 12em;
}

#_compare-origin > .layout-grid > tr > *:nth-child(1) {
	grid-area: A;
	white-space: nowrap;
}

#_compare-origin > .layout-grid > tr > *:nth-child(2) {
	grid-area: B;
	white-space: nowrap;
}

#_compare-origin > .layout-grid > tr > *:nth-child(3) {
	grid-area: 同一;
}

#_compare-origin > .layout-grid > tr > *:nth-child(4) {
	grid-area: 同じ;
}

}

</style>

<script>

Util.ready = function(){
	const source_data = {
		toc_main: 'MAIN',
		levels: 'ほぼ英語:英語主体:漢字+英語:漢字主体:カナ主体',
		level: 3,
		generate: expand
	};
	Util.switchWordsInit(source_data);
}

function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	return this.html.replace(
		/%[\w~一-鿆あ-ん]+|`(.+?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){

if(!key) {//%
	return '<var>' + match.slice(1) + '</var>';
}

let text = key;
let href = '';
let classname = class_map[klass];
let tag = tag_map[klass];

switch(klass){
case 'r': // ref
	text = '[' + key + ']';
	href = 'HTML-references.html#refs' + key;
	break;
case 'l': // literal
	text = '"<code class="literal">' + text + '</code>"';
	break;
case 'm': // IDL member
	const n = text.indexOf('(');
	if(n > 0){
		key = text.slice(0, n);
		text = key + text.slice(n).replace(/\w+/g, '<var>$&</var>');
	}
	break;
case 'sc': // url scheme
	text = text.replace(/_/, ':');
	break;
case 'sbox': // sandboxing flags
	text = '閲覧文脈~sandbox化( ' + key + ' )~flag';
	break;
case 'U': // Unicode code point
	text = 'U+' + key;
	break;
case 'smb': //
	text = '(<span class="char-symbol">' + text + '</span>)'
	break;
}

if(tag) {
	text = '<' + tag + (
		classname ? ' class="' + classname + '"' : ''
	) + '>' + text + '</' + tag + '>';
}


if(indicator !== '^'){
	href = link_map[klass ? (klass + '.' + key) : key] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = '<a href="' + href + '">' + text + '</a>';
		break;
	case '@':
		text = '<dfn id="' + href.slice(1) + '">' + text + '</dfn>';
		break;
	}
}

return text;


	}
}

</script>

<script type="text/plain" id="_source_data">


●●options

spec_date:2019-02-22
trans_update:2019-02-23
source_checked:190222
page_state_key:HTML
spec_status:LS
original_url:https://html.spec.whatwg.org/multipage/origin.html
site_nav:browsers,security,html
nav_prev:WINDOW
nav_next:HISTORY
trans_1st_pub:2016-07-12


●●class_map
e:element
a:attr
et:event-type
sc:scheme
E:error
U:code-point
v:value

●●tag_map
I:code
m:code
c:code
e:code
a:code
sc:code
et:code
E:code
U:span
v:code
i:i

●●words_table



API:
ASCII:
	COLON:
DOM:
Unicode:
Web:
data::::データ
database::::データベース
error::::エラー
flag::::フラグ
keyword::::キーワード
pointer::::ポインタ


iframe-srcdoc:iframe srcdoc
	unfortunate
上書き:override:~
不能化-:disable:~

	●仕様（動詞
定義-:define:~
定義:definition:~
実装-:implement:~
指定-:specify:~
指示-:indicate:~
挙動:behavior:ふるまい
決定-:determine:~
無視-:ignore:~
相違-:differ:~
見做され:assume され:~
解釈-:interpret:~
記述-:describe:~
記述:description:~
試験-:test:~
利用-:use:~
利用者:user:~
制約-:restrict:~
制約:restriction:~
影響-:affect:~
意味:meaning:~
意図-:intend:~
見なさ:consider さ:~
諮問され:consult され:あたられ
採用-:adopt:~

	●仕様
platform::::プラットフォーム
algo:algorithm:::アルゴリズム
model::::モデル
一意:unique:~
一般:general:~
不透明な:opaque:~
不透明:opaque:~
事例:case:~
仕様:spec:~
基礎的な:fundamental:~
	場合によっては:possibly
実際:actual:~
	actually
既定の:default:~
既定:default:~
有意義な:meaningful:~


標準:standard:~
特定0の:particular:ある特定の
特色機能:feature:~
	やりとり:interact:~
	通常は:normal では:~
適用-:apply:~
方式:manner:~
条件:condition:~
能:ability:~
自明:trivial:~
適切:appropriate:~
効果:effect:~
手続き:steps:~
	-:substeps
理由:reason:~
適合性:conformance:~
言明-:state:~
アリ:possible:可能

	●network／保安
CORS:
	CORS-cross-origin
	CORS-same-origin
IPv4:
IPv6:
HTTP:
IP:
address::::アドレス
逃れる:escape する:~:::エスケープする
fetch:
URL:
domain::::ドメイン
下位domain:subdomain:::下位ドメイン
host::::ホスト
port::::ポート
scheme::::スキーム
navigate::::ナビゲート
navi:navigation:::ナビ
navigator::::ナビゲータ
network::::ネットワーク
server::::サーバ
site::::サイト
suffix:

保安化-:secure に::~:セキュア化
保安:security::~:セキュリティ
sandbox::::サンドボックス
	~sandbox法:sandboxing
	~sandbox化:sandboxed
第三者主体:third-party:~
資源:resource::~:リソース
通信-:communicate:~
隔離-:isolate:~
保護-:protect:~
保護:protection:~
信用-:trust:~
	信用できない:untrusted
敵対的:hostile:~
指令:directive::~::ディレクティブ
権限:authority:~
阻止-:block::~::ブロック
強制-:force:~
強制:forced:~
許可-:permit:~
	許可-済み:permitted
登録-:register:~
	登録-可能な:registrable
要請:request::~::リクエスト
応答:response::~::レスポンス
公共接尾辞:public suffix::~

	●環境 ／ 閲覧
設定子:setter:~
設定群:settings:~
現在の:current:~
現任の:incumbent:~

top-level::::トップレベル
閲覧文脈:browsing context::~
補助:auxiliary::~
生成元:origin::~::オリジン
同一-:same-::~
非同一-:cross-::~::クロス

成分:component:~
成分組:tuple:~
頁:page:::ページ
入子に:nest:入れ子に
入子の:nested:入れ子の
埋込まれ:embed され:埋め込まれ
埋込む:embed する:埋め込む
閉じる:close する::~
	閉じるとき~closing:
開く:open する::~
開いた:open した::~
	開ける:~openでき::~

親:parent:~
容器:container:::コンテナ
文書:document:~

作動中の:active な::~::アクティブな
作動化:activation::~::アクティブ化

	-:back

	●IDL / event
event::::イベント
内部的:internal:~
method::::メソッド
IDL:
access::::アクセス
instance::::インスタンス
interface::::インタフェース
lock::::ロック
node::::ノード
obj:object:::オブジェクト
script::::スクリプト
scripting::::スクリプト処理
window::

例外:exception:~
取得子:getter:~
呼出され:invoke され:呼び出され
	invoking
初期:initial:~

	~~投出:raise
属性:attribute:~

	●UI
	around:
dialog::::ダイアログ
focus::::フォーカス
form::::フォーム
media::::メディア
modal::::モーダル
plugin::::プラグイン
popup:
	~scroll用:scrolling
	~tab付き:tabbed
動画:video::~::ビデオ
再生-:play:~
方位:orientation:~
画像:image:~

form::::フォーム
control::::コントロール
	制御
	Control key
呈示:presentation:~

	●構文
	数:number:~
整数:integer:~
空白:whitespace:~
文字列:string:~
構文解析-:parse::~::パース
構文解析器:parser::~::パーサ
空:empty:~
分割-:split:~
	過ぎない:past
	-:頭部の
	先頭の:leading:~

直列化-:serialize::~::シリアル化
直列化:serialization::~::シリアル化

接頭-:prefix:~

	●未分類（動詞
作成-:create:~
伝播-:propagate:~
出自の:originating:~
共有-:share:~
処理:processing:~
変異-:mutate:~
	変異しない:immutable
動作者:actor:~
	getting
可能化-:enable:~
合致-:match:~
変更-:change:~
失敗-:fail:~
失敗:failure:~
実行:execution:~
拡充-:populate:~
格納-:store:~
検査:check:~
比較-:compare:~
比較:comparison:~
演算:operation:~
生成-:generate:~
生産-:produce:~
継承-:inherit:~
設定-:set:~
許容-:allow:~
試行-:try:~
誘発-:trigger:~
読取る:read する:読み取る
書込む:write する:書き込む
走らす:run する:~
走らせ:run し:~
起動-:initiate:~
追加-:add:~
防止-:prevent:~
除去-:remove:~
提出:submission::~
	対応付け:map
複製:copy:~
	孕む:involve する:~
精査-:examine:~
アテガわれ:assign され:あてがわれ
	~~述べ
	もたらす:lead
	従う:follow
	得-:obtain
	-:prefixed
	返す:return
	選ばれ
	選ぶ:choose する
	meant
	said
	所与の:given
	与-:give
	渡-:pass


	●未分類
token::::トークン
	-:common
値:value:~
入力:input:~
screen::::スクリーン
内側:inside:~
内容:content:~
出力:output:~
	一致する:identical
同等:equal:~
同等性:equality:~

和集合:union:~
実効:effective:~
宣言的:declarative:~
新たな:new:~

	種類:
自動的:automatic:~
自動:automatic:~
要素:element:~

規則:rule:~
通貨:currency:~
集合:set:~

	結果:result
	~~協調する:if they do the same thing
	したがって:thus
	例:example
	:exactly
	決して:never
	特に:in particular
	通:through
	加えて:Furthermore
	連結-
	hosting
	非:non
	:per
	point
	様々な程度:varying degrees
	潜在的に:potentially
	にもかかわらず:nonetheless


	●指示語
	ある種の:certain
	自身:itself
	常に:always
	複数の:multiple
	尾部:end
	最初:first
	最後:last
	この:this
	:these
	その:that
	:such as
	それら:they
	それらの:their
	それらの:those
	それらを:them
	一部:part of
	上:above
	下:below
	両:both
	2:two
	他の:other
	他の場合:otherwise
	依然として:still
	元~host:originalHost
	再度:again
	互い:each other
	同じ:same
	後:after
	更に:further
	-:next
	異なる:different
	等々:etc
	広く:widely


●●original_id_map


●●words_table1


document-domain:<code>document.domain</code> 
iframe: <code class="element">iframe</code>


●●link_map



	●IDL
I.Document:~HTMLdom#document
E.SecurityError:~WEBIDL#securityerror

m.createDocument:~DOM4#dom-domimplementation-createdocument
m.document.open:~HTMLdynamic#dom-document-open
m.document.domain:#dom-document-domain
m.domain:#dom-document-domain
m.localStorage:~WEBSTORAGE#dom-localstorage
m.window.alert:~HTMLGAPI#dom-window-alert
m.window.confirm:~HTMLGAPI#dom-window-confirm
m.window.print:~HTMLGAPI#dom-window-print
m.window.prompt:~HTMLGAPI#dom-window-prompt
m.window.open:~WINDOW#dom-window-open

	●event
et.beforeunload:~HTMLindex#event-beforeunload

	●要素
e.img:~HEimages#the-img-element
e.iframe:~HEembed#the-iframe-element
e.audio:~HEmedia#the-audio-element
e.video:~HEmedia#the-video-element


	●内容属性
a.sandbox:~HEembed#attr-iframe-sandbox
a.target:~HTMLlinks#attr-hyperlink-target

	●code
	m.onclick
sc.javascript_:~NAVI#javascript-protocol
sc.data_:https://tools.ietf.org/html/rfc2397#section-2
sc.about_blank:~HTMLdep#about:blank

	●
文書:~HTMLdom#the-document-object

	●閲覧文脈
~top-level閲覧文脈:~BROWSERS#top-level-browsing-context
閲覧文脈~容器:~BROWSERS#browsing-context-container
閲覧文脈:~BROWSERS#browsing-context
閲覧文脈を選ぶ規則:~BROWSERS#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name
作動中の文書:~BROWSERS#active-document
親~閲覧文脈:~BROWSERS#parent-browsing-context
属する閲覧文脈:~BROWSERS#concept-document-bc
入子の閲覧文脈:~BROWSERS#nested-browsing-context
補助~閲覧文脈:~BROWSERS#auxiliary-browsing-context

	●生成元／sandbox（origin.html
	§:#origin
	§:#sandboxing
	§:#relaxing-the-same-origin-restriction
	:#origin-2
	:#sandboxOrigin
	:#unicode-serialisation-of-an-origin
	:~HTMLforms#sandboxSubmitBlocked
	:~HEmedia#attr-media-autoplay
	:~HTMLforms#attr-fe-autofocus
	:~NAVI#sandboxPluginNavigate
	:~WAPI#sandboxScriptBlocked
	:~HEembed#sandboxPluginEmbed
	:~HEembed#sandboxPluginObject

生成元:#concept-origin
不透明な生成元:#concept-origin-opaque
成分組~生成元:#concept-origin-tuple
o.~scheme:#concept-origin-scheme
o.~host:#concept-origin-host
o.~port:#concept-origin-port
o.~domain:#concept-origin-domain
実効~domain:#concept-origin-effective-domain
生成元を直列化する:#ascii-serialisation-of-an-origin
o.直列化:#ascii-serialisation-of-an-origin
同一-生成元:#same-origin
同じ生成元~domain:#same-origin-domain
登録-可能な~domain~suffixまたは同等:#is-a-registrable-domain-suffix-of-or-is-equal-to


v.allow-popups:#attr-iframe-sandbox-allow-popups
v.allow-top-navigation:#attr-iframe-sandbox-allow-top-navigation
v.allow-top-navigation-by-user-activation:#attr-iframe-sandbox-allow-top-navigation-by-user-activation
v.allow-same-origin:#attr-iframe-sandbox-allow-same-origin
v.allow-forms:#attr-iframe-sandbox-allow-forms
v.allow-pointer-lock:#attr-iframe-sandbox-allow-pointer-lock
v.allow-scripts:#attr-iframe-sandbox-allow-scripts
v.allow-popups-to-escape-sandbox:#attr-iframe-sandbox-allow-popups-to-escape-sandbox
v.allow-modals:#attr-iframe-sandbox-allow-modals
v.allow-orientation-lock:#attr-iframe-sandbox-allow-orientation-lock
v.allow-presentation:#attr-iframe-sandbox-allow-presentation

~sandbox法~flag集合:#sandboxing-flag-set
作動中の~sandbox法~flag集合:#active-sandboxing-flag-set
強制~sandbox法~flag集合:#forced-sandboxing-flag-set
~popup~sandbox法~flag集合:#popup-sandboxing-flag-set
~iframe~sandbox法~flag集合:#iframe-sandboxing-flag-set

sbox.~document-domain:#sandboxed-document.domain-browsing-context-flag
sbox.~form:#sandboxed-forms-browsing-context-flag
sbox.~navi:#sandboxed-navigation-browsing-context-flag
許可-済み~navigator:#one-permitted-sandboxed-navigator
sbox.~plugin:#sandboxed-plugins-browsing-context-flag
sbox.~pointer~lock:#sandboxed-pointer-lock-browsing-context-flag
sbox.~script:#sandboxed-scripts-browsing-context-flag
sbox.非~利用者~作動化~top-level~navi:#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag
sbox.利用者~作動化~top-level~navi:#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag
sbox.生成元:#sandboxed-origin-browsing-context-flag
sbox.自動~特色機能:#sandboxed-automatic-features-browsing-context-flag
sbox.補助~navi:#sandboxed-auxiliary-navigation-browsing-context-flag
sbox.方位~lock:#sandboxed-orientation-lock-browsing-context-flag
sbox.呈示:#sandboxed-presentation-browsing-context-flag
~sandboxは補助~閲覧文脈に伝播する~flag:#sandbox-propagates-to-auxiliary-browsing-contexts-flag
~sandbox化( ~modal )~flag:#sandboxed-modals-flag

文書~用に~sandbox法を実装する:#implement-the-sandboxing
~sandbox法~指令を構文解析する:#parse-a-sandboxing-directive

	●NAVI
~navigate:~NAVI#navigate
~navi:~NAVI#navigate


	●INFRA
~ASCII空白で分割する:~INFRA#split-on-ascii-whitespace

	●HTMLINFRA
l.document-domain:~HTMLINFRA#document-domain-feature

~CORS非同一-生成元:~HTMLurl#cors-cross-origin
~CORS同一-生成元:~HTMLurl#cors-same-origin
~plugin:~HTMLINFRA#plugin
保安化でき:~HTMLINFRA#concept-plugin-secure

	●WAPI
現任の設定群~obj:~WAPI#incumbent-settings-object
~script:~WAPI#concept-script
enV.生成元:~WAPI#concept-settings-object-origin

	●URL1
~URL:~URL1#concept-url
同等な~host:~URL1#concept-host-equals
~hostを直列化する:~URL1#concept-host-serializer
~host構文解析器:~URL1#concept-host-parser

x.~host:~URL1#concept-host
url.~domain:~URL1#concept-domain
url.~host:~URL1#concept-url-host
url.~port:~URL1#concept-url-port
url.~scheme:~URL1#concept-url-scheme
url.生成元:~URL1#concept-url-origin
~IPv4~address:~URL1#concept-ipv4
~IPv6~address:~URL1#concept-ipv6
整数を直列化する:~URL1#serialize-an-integer
公共接尾辞:~URL1#host-public-suffix

	●
~network~scheme:~FETCH#network-scheme


画像~data:~HEimages#img-req-data
~iframe-srcdoc文書:~HEembed#an-iframe-srcdoc-document
利用は許容されて:~HEembed#allowed-to-use
~media~data:~HEmedia#media-data
~media要素:~HEmedia#media-element
利用者による作動化から誘発されて:~HTMLinteraction#triggered-by-user-activation
~node文書:~DOM4#concept-node-document
doc.~URL:~DOM4#concept-document-url


●●trans_metadata
<p>
~THIS_PAGEは、~WHATWGによる HTML 仕様の
Loading Web pages 章の
<a href="~SPEC_URL">Origin 節, Sandboxing</a>
節を日本語に翻訳したものです。
~PUB
</p>

</script>


<body>

<header>
	<hgroup>
<h1>生成元, サンドボックス — Origin, Sandboxing</h1>
	</hgroup>
</header>

<main id="MAIN" hidden>


		<section id="_conventions">
<h2>【この訳に固有の表記規約】</h2>

<p>
この訳の，~algoや定義の記述に利用されている各種記号（ ~LET, ~IF, ε, 此れ, ~THROW 等々）の意味や定義の詳細は，~SYMBOL_DEF_REFを~~参照されたし。
</p>

		</section>
		<section id="origin">
<h2 title="Origin">7.5. 生成元</h2>

<p>
生成元は ~Webの保安~modelにおける基礎的な通貨である。
~Web~platformにおける，ある生成元を共有する動作者たちは、互いを信用し，同じ権限を有するものと見做される。
互いの生成元が相違する動作者たちは、潜在的に敵対的にあると見なされ，様々な程度で互いに隔離される。
◎
Origins are the fundamental currency of the Web's security model. Two actors in the Web platform that share an origin are assumed to trust each other and to have the same authority. Actors with differing origins are considered potentially hostile versus each other, and are isolated from each other to varying degrees.
</p>

<p class="example">
例えば
`bank.example.com^c
にて~hostされている X 銀行の ~Web~siteが
`charity.example.org^c
にて~hostされている Y 事業体の~Web~siteの~DOMを精査しようと試行した場合、
`SecurityError$E 例外が~~投出されることになる。
◎
For example, if Example Bank's Web site, hosted at bank.example.com, tries to examine the DOM of Example Charity's Web site, hosted at charity.example.org, a "SecurityError" DOMException will be raised.
</p>

<p class="trans-note">【
“~~生成元” という訳語は、おそらく， `HTTP$r の用語
“<a href="~RFC7230#generate">~~生成する（ generate ）</a>”
に由来する（より詳細には、［
~HTTP要請に対し，
<a href="~RFC7230#origin-server">応答を生成する~server</a>
］を識別する情報）。
】</p>


<hr>

<p id="origin-2">
`生成元@
（ origin ）は、次のいずれかとして与えられる：
◎
An origin is one of the following:
</p>


<dl class="def-list">
	<dt>`不透明な生成元@</dt>
	<dd>
直列化して再度~作成し直せないような，内部的な値であって（`生成元を直列化する$ときは `null^l に直列化される）、有意義な演算は，同等性を試験することに限られる。
◎
An internal value, with no serialization it can be recreated from (it is serialized as "null" per serialization of an origin), for which the only meaningful operation is testing for equality.
</dd>
	<dt>`成分組~生成元@</dt>
	<dd>
<p>
次のものからなる（括弧内はとり得る値）：
◎
A tuple consists of:
</p>

		<ul>
			<li>
`~scheme@o（ `~scheme$url ）
◎
A scheme (a scheme).
</li>
			<li>
`~host@o （ `~host$url ）
◎
A host (a host).
</li>
			<li>
`~port@o （ `~port$url ）
◎
A port (a port).
</li>
			<li>
<p>
`~domain@o （ ~NULL または `~domain$url ）。
他が言明されない限り， ~NULL とする。
◎
A domain (null or a domain). Null unless stated otherwise.
</p>
			</li>
		</ul>

<p class="note">注記：
`生成元$は共有され得る
— 例えば、複数の`文書$間で。
加えて、`生成元$は，一般に変異しない。
`成分組~生成元$の`~domain$oのみ，それも
`document.domain$m ~APIを通してのみ，変更され得る。
◎
Origins can be shared, e.g., among multiple Document objects. Furthermore, origins are generally immutable. Only the domain of a tuple origin can be changed, and only through the document.domain API.
</p>
	</dd>
</dl>


<p class="algo-head">
`生成元$ %生成元 の
`実効~domain@
は、次に従って計算される：
◎
The effective domain of an origin origin is computed as follows:
</p>

<ol>
	<li>
~IF［
%生成元 は`不透明な生成元$である
］
⇒
~RET ~NULL
◎
If origin is an opaque origin, then return null.
</li>
	<li>
~IF［
%生成元 の`~domain$o ~NEQ ~NULL
］
⇒
~RET %生成元 の`~domain$o
◎
If origin's domain is non-null, then return origin's domain.
</li>
	<li>
~RET %生成元 の`~host$o
◎
Return origin's host.
</li>
</ol>

<p>
仕様が定義する様々な~objは，`生成元$を有するように定義される。
これらの`生成元$は、次のうち，最初に該当する項目に従って決定される：
◎
Various specification objects are defined to have an origin. These origins are determined as follows:
</p>

<dl>
	<dt>
`文書$ %文書 に対しては：
◎
For Document objects
</dt>
	<dd>
		<dl class="switch">
			<dt id="sandboxOrigin">
`生成元$sbox ~IN %文書 の`作動中の~sandbox法~flag集合$の場合：
◎
If the Document's active sandboxing flag set has its sandboxed origin browsing context flag set
</dt>
			<dt>
%文書 は `data_$sc ~URLから生成されたものである場合：
◎
If the Document was generated from a data: URL
</dt>
			<dd>
%文書 の作成-時にアテガわれた，一意かつ`不透明な生成元$。
◎
A unique opaque origin assigned when the Document is created.
</dd>

			<dt>
%文書 の`~URL$docの`~scheme$urlは`~network~scheme$である場合：
◎
If the Document's URL's scheme is a network scheme
</dt>
			<dd>
%文書 の作成-時にアテガわれた， %文書 の`~URL$docの`生成元$urlの複製
◎
A copy of the Document's URL's origin assigned when the Document is created.
</dd>
			<dd class="note">注記：
`document.open()$m ~methodは、
%文書 の`~URL$docを `about_blank$sc に変更し得る。
したがって、`生成元$は作成-時にアテガわれる。
◎
The document.open() method can change the Document's URL to "about:blank". Therefore the origin is assigned when the Document is created.
</dd>

			<dt>
%文書 は初期 "`about_blank$sc" 文書である場合：
◎
If the Document is the initial "about:blank" document
</dt>
			<dd>
%文書 が`属する閲覧文脈$の
<a href="~BROWSERS#about-blank-origin">作成-時にアテガわれたもの</a>。
◎
The one it was assigned when its browsing context was created.
</dd>

			<dt>
%文書 は 初期でない "`about_blank$sc" 文書である場合：
◎
If the Document is a non-initial "about:blank" document
</dt>
			<dd>
<p>
`~script$が孕まれるかどうかに応じて：
</p>

<dl class="switch"><dt>孕まれる場合：
</dt><dd>`~navigate$~algoが呼出された時点での`現任の設定群~obj$の`生成元$enV
</dd><dt>孕まれない場合：
</dt><dd>当の`~URL$への`~navi$を起動させた要素の`~node文書$の`生成元$
</dd></dl>

◎
The origin of the incumbent settings object when the navigate algorithm was invoked, or, if no script was involved, the origin of the node document of the element that initiated the navigation to that URL.
</dd>

			<dt>
%文書 は 
`javascript_$sc ~URLの処理の一部として作成されたものである場合：
◎
If the Document was created as part of the processing for javascript: URLs
</dt>
			<dd>
~navigateされている`閲覧文脈$の［
`~navigate$~algoが呼出された時点で`作動中の文書$
］の`生成元$
◎
The origin of the active document of the browsing context being navigated when the navigate algorithm was invoked.
</dd>

			<dt>
%文書 は `~iframe-srcdoc文書$である場合：
◎
If the Document is an iframe srcdoc document
</dt>
			<dd>
［［［
%文書 が`属する閲覧文脈$
］の`閲覧文脈~容器$
］の`~node文書$
］の`生成元$
◎
The origin of the Document's browsing context's browsing context container's node document.
</dd>

			<dt>
%文書 は 何らかの他の方式で得られたものである場合：
◎
If the Document was obtained in some other manner (e.g. a Document created using the createDocument() API, etc)
</dt>
			<dd>
WHATWG `DOM$r 標準に定義される既定の挙動が適用される。
◎
The default behavior as defined in the WHATWG DOM standard applies. [DOM].
</dd>
			<dd class="note">注記：
`生成元$は %文書 の作成-時にアテガわれた，一意かつ`不透明な生成元$になる。
◎
The origin is a unique opaque origin assigned when the Document is created.
</dd>
			<dd class="example">
例えば、 `createDocument()$m ~API, 等々を利用して作成された`文書$。
◎
↑</dd>
		</dl>
	</dd>

	<dt>
`img$e 要素による画像に対しては：
◎
For images of img elements
</dt>
	<dd>
<p>
その`画像~data$に応じて：
</p>

		<dl class="switch">
			<dt>
`~CORS非同一-生成元$である場合：
◎
If the image data is CORS-cross-origin
◎
</dt>
			<dd>
一意かつ`不透明な生成元$
— これは、画像の作成-時にアテガわれる。
◎
A unique opaque origin assigned when the image is created.
</dd>
			<dt>
`~CORS同一-生成元$である場合：
◎
If the image data is CORS-same-origin
</dt>
			<dd>
要素の`~node文書$の`生成元$
◎
The img element's node document's origin.
</dd>
		</dl>
	</dd>

	<dt>
`~media要素$（ `audio$e ／ `video$e ）に対しては：
◎
For audio and video elements
</dt>
		<dd>
<p>
その`~media~data$に応じて：
</p>

			<dl class="switch">
			<dt>
`~CORS非同一-生成元$である場合：
◎
If the media data is CORS-cross-origin
</dt>
			<dd>
一意かつ`不透明な生成元$
— これは、~media~dataの~fetch時にアテガわれる。
◎
A unique opaque origin assigned when the media data is fetched.
</dd>
			<dt>
`~CORS同一-生成元$である場合：
◎
If the media data is CORS-same-origin
</dt>
			<dd>
要素の`~node文書$の`生成元$
◎
The media element's node document's origin.
</dd>
		</dl>
	</dd>
</dl>

<p>
他の仕様は、特定0の［
`文書$ ／ 画像 ／ `~media要素$
］の`生成元$を指定して上の定義を上書きし得る。
◎
Other specifications can override the above definitions by themselves specifying the origin of a particular Document object, image, or media element.
</p>

<hr>

<p class="algo-head">
`生成元を直列化する@
ときは、所与の
( `生成元$ %生成元 )
に対し，次を適用して得られる文字列を返す：
◎
The serialization of an origin is the string obtained by applying the following algorithm to the given origin origin:
</p>

<ol>
	<li>
~IF［
%生成元 は`不透明な生成元$である
］
⇒
~RET `null^l
◎
If origin is an opaque origin, then return "null".
</li>
	<li>
%結果 ~LET 次を順に連結した結果
⇒＃
%生成元 の`~scheme$o,
`://^l,
`~hostを直列化する$( %生成元 の`~host$o )
◎
Otherwise, let result be origin's scheme.
◎
Append "://" to result.
◎
Append origin's host, serialized, to result.
</li>
	<li>
~IF［
%生成元 の`~port$o ~EQ ~NULL
］
⇒
~RET %結果
◎
↓</li>
	<li>
~RET 次を順に連結した結果
⇒＃
%結果,
`003A^U `:^smb,
`整数を直列化する$( %生成元 の`~port$o )
◎
If origin's port is non-null, append a U+003A COLON character (:), and origin's port, serialized, to result.
◎
Return result.
</li>
</ol>

<p class="example">
`成分組~生成元$
( `https^l, `xn--maraa-rta.example^l, ~NULL, ~NULL ) 
の`直列化$oは、
`https://xn--maraa-rta.example^l
になる。
◎
The serialization of ("https", "xn--maraa-rta.example", null, null) is "https://xn--maraa-rta.example".
</p>

<p id="unicode-serialisation-of-an-origin" class="note">注記：
`生成元の~Unicode直列化^i も利用されていたが、それが広く採用されたことは，決してない。
◎
There used to also be a Unicode serialization of an origin. However, it was never widely adopted.
</p>


<hr>

<p>
次のいずれかを満たすような 2 つの`生成元$ %A, %B は、
`同一-生成元@
とされる：
◎
Two origins, A and B, are said to be same origin if the following algorithm returns true:
</p>

<ul>
	<li>
［
%A, %B とも`不透明な生成元$である
］~AND［
%A ~EQ %B
］
◎
If A and B are the same opaque origin, then return true.
</li>
	<li>
［
%A, %B とも`成分組~生成元$である
］~AND［
%A, %B の ( `~scheme$o, `~host$o, `~port$o ) は各~成分ごとに一致する
］
◎
If A and B are both tuple origins and their schemes, hosts, and port are identical, then return true.
◎
Return false.
</li>
</ul>

<p>
次のいずれかを満たすような 2 つの`生成元$ %A, %B は、
`同じ生成元~domain@
とされる：
◎
Two origins, A and B, are said to be same origin-domain if the following algorithm returns true:
</p>

<ul>
	<li>
［
%A, %B とも`不透明な生成元$である
］~AND［
%A ~EQ %B
］
◎
If A and B are the same opaque origin, then return true.
</li>
	<li>
<p>
［
%A, %B とも`成分組~生成元$である
］~AND［
%A, %B は次のいずれかを満たす
］：
</p>
		<ul>
			<li>
［
%A の`~domain$o ~EQ %B の`~domain$o ~NEQ ~NULL
］~AND［
%A の`~scheme$o ~EQ %B の`~scheme$o
］
</li>
			<li>
［
%A の`~domain$o ~EQ %B の`~domain$o ~EQ ~NULL
］~AND［
( %A, %B )
は`同一-生成元$である
］
</li>
		</ul>
◎
If A and B are both tuple origins, run these substeps:
• If A and B's schemes are identical, and their domains are identical and non-null, then return true.
• Otherwise, if A and B are same origin and their domains are identical and null, then return true.
◎
Return false.
	</li>
</ul>

<div class="example">

<table id="_compare-origin">
<thead class="layout-grid"><tr><th>%A ( ~scheme, ~host, ~port, ~domain )
<th>%B
<th>`同一-生成元$？
<th>`同じ生成元~domain$？
</thead><tbody class="layout-grid">

<tr><td>(`https^l, `example.org^l, ~NULL, ~NULL)
<td>(`https^l, `example.org^l, ~NULL, ~NULL)
<td>✅
<td>✅

<tr><td>(`https^l, `example.org^l, 314, ~NULL)
<td>(`https^l, `example.org^l, 420, ~NULL)
<td>❌
<td>❌

<tr><td>(`https^l, `example.org^l, 314, `example.org^l)
<td>(`https^l, `example.org^l, 420, `example.org^l)
<td>❌
<td>✅

<tr><td>(`https^l, `example.org^l, ~NULL, ~NULL)
<td>(`https^l, `example.org^l, ~NULL, `example.org^l)
<td>✅
<td>❌

<tr><td>(`https^l, `example.org^l, ~NULL, `example.org^l)
<td>(`http^l, `example.org^l, ~NULL, `example.org^l)
<td>❌
<td>❌
</tbody></table>

</div>


			<section id="relaxing-the-same-origin-restriction">
<h3 title="Relaxing the same-origin restriction">7.5.1. 同一-生成元 制約の緩め方</h3>

<dl class="domintro">
	<dt>%document . `domain$m [ = %domain ]</dt>
	<dd>
保安~検査~用に利用される現在の~domainを返す。
◎
Returns the current domain used for security checks.
</dd>
	<dd>
下位domainを除去するような値に設定して，`生成元$の`~domain$oを変更できる
— そうすることにより，
同じ~domainにおける他の下位domain上の頁と互いに~accessできるようになる（それらも，同じことをしたならば）。
（ただし，~sandbox化された `iframe$e においては設定できない。）
◎
Can be set to a value that removes subdomains, to change the origin's domain to allow pages on other subdomains of the same domain (if they do the same thing) to access each other. (Can't be set in sandboxed iframes.)
</dd>
</dl>


<p class="algo-head">
文字列 %~host~suffix文字列 は`~host$x %元~host に対し
`登録-可能な~domain~suffixまたは同等@
であるかどうか決定するときは、次を走らす：
◎
To determine if a string hostSuffixString is a registrable domain suffix of or is equal to a host originalHost, run these steps:
</p>

<ol>
	<li>
~IF［
%~host~suffix文字列 ~EQ 空~文字列
］
⇒
~RET ~F
◎
If hostSuffixString is the empty string, then return false.
</li>
	<li>
%~host ~LET `~host構文解析器$( %~host~suffix文字列 )
◎
Let host be the result of parsing hostSuffixString.
</li>
	<li>
~IF［
%~host ~EQ `失敗^i
］
⇒
~RET ~F
◎
If host is failure, then return false.
</li>
	<li>
<p>
~IF［
( %~host, %元~host )
は`同等な~host$でない
］：
◎
If host does not equal originalHost, then:
</p>
		<ol>
			<li>
<p>
~IF［
%~host , %元~host のいずれかは`~domain$urlでない 
］
⇒
~RET ~F
◎
If host or originalHost is not a domain, then return false.
</p>

<p class="note">注記：
すなわち、
`~IPv4~address$ ／ `~IPv6~address$
による`~host$xは除外する。
◎
This excludes hosts that are an IPv4 address or an IPv6 address.
</p>
			</li>
			<li>
~IF［［
%~host に `002E^U `.^smb を接頭した結果
］は %元~host の尾部に<!-- 正確に＊ -->合致しない
］
⇒
~RET ~F
◎
If host, prefixed by a U+002E FULL STOP (.), does not exactly match the end of originalHost, then return false.
</li>
			<li>
~IF［
( %~host, %~host の`公共接尾辞$ )
は`同等な~host$である `URL$r
］
⇒
~RET ~F
◎
If host equals host's public suffix, then return false. [URL]
</li>
		</ol>
	</li>
	<li>
~RET ~T
◎
Return true.
</li>
</ol>


<p class="idl-def">
`Document$I 上の
`domain@m
属性は、次で定義される：
</p>

<ul>
	<li>
<p>
取得子は、次を走らすモノトスル：
◎
The domain attribute's getter must run these steps:
</p>
		<ol>
			<li>
%実効~domain ~LET 此れの`生成元$の`実効~domain$
◎
Let effectiveDomain be this Document object's origin's effective domain.
</li>
			<li>
~IF［
%実効~domain ~EQ ~NULL
］
⇒
~RET 空~文字列
◎
If effectiveDomain is null, then return the empty string.
</li>
			<li>
~RET `~hostを直列化する$( %実効~domain )
◎
Return effectiveDomain, serialized.
</li>
		</ol>
	</li>
	<li>
<p>
設定子は、次を走らすモノトスル：
◎
The domain attribute's setter must run these steps:
</p>
		<ol>
			<li>
~IF［
此れが`属する閲覧文脈$ ~EQ ~NULL
］
⇒
~THROW `SecurityError$E
◎
If this Document object's browsing context is null, then throw a "SecurityError" DOMException.
</li>
			<li>
~IF［
`~document-domain$sbox ~IN
此れの`作動中の~sandbox法~flag集合$
］
⇒
~THROW `SecurityError$E
◎
If this Document object's active sandboxing flag set has its sandboxed document.domain browsing context flag set, then throw a "SecurityError" DOMException.
</li>
			<li>
~IF［
此れには `document-domain$l 特色機能の`利用は許容されて$いない
］
⇒
~THROW `SecurityError$E
◎
If this Document object is not allowed to use the "document-domain" feature, then throw a "SecurityError" DOMException.
</li>
			<li>
%実効~domain ~LET 此れの`生成元$の`実効~domain$
◎
Let effectiveDomain be this Document object's origin's effective domain.
</li>
			<li>
~IF［
%実効~domain ~EQ ~NULL
］
⇒
~THROW `SecurityError$E
◎
If effectiveDomain is null, then throw a "SecurityError" DOMException.
</li>
			<li>
~IF［
所与の値は %実効~domain に対し`登録-可能な~domain~suffixまたは同等$でない
］
⇒
~THROW `SecurityError$E
◎
If the given value is not a registrable domain suffix of and is not equal to effectiveDomain, then throw a "SecurityError" DOMException.
</li>
			<li>
此れの`生成元$の`~domain$o ~SET `~host構文解析器$( 所与の値 )
◎
Set this Document object's origin's domain to the result of parsing the given value.
</li>
		</ol>
	</li>
</ul>


<p class="note">注記：
`domain$m 属性は、同じ~domain上の異なる~host上の頁どうしが互いの
DOM に~accessすることを可能化するために利用される。
◎
The document.domain attribute is used to enable pages on different hosts of a domain to access each other's DOMs.
</p>

<p class="warning">
他者と~hostを共有しているときは、`document.domain$m 属性を利用しないこと。
信用できない第三者主体が、［
同じ~IP~address上の~portだけ異なる~HTTP~server
］を~hostできる場合、通常は 同じ~host上の互いに異なる~siteを保護する，同一-生成元による保護は、失敗することになる
— `document.domain$m 属性が利用されて以降は、生成元の比較-時に，その~portは無視されるので。
◎
Do not use the document.domain attribute when using shared hosting. If an untrusted third party is able to host an HTTP server at the same IP address but on a different port, then the same-origin protection that normally protects two different sites on the same host will fail, as the ports are ignored when comparing origins after the document.domain attribute has been used.
</p>


			</section>
		</section>
		<section id="sandboxing">
<h2 title="Sandboxing">7.6. ~sandbox法</h2>

<p>
`~sandbox法~flag集合@
は、以下に挙げる各種~flagのうち，いくつかからなる集合である。
この集合は、それが含む各種~flagを通して，信用できない資源が持ち得る能を制約するために利用される：
◎
A sandboxing flag set is a set of zero or more of the following flags, which are used to restrict the abilities that potentially untrusted resources have:
</p>

<!-- 
S = ~sandbox法~flag集合
A ~IN S 同値↔ A ~EQ ~ON
-->

<p class="trans-note">【
“<a href="https://en.wikipedia.org/wiki/Sandbox_(computer_security)">~sandbox</a>”
—  “（こどもの）砂場” （ “監獄” を和らげた語（一般に，より制約も緩い））。
】【
以下に現れる各種
“`X^sbox”
は、
“［
X について，閲覧文脈を~sandbox化する（ X の機能を抑止する）
］ことを指示する~flag”
と解釈する
— そのように解釈し易いよう、この訳では，関数的に記している。
】【
以下に現れる “内容” とは、［
これらの~flagが適用される閲覧文脈
］内の内容を指す。
】</p>

<dl>
	<dt>
`~navi@sbox
◎
The sandboxed navigation browsing context flag
</dt>
	<dd>
<p>
この~flagは、~sandbox化されている当の閲覧文脈を %B とするとき，
次に挙げるもの以外の`閲覧文脈$ %C に対しては，
%B の内容が %C を
<a href="~NAVI#sandboxLinks">~navigateするのを防止する</a>
：
</p>
		<ul>
			<li>
%B 自身
</li>
			<li>
%B が更に内側に入子にしている閲覧文脈
【再帰的に？】
</li>
			<li>
%B が開いた`補助~閲覧文脈$（これは、`補助~navi$sboxにより保護される）†
</li>
			<li>
%B の`~top-level閲覧文脈$（これは、
`利用者~作動化~top-level~navi$sbox,
`非~利用者~作動化~top-level~navi$sbox
により保護される）
</li>
		</ul>
◎
This flag prevents content from navigating browsing contexts other than the sandboxed browsing context itself (or browsing contexts further nested inside it), auxiliary browsing contexts (which are protected by the sandboxed auxiliary navigation browsing context flag defined next), and the top-level browsing context (which is protected by the sandboxed top-level navigation without user activation browsing context flag and sandboxed top-level navigation with user activation browsing context flag defined below).
</dd>
	<dd>†
ここに~~述べた制約にもかかわらず、［
`補助~navi$sbox ~NIN `~sandbox法~flag集合$
］の下では、ある種の事例においては，新たな`~top-level閲覧文脈$として %~popup ††を開くことが許容される。
そのような %~popup の作成-時には、それを作成した`閲覧文脈$が，
%~popup の
`許可-済み~navigator@†††
として設定される
— それは、（ ~naviに関して~sandbox化されていても）実際には %~popup に対する~navigateが許可される。
（他の場合、 %~popup に対する~navigateは，`~navi$sboxにより防止される。）
◎
If the sandboxed auxiliary navigation browsing context flag is not set, then in certain cases the restrictions nonetheless allow popups (new top-level browsing contexts) to be opened. These browsing contexts always have one permitted sandboxed navigator, set when the browsing context is created, which allows the browsing context that created them to actually navigate them. (Otherwise, the sandboxed navigation browsing context flag would prevent them from being navigated even if they were opened.)
</dd>
	<dd class="trans-note">【††
すなわち、`補助~閲覧文脈$。
】【†††
“one permitted sandboxed navigator”
— この “one” は、［
%~popup に対し`許可-済み~navigator$とされるものは、きっかり 1 個ある
］ことを表していると見受けられる。
】</dd>

	<dt>
`補助~navi@sbox
◎
The sandboxed auxiliary navigation browsing context flag
</dt>
	<dd>
この~flagは、内容が
<a href="~BROWSERS#sandboxWindowOpen">新たな補助~閲覧文脈を作成するのを防止する</a>
—
例えば［
`target$a 属性 ／
`window.open()$m ~method
］を利用して。
◎
This flag prevents content from creating new auxiliary browsing contexts, e.g. using the target attribute or the window.open() method.
</dd>

	<dt>`非~利用者~作動化~top-level~navi@sbox</dt>
	<dt>`利用者~作動化~top-level~navi@sbox</dt>
	<dd>
両~flagとも、内容が その~top-level閲覧文脈を［
<a href="~NAVI#sandboxLinks">~navigateするのを防止する</a> ／
<a href="~WINDOW#sandboxClose">閉じるのを防止する</a>
］。
これらは順に、`利用者による作動化から誘発されて$［
<em>いない</em>, <em>いる</em>
］~algoからのみ，諮問される。
◎
The sandboxed top-level navigation without user activation browsing context flag
◎
This flag prevents content from navigating their top-level browsing context and prevents content from closing their top-level browsing context. It is consulted only from algorithms that are not triggered by user activation.
</dd>
	<dd>
両~flagとも、影響するのは`~top-level閲覧文脈$に限られる
— ［
この~flag ~NIN `~sandbox法~flag集合$
］の下では、内容は，その`~top-level閲覧文脈$を~navigateできる（~flagは`利用者による作動化から誘発されて$いるかどうかに応じて適切な方とする）。
が、他の`閲覧文脈$は，依然として他の~flag
— `~navi$sboxや, （場合によっては）`補助~navi$sbox —
により保護される。
◎
When the sandboxed top-level navigation without user activation browsing context flag is not set, content can navigate its top-level browsing context, but other browsing contexts are still protected by the sandboxed navigation browsing context flag and possibly the sandboxed auxiliary navigation browsing context flag.
◎
The sandboxed top-level navigation with user activation browsing context flag
◎
This flag prevents content from navigating their top-level browsing context and prevents content from closing their top-level browsing context. It is consulted only from algorithms that are triggered by user activation.
◎
As with the sandboxed top-level navigation without user activation browsing context flag, this flag only affects the top-level browsing context; if it is not set, other browsing contexts might still be protected by other flags.
</dd>

	<dt>
`~plugin@sbox
◎
The sandboxed plugins browsing context flag
</dt>
	<dd>
この~flagは、内容が［
<a href="~HEembed#sandboxPluginEmbed">`embed^e 要素を利用して</a> ／
<a href="~HEembed#sandboxPluginObject">`object^e 要素を利用して</a> ／
`入子の閲覧文脈$
<a href="~NAVI#sandboxPluginNavigate">に対する~naviを通して</a>
］~pluginを~instance化するのを防止する
— それらの`~plugin$を`保安化でき$ない限り。
◎
This flag prevents content from instantiating plugins, whether using the embed element, the object element, or through navigation of a nested browsing context, unless those plugins can be secured.
</dd>

	<dt>
`生成元@sbox
◎
The sandboxed origin browsing context flag
</dt>
	<dd>
この~flagは、
<a href="#sandboxOrigin">内容を一意な生成元~内に強制する</a>
— したがって，内容が<!-- ＊ -->同じ`生成元$からの他の内容へ~accessするのを防止する。
◎
This flag forces content into a unique origin, thus preventing it from accessing other content from the same origin.
</dd>
	<dd>
この~flagはまた、~scriptが `document.cookie^m ~IDL属性を
<!-- ~accessを防止する -->
<a href="~HTMLdom#sandboxCookies">読取る／書込むのを防止する</a>
ことに加え， `localStorage$m への~accessも阻止する。
◎
This flag also prevents script from reading from or writing to the document.cookie IDL attribute, and blocks access to localStorage.
</dd>

	<dt>
`~form@sbox
◎
The sandboxed forms browsing context flag
</dt>
	<dd>
この~flagは、
<a href="~HTMLforms#sandboxSubmitBlocked">~form提出を阻止する</a>
。
◎
This flag blocks form submission.
</dd>

	<dt>
`~pointer~lock@sbox
◎
The sandboxed pointer lock browsing context flag
</dt>
	<dd>
この~flagは、 Pointer Lock ~APIを不能化する。
`POINTERLOCK$r
◎
This flag disables the Pointer Lock API. [POINTERLOCK]
</dd>

	<dt>
`~script@sbox
◎
The sandboxed scripts browsing context flag
</dt>
	<dd>
この~flagは、
<a href="~WAPI#sandboxScriptBlocked">~script実行を阻止する</a>。
◎
This flag blocks script execution.
</dd>

	<dt>
`自動~特色機能@sbox
◎
The sandboxed automatic features browsing context flag
</dt>
	<dd>
<p >
この~flagは、次に挙げるような自動的に誘発される特色機能を阻止する：
</p>

<ul ><li><a href="~HEmedia#attr-media-autoplay">動画を自動的に再生する</a>
</li><li><a href="~HTMLforms#attr-fe-autofocus">~form~controlを自動的に~focusする</a>
</li></ul>

◎
This flag blocks features that trigger automatically, such as automatically playing a video or automatically focusing a form control.
</dd>

	<dt>
`~document-domain@sbox
◎
The sandboxed document.domain browsing context flag
</dt>
	<dd>
この~flagは、 `document.domain$m 設定子の利用を防止する。
◎
This flag prevents content from using the document.domain setter.
</dd>

	<dt>
`~sandboxは補助~閲覧文脈に伝播する~flag@
◎
The sandbox propagates to auxiliary browsing contexts flag
</dt>
	<dd>
この~flagは、［
内容にて`作動中の~sandbox法~flag集合$
］を［
内容が作成する`補助~閲覧文脈$
］に継承させることにより，内容が ~sandboxから逃れるのを防止する。
◎
This flag prevents content from escaping the sandbox by ensuring that any auxiliary browsing context it creates inherits the content's active sandboxing flag set.
</dd>

	<dt>
`~sandbox化( ~modal )~flag@
◎
The sandboxed modals flag
</dt>
	<dd>
<p>
この~flagは、［
内容が，次のいずれかの特色機能を利用して~modal~dialogを生産する
］のを防止する：
◎
This flag prevents content from using any of the following features to produce modal dialogs:
</p>

<ul><li>`window.alert()$m
</li><li>`window.confirm()$m
</li><li>`window.print()$m
</li><li>`window.prompt()$m
</li><li>`beforeunload$et ~event
</li></ul>

	</dd>

	<dt>
`方位~lock@sbox
◎
The sandboxed orientation lock browsing context flag
</dt>
	<dd>
この~flagは、~screen方位を~lockする能を不能化する。
`SCREENORIENTATION$r
◎
This flag disables the ability to lock the screen orientation. [SCREENORIENTATION]
</dd>
	<dt>
`呈示@sbox
◎
The sandboxed presentation browsing context flag
</dt>
	<dd>
この~flagは、 Presentation API を不能化する。
`PRESENTATION$r
◎
This flag disables the Presentation API. [PRESENTATION]
</dd>

</dl>

<p class="algo-head">
`~sandbox法~指令を構文解析する@
手続きは、所与の (
文字列 %入力,
`~sandbox法~flag集合$ %出力
)
に対し，次を走らすモノトスル：
◎
When the user agent is to parse a sandboxing directive, given a string input, a sandboxing flag set output, it must run the following steps:
</p>

 
<ol>
	<li>
%~tokenたち ~LET `~ASCII空白で分割する$( %入力 )
◎
Split input on ASCII whitespace, to obtain tokens.
</li>
	<li>
%出力 を空にする
◎
Let output be empty.
</li>
	<li>

<p>
以下に挙げる各種~flagを，対応する記述の条件が満たされるならば
%出力 に追加する：
◎
Add the following flags to output:
</p>
		<ul>
			<li>
`~navi$sbox
⇒
無条件
◎
The sandboxed navigation browsing context flag.
</li>
			<li>
`補助~navi$sbox
⇒
`allow-popups@v ~NIN %~tokenたち
◎
The sandboxed auxiliary navigation browsing context flag, unless tokens contains the allow-popups keyword.
</li>
			<li>
`非~利用者~作動化~top-level~navi$sbox
⇒
`allow-top-navigation@v
~NIN %~tokenたち
◎
The sandboxed top-level navigation without user activation browsing context flag, unless tokens contains the allow-top-navigation keyword.
</li>
			<li>
<p>
`利用者~作動化~top-level~navi$sbox
⇒
［
`allow-top-navigation-by-user-activation@v
~NIN %~tokenたち
］~AND［
`allow-top-navigation$v ~NIN %~tokenたち
］
◎
The sandboxed top-level navigation with user activation browsing context flag, unless tokens contains either the allow-top-navigation-by-user-activation keyword or the allow-top-navigation keyword.
</p>

<p class="note">注記：
したがって、［
`allow-top-navigation$v ~IN %~tokenたち
］の場合、
`allow-top-navigation-by-user-activation$v
の効果はなくなる。
この理由から、両~keywordとも指定するのは，文書~適合性の~errorになる。
◎
This means that if the allow-top-navigation is present, the allow-top-navigation-by-user-activation keyword will have no effect. For this reason, specifying both is a document conformance error.
</p>
			</li>
			<li>
`~plugin$sbox
⇒
無条件
◎
The sandboxed plugins browsing context flag.
</li>
			<li>
<p>
`生成元$sbox
⇒
`allow-same-origin@v ~NIN %~tokenたち
◎
The sandboxed origin browsing context flag, unless the tokens contains the allow-same-origin keyword.
</p>

<div class="note">

<p>注記：
`allow-same-origin$v ~keywordは、次の 2 つの事例に意図されている：
◎
The allow-same-origin keyword is intended for two cases.
</p>

<ul>
	<li>
<p>
一つは、同じ~siteからの内容を，次のように~sandbox化するための利用：
</p>

<ul ><li>内容による~scriptingは不能化する。
</li><li>内容が成す~DOMへの~accessは許容する。
</li></ul>
◎
First, it can be used to allow content from the same site to be sandboxed to disable scripting, while still allowing access to the DOM of the sandboxed content.
</li>
	<li>
<p>
もう一つは、第三者主体~siteからの内容を埋込むときに，その内容を次のように~sandbox化するための利用：
</p>

<ul ><li>その~siteが ~popup~windowを開く, 等々は防止する。
</li><li>［
埋込まれた頁が、~dataを格納するための~database~API, 等を利用して，その出自の~siteと通信する
］ことは防止しない。
</li></ul>

◎
Second, it can be used to embed content from a third-party site, sandboxed to prevent that site from opening pop-up windows, etc, without preventing the embedded page from communicating back to its originating site, using the database APIs to store data, etc.
</li>
</ul>
</div>


			</li>
			<li>
`~form$sbox
⇒
`allow-forms@v ~NIN %~tokenたち
◎
The sandboxed forms browsing context flag, unless tokens contains the allow-forms keyword.
</li>
			<li>
`~pointer~lock$sbox
⇒
`allow-pointer-lock@v ~NIN %~tokenたち
◎
The sandboxed pointer lock browsing context flag, unless tokens contains the allow-pointer-lock keyword.
</li>
			<li>
`~script$sbox
⇒
`allow-scripts@v ~NIN %~tokenたち
◎
The sandboxed scripts browsing context flag, unless tokens contains the allow-scripts keyword.
</li>
			<li>
<p>
`自動~特色機能$sbox
⇒
`allow-scripts$v ~NIN %~tokenたち
◎
The sandboxed automatic features browsing context flag, unless tokens contains the allow-scripts keyword (defined above).
</p>

<p class="note">注記：
この~flagは、`~script$sboxと同じ~keywordで緩められる
— この~flagにより許容されなくなる宣言的~特色機能は、~scriptが可能化されている下では自明にアリになるので。
◎
This flag is relaxed by the same keyword as scripts, because when scripts are enabled these features are trivially possible anyway, and it would be unfortunate to force authors to use script to do them when sandboxed rather than allowing them to use the declarative features.
</p>
			</li>
			<li>
`~document-domain$sbox
⇒
無条件
◎
The sandboxed document.domain browsing context flag.
</li>
			<li>
`~sandboxは補助~閲覧文脈に伝播する~flag$
⇒
`allow-popups-to-escape-sandbox@v ~NIN %~tokenたち
◎
The sandbox propagates to auxiliary browsing contexts flag, unless tokens contains the allow-popups-to-escape-sandbox keyword.
</li>
			<li>
`~sandbox化( ~modal )~flag$
⇒
`allow-modals@v ~NIN %~tokenたち
◎
The sandboxed modals flag, unless tokens contains the allow-modals keyword.
</li>
			<li>
`方位~lock$sbox
⇒
`allow-orientation-lock@v ~NIN %~tokenたち
◎
The sandboxed orientation lock browsing context flag, unless tokens contains the allow-orientation-lock keyword.
</li>
			<li>
`呈示$sbox
⇒
`allow-presentation@v ~NIN %~tokenたち
◎
The sandboxed presentation browsing context flag, unless tokens contains the allow-presentation keyword.
</li>
		</ul>
	</li>
</ol>

<hr>


<p>
`~sandbox法~flag集合$には、次に挙げる種類のものがある：
</p>


<ul>
	<li>
<p>
どの`~top-level閲覧文脈$も，
`~popup~sandbox法~flag集合@
を有する
— それは：
</p>

<ul ><li>`閲覧文脈$の作成-時には空~集合にするモノトスル。
</li><li>`閲覧文脈を選ぶ規則$により拡充される。
</li></ul>
◎
Every top-level browsing context has a popup sandboxing flag set, which is a sandboxing flag set. When a browsing context is created, its popup sandboxing flag set must be empty. It is populated by the rules for choosing a browsing context.
</li>
	<li>
<p>
どの`入子の閲覧文脈$も，
`~iframe~sandbox法~flag集合@
を有する
— それは：
</p>

<ul ><li>与えられた特定0の時点に，どの~flagが含められるかは、
`iframe$e 要素の`sandbox$a 属性により決定される。
</li></ul>

◎
Every browsing context that is a nested browsing context has an iframe sandboxing flag set, which is a sandboxing flag set. Which flags in a nested browsing context's iframe sandboxing flag set are set at any particular time is determined by the iframe element's sandbox attribute.
</li>
	<li>
<p>
どの`文書$も，
`作動中の~sandbox法~flag集合@
を有する
— それは：
</p>

<ul><li>`文書$の作成-時には空~集合にするモノトスル。
</li><li>`~navi$~algoにより拡充される。
</li></ul>

◎
Every Document has an active sandboxing flag set, which is a sandboxing flag set. When the Document is created, its active sandboxing flag set must be empty. It is populated by the navigation algorithm.
</li>
	<li>
<div class="p">
<p>
`~navi$~algoにより得られるどの資源も、
`強制~sandbox法~flag集合@
を有する
— それは：
</p>

<ul ><li>既定では空~集合とする。
</li><li>他の仕様は，ある種の~flagをこの集合に入れるように定義し得る。
</li></ul>

◎
Every resource that is obtained by the navigation algorithm has a forced sandboxing flag set, which is a sandboxing flag set. A resource by default has no flags set in its forced sandboxing flag set, but other specifications can define that certain flags are set.
</div>

<p class="note">注記：
`強制~sandbox法~flag集合$は、特に，
Content Security Policy `CSP$r により利用される。
◎
In particular, the forced sandboxing flag set is used by Content Security Policy. [CSP]
</p>
	</li>
</ul>


<hr>

<p class="algo-head">
`文書~用に~sandbox法を実装する@
ときは、所与の
( `文書$ %文書, `閲覧文脈$ %B )
に対し、次を走らす：
◎
To implement the sandboxing for a Document object document,＼
</p>

<p class="trans-note">【
引数 %B はこの訳による追加であり， %文書 が`属する閲覧文脈$と同じになるが、この手続きが呼出される時点では まだ そうなるように設定されていない場合もあるので，必要になる。
】</p>

<ol>
	<li>
以下において，ある~flag集合 %M で “拡充する” と記された所では、次を行うとする
⇒
%文書 の`作動中の~sandbox法~flag集合$に %M を成す すべての~flagを追加する
（集合なので、重複するものは除く）
◎
populate document's active sandboxing flag set with the union of the flags that are present in the following sandboxing flag sets:
</li>
	<li>
~IF［
%B は`~top-level閲覧文脈$である
］
⇒
%B の`~popup~sandbox法~flag集合$で拡充する
◎
If document's browsing context is a top-level browsing context, then: the flags set on the browsing context's popup sandboxing flag set.
</li>
	<li>
~IF［
%B は`入子の閲覧文脈$である
］
⇒＃
%B の`~iframe~sandbox法~flag集合$で拡充する；
%B の`親~閲覧文脈$にて`作動中の文書$の`作動中の~sandbox法~flag集合$で拡充する
◎
If document's browsing context is a nested browsing context, then: the flags set on the browsing context's iframe sandboxing flag set.
◎
If document's browsing context is a nested browsing context, then: the flags set on the browsing context's parent browsing context's active document's active sandboxing flag set.
</li>
	<li>
%文書 の資源があれば その`強制~sandbox法~flag集合$で拡充する
◎
The flags set on document's resource's forced sandboxing flag set, if it has one.
</li>
</ol>


		</section>
</main>

