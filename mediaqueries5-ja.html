<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Media Queries Level 5 （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-css.css" type="text/css" />
<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>

Util.ready = function(){
	const source_data = {
		toc_main: 'MAIN0',
		generate: expand
	};
	Util.switchWordsInit(source_data);
}


function expand(){
	const class_map = this.class_map;
	const tag_map = this.tag_map;
	const link_map = this.link_map;

	let context_desc = '';

	return this.html.replace(
		/`(.+?)([$@\^])(\w*)/g,
		create_html
	);

	function create_html(match, key, indicator, klass){

let text = key;
let href = '';

switch(klass){
case 'r':
	text = `[${key}]`;
	href = `#biblio-${key.toLowerCase()}`;
	break;
case 't':
	text = `&lt;${text}&gt;`;
	break;
case 'd':
	if(indicator === '@'){
		context_desc = `#valdef-media-${key}-`;
	}
	break;
case 'v':
	href = context_desc + key;
	break;
case 'at':
	text = `@${text}`;
	break;
case 'en':
	return `<span lang="en-x-a0">${key}</span>`;
	break;
}

let tag = tag_map[klass];
if(tag) {
	let classname = class_map[klass];
	classname = classname ? ` class="${classname}"` : '';
	text = `<${tag}${classname}>${text}</${tag}>`;
}

if(indicator !== '^'){
	href = link_map[ klass ? `${klass}.${key}` : key ] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = `<a href="${href}">${text}</a>`;
		break;
	case '@':
		text = `<dfn id="${href.slice(1)}">${text}</dfn>`;
		break;
	}
}

return text;
	}
}

</script>

<script type="text/plain" id="_source_data">


●●options

spec_title:Media Queries Level 5
spec_date:2019-04-19
trans_update:2019-04-20
source_checked:170317
page_state_key:CSS
original_url:https://drafts.csswg.org/mediaqueries-5/
spec_status:ED
ref_id_prefix:biblio-
ref_id_lowercase:true
conformance:css
copyright:2019,permissive
trans_1st_pub:2017-05-02


●●class_map
d:descriptor
p:property
at:at-rule
u:unit
v:value
f:func
t:type
e:element
a:attr
et:event-type
css:css

●●tag_map
d:code
p:code
at:code
u:code
v:code
I:code
m:code
f:func
e:code
a:code
c:code
et:code
t:var
V:var
css:code
em:em

●●original_id_map

valdef-media-forced-colors-none:valdef-media-prefers-color-scheme-none
valdef-media-forced-colors-active:valdef-media-prefers-color-scheme-active


●●link_map



at.custom-media:#at-ruledef-custom-media
at.import:~CASCADE#at-ruledef-import
at.media:~CSSCOND#at-ruledef-media

d.environment-blending:#descdef-media-environment-blending
d.forced-colors:#descdef-media-forced-colors
d.inverted-colors:#descdef-media-inverted-colors
d.light-level:#descdef-media-light-level
d.prefers-color-scheme:#descdef-media-prefers-color-scheme
d.prefers-contrast:#descdef-media-prefers-contrast
d.prefers-reduced-motion:#descdef-media-prefers-reduced-motion
d.prefers-reduced-transparency:#descdef-media-prefers-reduced-transparency
d.scripting:#descdef-media-scripting

	v.dim:#valdef-media-light-level-dim
	v.normal:#valdef-media-light-level-normal
	v.washed:#valdef-media-light-level-washed

	v.opaque:#valdef-media-environment-blending-opaque
	v.additive:#valdef-media-environment-blending-additive
	v.subtractive:#valdef-media-environment-blending-subtractive

	v.none:#valdef-media-scripting-none
	v.initial-only:#valdef-media-scripting-initial-only
	v.enabled:#valdef-media-scripting-enabled

v.true:#valdef-custom-media-true
v.false:#valdef-custom-media-false

	v.none:#valdef-media-inverted-colors-none
	v.inverted:#valdef-media-inverted-colors-inverted

	v.no-preference:#valdef-media-prefers-reduced-motion-no-preference
	v.reduce:#valdef-media-prefers-reduced-motion-reduce

	v.no-preference:#valdef-media-prefers-reduced-transparency-no-preference
	v.reduce:#valdef-media-prefers-reduced-transparency-reduce


	v.no-preference:#valdef-media-prefers-contrast-no-preference
	v.high:#valdef-media-prefers-contrast-high
	v.low:#valdef-media-prefers-contrast-low

	v.no-preference:#valdef-media-prefers-color-scheme-no-preference
	v.light:#valdef-media-prefers-color-scheme-light
	v.dark:#valdef-media-prefers-color-scheme-dark

	v.none:#valdef-media-forced-colors-none
	v.active:#valdef-media-forced-colors-active


t.number:~CSSVAL#number-value
t.dimension:~CSSVAL#typedef-dimension

t.extension-name:~CSSWG/css-extensions-1/#typedef-extension-name
t.media-query-list:~MQ4#typedef-media-query-list

~custom媒体~query:#custom-media-query

媒体~query:~MQ4#media-query
素~文脈:~MQ4#plain-context
真偽~文脈:~MQ4#boolean-context
	真偽~文脈:#boolean-context
媒体~特能:~MQ4#media-feature
範囲~文脈:~MQ4#range-context
離散型:~MQ4#discrete-type
素~形:~MQ4#plain-form
真偽~形:~MQ4#boolean-form
範囲~形:~MQ4#range-form

ゼロ値:~MQ4#zero-value
実~値:~MQ4#real-value
~test値:~MQ4#testing-value

強制d色~mode:~CSSCOLORADJUST#forced-colors-mode
r.css-color-adjust-1:~CSSCOLORADJUST

●●words_table1
CSSCOLORADJUST:css-color-adjust-ja.html

●●words_table



	●特能
For:for:用途
	媒体:medium
素:plain::~
形:form::~
離散型:discrete::~

真:true::~
偽:false::~
ゼロ:zero::~

	●装置／媒体／UI
特性:characteristics:~
	検出-法:detecting

	●色／
背景:background::~
色:color::~
	全-透明:fully transparent
透明度:transparency::~
	透明度を増す:transparent or translucent
contrast::::コントラスト
混色-:blend::~
明るさ:brightness::~
	~~明度:light
明るい:lightな::~
暗い:darkな::~
	暗く:dark
	~~暗:dim
黒:black::~
白:white::~
画素:pixel::~

	●CSS／呈示
pre-rendering:::事前具現化::事前レンダリング
幅狭:narrow:~
条件付きで:conditionalに:~

	●環境~媒体に関する特能
照度:lux::~
環境光:ambient light::~
光:light::~
日差し:daylight::~
較正-:calibrate::~
過度の:excessive:~
	眩しい:exceptionally bright
	眩しい:glowing
	~~強い:bright

	眩し過ぎ:distracting
不快:unpleasant:~
読手:reader:読み手
夜間:night time:~
屋内:indoor:~
漂白-:wash out:~
閾値:threshold:~
sensor::::センサ
測定:measurement:~
	低／高
液晶:liquid crystal:~
	液晶:LCD
障害:disabilities:~
重複-:overlap:~
直交的に:orthogonal fashionで:~
window::::ウィンドウ
	~~特別な調整:particular adjustment
display::::ディスプレイ
monitor::::モニタ
紙:paper:~
実世界:real world:現実
浴室:bathroom:~
鏡:mirror:~

加法的:additive::~
減法的:subtractive::~
	加法的に:using additive mixing
	減法的に:using subtractive mixing
	車内:in a car
	視認性を改善:increase the appeal or improve legibility
	head-up

読取る:readする:読み取る
	読める:remain readable
理想的:ideal:~
有効:valid:~
控えて:refrainして:~
必要性:need:~

	●scriptingに関する特能
	印刷~時:printing
timeout:

誂える:tailorする:あつらえる
保守的:conservative:~
実用:practical:~
	具体的には:For instance,
	突き詰める:pinpoint
	見込みが高い:likely
	基準:threshold
木目細かで:fine-grainedで:~
木目細かく:fine-grainedに:~
	生成元とする:originating
	切る:turn off

	●~custom媒体~query
responsive-site:responsive site:::レスポンシブサイト
編集:edit:~
危険要素:hazard:~
	発見が困難:difficult-to-find
	単に〜にされた別名~simply-named~alias
触れる:touchする:~
循環依存:circular dependency:~
場合分け:breakpoint:~
代用0:alias:代用
文:statement:~
選抜-:qualify:~

	●利用者選好
	好ましい:preferably
影:shadow:~
反転:inversion:~
反転-:invert:~
	~~全画面の:all
強制d:forced:強制
	強制:forcibly
	~textと背景の明／暗:light-on-dark and dark-on-light text
切替られ:switchでき:切り替えれ
写真:picture:~
読む:readする:~
頻繁:frequent:~
強調-:highlight:~
量:amount:~
最小化-:minimize:~
	動き:movement／motion
層:layer::~
theme::::テーマ
形状認識:shape recognition:~
色相:hue::~
ink::::インク
節約-:save:~
palette::::パレット

種類:kind:~
制限付き:limited:~
順応-:adapt:~
対抗策:counter measure:~
	内容を自覚する:content-aware

	知らない:no 〜 known
	上げる:larger
	小さい:small
	差:difference
	増減:increased or decreased
	~systemが その種の~UIをすでに施行…:We don’t necessarily want the page to try to undo …

	多様な:wide variety of
	？:Possible ways forward
	多様さ:variation
	分ける:split
	べた~~塗り:inked
	~~白い:blank
	打ち抜く:knocked out
	字形:letterform
	変動:variances
	選んだ:chosen
	打ち消しあう:cancelling
	MSFT
	Apple
	^en:increased
	^en:Increased Contrast
	^en:pattern fill
	^en:extremely high
	^en:black-on-white high contrast

	●仕様
差分:delta:~
不意の:accidentalな:~
分岐:divergence:~
二度手間:overhead:~
手頃:reasonable:~

	可能になる:allow
	抑えた:limit
	抑える:less
	完成:final
	~~改善-:help ameliorate
	書いて／書かれ:write
	用途:for
	完成:completely finalized／final
	可能になる:allow
	~~復帰-:reinstate
	悩まされ:suffer form
	適する:suitable
	記せる:
	必要:
	不要:not necessitate
	備える
	書-:write
	-:choose
	応じて:depend
	応じて:in response
	早期の:earlier

	●未分類
	~script用:scripting
参照r:refer:参照
	得る
	指す
	存続する限り:for the lifetime of

	●指示語
	何か
	何度
	何箇所
	同じに:identically
	全く同じに:in the same way
	場所
	多い:a lot
	大きく:very
	箇所
	度に
	所
	時
	時点
	様に
	済む
	種
	等
	節
	関する
	際に
	数
	渡って:across
	程に
	部分
	長く:long
	より高〜:has a higher level of
	より低〜:has a lower level of


●●ref_normative
[CSS-CASCADE-3]
    Elika Etemad; Tab Atkins Jr.. CSS Cascading and Inheritance Level 3. 19 May 2016. CR. URL: https://www.w3.org/TR/css-cascade-3/ 
[CSS-CONDITIONAL-3]
    CSS Conditional Rules Module Level 3 URL: https://www.w3.org/TR/css3-conditional/ 
[CSS-EXTENSIONS]
    Tab Atkins Jr.. CSS Extensions. ED. URL: https://drafts.csswg.org/css-extensions/ 
[CSS-VALUES-4]
    CSS Values and Units Module Level 4 URL: https://drafts.csswg.org/css-values-4/ 
[MEDIAQUERIES-4]
    Florian Rivoal; Tab Atkins Jr.. Media Queries Level 4. 5 September 2017. CR. URL: https://www.w3.org/TR/mediaqueries-4/ 
[RFC2119]
    S. Bradner. Key words for use in RFCs to Indicate Requirement Levels. March 1997. Best Current Practice. URL: https://tools.ietf.org/html/rfc2119 


●●trans_metadata
<p>
~THIS_PAGEは、~W3Cにより編集者草案として公開された
<a href="~SPEC_URL">Media Queries Level 5</a>
を日本語に翻訳したものです。
~PUB
</p>


●●spec_metadata

編集者草案
	https://drafts.csswg.org/mediaqueries-5/

最新の課題
	<a href="https://github.com/w3c/csswg-drafts/labels/mediaqueries-5">GitHub Issues</a>

編集
	Dean Jackson (Apple)
	<a href="http://florian.rivoal.net">Florian Rivoal</a> (Invited Expert)
	<a href="http://xanthir.com/contact/">Tab Atkins Jr.</a> (Google)

Suggest an Edit for this Spec
	<a href="https://github.com/w3c/csswg-drafts/blob/master/mediaqueries-5-5/Overview.bs">GitHub Editor</a>

</script>
</head>
<body>


<header>


	<hgroup>
<h1 id="title">媒体クエリ — Media Queries Level 5</h1>
	</hgroup>

</header>

<div id="MAIN" hidden>

	<section id="abstract">
~ABSTRACT

<p>
`媒体~query$を用いれば、作者は、具現化されている文書から独立に，~UAや表示-装置の値や特能を~testしたり~queryすることが可能になる。
それは，~CSS `media$at 規則~内で利用され、~HTMLや~JSなどの様々な文脈や言語の下で，文書に~styleを条件付きで適用する。
◎
Media Queries allow authors to test and query values or features of the user agent or display device, independent of the document being rendered. They are used in the CSS @media rule to conditionally apply styles to a document, and in various other contexts and languages, such as HTML and JavaScript.
</p>

~CSSisaLANG

	</section>
	<section id="status">
~STATUSofTHIS

<p>
この節では、発行時点における…
これは編集者草案の公の複製です…
【以下，この節の他の内容は <a href="css-common-ja.html#status">CSS 日本語訳 共通ページ</a>に委譲。】
</p>


<!-- 重複
Once complete, this specification will include and extend Media Queries Level 4. [MEDIAQUERIES-4]
 -->

	</section>

<main id="MAIN0">

	<section id="intro">

<h2 title="Introduction">1. 序論</h2>

<p class="note">注記：
これを書いている時点では、 `MEDIAQUERIES-4$r はまだ完成していない。
不意の分岐と保守の二度手間を避けるため、この仕様は
`MEDIAQUERIES-4$r
からの差分~仕様として書かれている。
~level 4 仕様が完成したなら、その内容は この仕様の中に統合され，それを置換することになる。
それまでは、この仕様は、~level 4 に対する追加と拡張のみを包含する。
◎
Note: At the time of writing, [MEDIAQUERIES-4] is not completely finalized yet. To avoid accidental divergences and maintenance overhead, This specification is written as a delta specification over Media Queries Level 4. Once the level 4 specification is final, its content will be integrated into this specification, which will then replace it. Until then, Media Queries Level 5 only contains additions and extensions to level 4.
</p>

			<section id="media">
<h3 title="Media Queries">1.1. 媒体~query</h3>

<p class="issue">
~level 4 が完成したなら その注釈文から複製する。
◎
Copy level 4 prose when final
</p>


				<section id="mq-boolean-context">
<h4 title="Evaluating Media Features in a Boolean Context">1.1.1. 真偽~文脈における媒体~特能の評価-法</h4>

<p class="issue">
~level 4 が完成したなら その注釈文から複製する。
~level 4 から変更された，次の段落を除いて。
【以下，その段落の内容は、等価な内容を~level 4 の和訳における`ゼロ値$の定義に組み込んだので，省略する。】
◎
Copy level 4 prose when final, except the following paragraph which is changed compared to level 4.
◎
When written like this, the media feature is evaluated in a boolean context. If the feature would be true for any value other than the number 0, a &lt;dimension&gt; with the value 0, the keyword none, or a value explicitely defined by that media feature to evaluate as false in a boolean context, the media feature evaluates to true. Otherwise, it evaluates to false.
</p>


			</section>
		</section>
	</section>
	<section id="mf-environment">
<h2 title="Environment Media Features">2. 環境~媒体に関する特能</h2>

		<section id="light-level">
<h3 title="Detecting the ambient light level: the light-level feature">2.1. 環境光~levelの検出-法： `light-level^d 特能</h3>

◎述 `light-level@d
◎用 `media$at
◎値 `dim$v | `normal$v | `washed$v
◎型 `離散型$
◎表終

<p>
媒体~特能 `light-level$d は、装置が利用されている環境光~levelを~queryする。
作者は，それに応じて文書の~styleを調整できる。
妥当な値は：
◎
The light-level media feature is used to query about the ambient light-level in which the device is used, to allow the author to adjust style of the document in response. The following values are valid:
</p>

<dl>
	<dt>`dim@v</dt>
	<dd>
装置は、~~暗い環境の下で~利用されている
— 過度の~contrastや明るさが，読手には眩し過ぎる あるいは不快になる程に。
例えば、夜間, あるいは照明が~~暗くされた屋内。
◎
The device is used in a dim environment, where excessive contrast and brightness would be distracting or uncomfortable to the reader. For example: night time, or a dimly illuminated indoor environment.
</dd>

	<dt>`normal@v</dt>
	<dd>
装置は、~screenに理想的な範囲の光~level環境の下で利用されていて，~~特別な調整は不要である。
◎
The device is used in a environment with a light level in the ideal range for the screen, and which does not necessitate any particular adjustment.
</dd>

	<dt>`washed@v</dt>
	<dd>
装置は、眩しい環境の下で利用されている
— ~screenが “漂白-” され, 読取るのが困難な程に。
例えば、~~強い日差し。
◎
The device is used in an exceptionally bright environment, causing the screen to be washed out and difficult to read. For example: bright daylight.
</dd>

</dl>

<p>
~UAは、これら 3 ~levelの合間の閾値を，装置の特性も織り込んで設定するべきである。
◎
User agents should set the thresholds between the three levels in a way that takes into account the characteristics of the device.
</p>


<div class="note">

<p>
~UAは，この媒体~特能の値を，環境光~sensorに基づいて調整することになると期待されているが、この仕様は，いくつかの理由から，照度の測定を通して この 3 ~levelを定義することを、意図的に控えている：
◎
Even though it is expected that User Agents will adjust the value of this media feature based on ambient light sensors, this specification intentionally refrains from defining the three levels in terms of a measurement in lux, for several reasons:
</p>

<ul>
	<li>
光~sensorを備える装置は、通例的に，~screenの明るさを自動的に調整する。
調整~levelに依存して，低／高 ~contrast内容に必要な閾値は，様々になり得る。
◎
Devices equipped with a light sensor usually adjust the brightness of the screen automatically. Depending on the level of adjustment, the thresholds for needing a low contrast or hight contrast content may vary.
</li>

	<li>
~screen技術が異なれば、漂白される環境光~levelも大きく異なる
— e-ink は，~~強い日差しでも読める表示になるが、液晶~表示はそうでない。
◎
Different screen technologies wash out at very different ambient light levels; e-ink displays remain readable in bright daylight, while liquid crystal displays do not.
</li>

	<li>
埋込d光~sensorの多くは，正確aに較正されていないので、様々な装置~間に渡って有効になるような，有用な~閾値を確立するのは困難である。
◎
Many embedded light sensors are inaccurately calibrated, making it difficult to establish useful thresholds valid across devices.
</li>

</ul>
</div>

<p>
~accessibilityの目的のため、~UAは，利用者が環境光~levelとは独立に 3 ~levelを切替られるような，手動による制御を提供してもヨイ
—
視覚-障害がある利用者にとっては、高~contrast用／低~contrast用の~styleが，より適することもあり得るので。
◎
For accessibility purposes, user agents may offer manual controls allowing the user to switch between the three levels of independently of the ambient light level, as high contrast or low contrast styles may be more suitable for users with visual disabilities.
</p>

<p class="issue">
この媒体~特能は、~accessibilityの用途において
<a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh465764.aspx"
>Microsoft により提案された高~contrast媒体~特能</a>
と重複する部分が多い。
これを、両者の利用事例すべてを受持つように調整できるだろうか？
あるいは、両者を重複させず直交的に働くように，どうにか改変するか？
◎
Using this media feature for accessibility purposes overlaps a lot with the high-contrast media feature proposed by Microsoft. Can we adjust this so that it covers all use cases for both, or somehow modify them to work in an orthogonal, rather than overlapping, fashion?
</p>


<div class="example">

<pre>
@media (light-level: normal) {
  p { background: url("texture.jpg"); color: #333 }
}
@media (light-level: dim) {
  p { background: #222; color: #ccc }
}
@media (light-level: washed) {
  p { background: white; color: black; font-size: 2em; }
}
</pre>
</div>

		</section>
		<section id="environment-blending">
<h3 title="Detecting the display technology: the environment-blending feature">2.2. ~display技術の検出-法： `environment-blending^d 特能</h3>

◎述 `environment-blending@d
◎用 `media$at
◎値 `opaque$v | `additive$v | `subtractive$v
◎型 `離散型$
◎表終

<p>
媒体~特能 `environment-blending$d は、利用者の~displayの特徴を~queryする。
作者は、~display技術に応じて~pageの視覚-や~layoutを調整することにより，視認性を改善できるようになる。
◎
The environment-blending media feature is used to query the characteristics of the user’s display so the author can adjust the style of the document. An author might choose to adjust the visuals and/or layout of the page depending on the display technology to increase the appeal or improve legibility.
</p>

<p>
妥当な値は：
◎
The following values are valid:
</p>

<dl>
	<dt>`opaque@v</dt>
	<dd>
文書は，伝統的な~monitorや紙などの不透明な媒体~上に具現化されている。
黒は暗くなり，白は~~明度 100% になる。
◎
The document is rendered on an opaque medium, such as a traditional monitor or paper. Black is dark and white is 100% light.
</dd>

	<dt>`additive@v</dt>
	<dd>
~displayは、~canvasの色と実世界のそれを加法的に混色している。
黒は全-透明になり【すなわち、実世界の風景が透過する】，白は~~明度 100% になる。
◎
The display blends the colors of the canvas with the real world using additive mixing. Black is fully transparent and white is 100% light.
</dd>
	<dd class="example">
例えば、車内 `head-up^en ~display。
【 “HUD”— 外の風景と重ね合わせて表示する装置】
◎
For example: a head-up display in a car.
</dd>

	<dt>`subtractive@v</dt>
	<dd>
~displayは、~canvasの色と実世界のそれを減法的に混色している。
白は全-透明になり，色が暗いほど【実世界との】~contrastが高くなる。
◎
The display blends the colors of the canvas with the real world using subtractive mixing. White is fully transparent and dark colors have the most contrast.
</dd>
	<dd class="example">
例えば、浴室の鏡に埋込まれた液晶~display。
◎
For example: an LCD display embedded in a bathroom mirror.
</dd>
</dl>

<p class="issue">
`subtractive$v 値の必要性はあるのか？
◎
Is there a need for the subtractive value?
</p>

<div class="example">

<pre>
body { background-color: white; }
p { color: black; }

@media(environment-blending: additive) {
    body { background-color: black; }
    p { color: white; font-size: 16px; font-weight: 1000; }
}
</pre>

</div>

		</section>
	</section>
	<section id="mf-scripting">
<h2 title="Scripting Media Features">3. ~scriptingに関する媒体~特能</h2>
		<section id="scripting">
<h3>3.1. ~scripting~support：`scripting^d 特能</h3>

◎述 `scripting@d
◎用 `media$at
◎値 `none$v | `initial-only$v | `enabled$v
◎型 `離散型$
◎表終

<p>
媒体~特能 `scripting$d は、［
~JSなどの~script用~言語が，現在の文書にて~supportされているかどうか
］を~queryするために利用される。
◎
The scripting media feature is used to query whether scripting languages, such as JavaScript, are supported on the current document.
</p>


<dl>
	<dt>`enabled@v</dt>
	<dd>
~UAは~pageの~scriptingを~supportしていて，現在の文書における~scriptingは文書が存続する限り作動中であることを指示する。
◎
Indicates that the user agent supports scripting of the page, and that scripting in the current document is enabled for the lifetime of the document. 
</dd>

	<dt>`initial-only@v</dt>
	<dd>
~UAは~pageの~scriptingを~supportしていて，現在の文書における~scriptingは~pageの初期 読込n時だけ可能化されていて, その後は~supportされないことを指示する。
例えば、印刷された~pageや,
（~pageを~server上で具現化して，~pageのほぼ静的な~versionを利用者に送信するような）~pre-rendering~network~proxy。
◎
Indicates that the user agent supports scripting of the page, and that scripting in the current document is enabled during the initial page load, but is not supported afterwards. Examples are printed pages, or pre-rendering network proxies that render a page on a server and send a nearly-static version of the page to the user.
</dd>

	<dd class="issue">
どこまでを初期~scriptingに含めるべきか
— すなわち、`実~値$が `initial-only$v になるための基準を，明示的に設定するべきか？
そのようなものがあれば、作者は依存できるものを知った上で，それに則って~scriptを誂えることも可能になる。
一方で、含めるべき~~範囲を突き詰めるのは困難である：
狭め過ぎた場合、作者が依存できる~scriptingの便宜性は，実用になる所まで拘束されるであろう
— 実際には，すべての~UAがより有意に広い所まで~supportできるとしても。
が，より広げようとすると、~UAのうち，［
読込n時の~scriptingは~supportするが、事例によっては複階的な経験則に基づいてそれを制約するもの
］を除外することになる。
具体的には、保守的な定義は，少なくとも［
すべての~inline~scriptを走らせて `DOMContentLoaded^et ~eventを発火する所
］まで含める見込みが高い。
が、ほとんどの（あるいはすべてかもしれない） `initial-only$v ~UAが（ `async^c, `defer^c も含め）外部~scriptを読込んで `load^et ~eventも発火する場合、これに拘束しても，作者にとっては有用になるとは見えない。
一方で，［
外部~scriptが読込まれ, `load^et ~eventが発火される所
］まで要求すると、 Opera mini の様な，［
概して走らすが，~timeoutその他の経験則に基づいて走らせないこともある
］ような~UAを除外することになる。
（ <a href="~CSSissue/503">issue #503</a> ）
◎
Should there be an explicit minimum threshold to meet before a UA is allowed to claim initial-only? Having one would mean authors would know what they can depend on, and could tailor their scripts accordingly. On the other hand, pinpointing that threshold is difficult: if it is set too low, the scripting facilities that authors can depend on may be to constrained to be practical, even though actual UAs may potentially all support significantly more. But trying to set it higher may cause us to exclude UAs that do support scripting at loading time, but restrict it in some cases based on complex heuristics. For instance, conservative definitions likely include at least running all inline scripts and firing the DOMContentLoaded event. But it does not seem useful for authors to constrain themselves to this if most (or maybe all) initial-only UAs also load external scripts (including async and defer) and fire the load event. On the other hand, requiring external scripts to be loaded and the load event to be fired could exclude UAs like Opera mini, which typically do run them, but may decide not to based on timeouts and other heuristics. &lt;https://github.com/w3c/csswg-drafts/issues/503&gt;
</dd>

	<dt>`none@v</dt>
	<dd>
この文書に対しては，~UAは~scriptを走らせないことを指示する。
これには［
~script用~言語を~supportしない場合や,
~supportしていても現在の文書に対しては作動中でない場合
］も含まれる。
◎
Indicates that the user agent will not run scripts for this document; either it doesn’t support a scripting language, or the support isn’t active for the current document.
</dd>
</dl>

<p>
一部の~UAは、~scriptごと, あるいは~domainごとに，~scriptingの~supportを切る能を備えている
— 文書それぞれについて，一部のものは許容しつつ, すべての~scriptを走らすことはないような。
媒体~特能 `scripting$d は、その種の~scriptを走らすのも許容されるかどうかまで検出するほど木目細かではない。
そのような局面では、媒体~特能 `scripting$d の`実~値$は，文書と同じ~domainを生成元とする~scriptを走らすことが許容されて［
いるならば `enabled$v または `initial-only$v ／
いないならば `none$v
］になるべきである。
◎
Some user agents have the ability to turn off scripting support on a per script basis or per domain basis, allowing some, but not all, scripts to run in a particular document. The scripting media feature does not allow fine grained detection of which script is allowed to run. In this scenario, the value of the scripting media feature should be enabled or initial-only if scripts originating on the same domain as the document are allowed to run, and none otherwise.
</p>

<p class="note">注記：
この媒体~特能は、どの~scriptを走らすことが許容されているかを木目細かく検出できるように，
CSS の将来~levelにて拡張され得る。
◎
Note: A future level of CSS may extend this media feature to allow fine-grained detection of which script is allowed to run.
</p>

		</section>
	</section>
	<section id="custom-mq">
<h2 title="Custom Media Queries">4. ~custom媒体~query</h2>

<p>
媒体~queryを利用する文書を設計する際には、複数の場所で同じ媒体~queryが利用され得る
—
複数の `import$at 文を選抜するためなど。
同じ媒体~queryを何度も繰返すのは、編集~時の危険要素になる
— 作者は、何か変更する度に，それらすべてを全く同じに編集しなければならなくなる。
あるいは、 CSS の中で発見が困難な~bugに悩まされることになる。
◎
When designing documents that use media queries, the same media query may be used in multiple places, such as to qualify multiple @import statements. Repeating the same media query multiple times is an editing hazard; an author making a change must edit every copy in the same way, or suffer from difficult-to-find bugs in their CSS.
</p>

<p>
これを~~改善するため、この仕様は，`~custom媒体~query$を定義する手法を定義する。
それは単に，より長く複階的な媒体~queryを指す別名であり、複数~箇所で利用される媒体~queryに，代わりに`~custom媒体~query$をあてがえるようにする。
これは，媒体~queryを記せる所なら どこでも利用でき、媒体~queryを編集する際にも 1 行の~codeに触れるだけで済むようになる。
◎
To help ameliorate this, this specification defines a method of defining custom media queries, which are simply-named aliases for longer and more complex media queries. In this way, a media query used in multiple places can instead be assigned to a custom media query, which can be used everywhere, and editing the media query requires touching only one line of code.
</p>

<p>
`~custom媒体~query@
は、 `custom-media$at 規則で定義される：
◎
A custom media query is defined with the @custom-media rule:
</p>

<pre class="prod">
`custom-media@at
        = @custom-media `extension-name$t
          [ `media-query-list$t | `true^v | `false^v ];
</pre>


<p>
しかる後、 `extension-name$t を，媒体~queryを記せる所で利用できるようになる。
それは、`真偽~文脈$の下で利用され<strong>なければナラナイ</strong>
—
他の文脈（`素~形$／`範囲~形$）で利用された場合、構文~errorになる。
`media-query-list$t が与えられた場合、この`~custom媒体~query$は，それが表現する `media-query-list$t が［
真に評価されるならば真,
偽に評価されるならば偽
］に評価される。
［
<dfn id="valdef-custom-media-true">`true^v</dfn> ／
<dfn id="valdef-custom-media-false">`false^v</dfn>
］が与えられた場合、`~custom媒体~query$は［
真 ／ 偽
］に評価される。
◎
The &lt;extension-name&gt; can then be used in a media feature. It must be used in a boolean context; using them in a normal or range context is a syntax error. If a &lt;media-query-list&gt; is given, the custom media query evaluates to true if the &lt;media-query-list&gt; it represents evaluates to true, and false otherwise. If true or false is given, the custom media query evaluates to true or false, respectively.
</p>

<p>
`custom-media$at
規則は、他の`~custom媒体~query$を参照rすることもできる。
しかしながら、~loopは禁止される
— `~custom媒体~query$は、それを直接的／間接的に参照rしている別の`~custom媒体~query$を通して定義されてはナラナイ。
そのような、循環依存を伴う`~custom媒体~query$を定義しようと試みられた場合、その~loop内のすべての`~custom媒体~query$の定義を失敗させるモノトスル。
◎
A @custom-media rule can refer to other custom media queries. However, loops are forbidden, and a custom media query must not be defined in terms of itself or of another custom media query that directly or indirectly refers to it. Any such attempt of defining a custom media query with a circular dependency must cause all the custom media queries in the loop to fail to be defined.
</p>

<p>
複数の `custom-media$at 規則が同じ `extension-name$t を宣言している場合、最後のものを除くすべては，無視される。
◎
If multiple @custom-media rules declare the same &lt;extension-name&gt;, the truth value is based on the last one alone, ignoring all previous declarations of the same &lt;extension-name&gt;.
</p>

<p class="note">注記：
~error取扱いの目的においては、未定義の`媒体~特能$は，偽に評価される`媒体~特能$から異なる。
詳細は
Media Queries 4 の
<a href="~MQ4#error-handling">~error取扱い節</a>
を見よ。
◎
Note: For error handling purposes, an undefined media feature is different from a media feature that evaluates to false. See Media Queries 4 §3.2 Error Handling for details.
</p>

<div class="example">
<p>
例えば，ある~responsive-siteが、特定0の場合分けを何箇所かに利用する場合に、手頃な名前で代用0できる：
◎
For example, if a responsive site uses a particular breakpoint in several places, it can alias that with a reasonable name:
</p>

<pre>
@custom-media --narrow-window (max-width: 30em);

@media (--narrow-window) {
  /* <span class="comment">
幅狭な~window~style
◎
narrow window styles
</span> */
}
@media (--narrow-window) and (script) {
  /* <span class="comment">
~scriptが許容されるときのための特別な~style
◎
special styles for when script is allowed
</span> */
}
  /* etc */
</pre>
</div>


		<section id="script-custom-mq">
<h3 title="Script-based Custom Media Queries">4.1. ~scriptに基づく~custom媒体~query</h3>

<div class="issue">
<p>
~JS用に，名前（ `extension-name$t ）から値への対応付けを定義する。
値は `MediaQueryList^I ~objまたは真偽値をとり得る
— この場合、名前は上と同じに扱われる。
あるいは、数や文字列もとることができ、その場合、通常の媒体~queryと~~同じに扱われ，<!-- ＊通常 -->`素~文脈$／`範囲~文脈$の構文でも利用できる
— 次の様に：
◎
Define a map of names to values for JS. Values can be either a MediaQueryList object or a boolean, in which case it’s treated identically to the above, or can be a number or a string, in which case it’s treated like a normal MQ, and can use the normal or range context syntax. Like:
</p>

<pre>
&lt;script&gt;
CSS.customMedia.set('--foo', 5);
&lt;/script&gt;
&lt;style&gt;
@media (_foo: 5) { ... }
@media (_foo &lt; 10) { ... }
&lt;/style&gt;
</pre>

</div>
		</section>
	</section>
	<section id="mf-user-preferences">
<h2 title="User Preference Media Features">5. 利用者の選好に関する媒体~特能</h2>

		<section id="inverted">
<h3 title="Detecting the desire for inverted colors on the display: the inverted-colors feature">5.1.  表示-色の反転が欲されていることの検出-法： `inverted-colors^d 特能</h3>

◎述 `inverted-colors@d
◎用 `media$at
◎値 `none$v | `inverted$v
◎型 `離散型$
◎表終

<p>
媒体~特能 `inverted-colors$d は、内容の色が表示において反転されているかどうかを指示する。
◎
The inverted-colors media feature indicates whether the content is displayed normally, or whether colors have been inverted.
</p>

<p class="note">
これは，［
~UAまたは下層~OSが，全画面の色~反転~表示を強制している
］ことを指示するものであり、そのようにすることを要請するものではない。
これは、［
利用者が~textと~~背景の明／暗を切替られるようにする，単純な~accessibilityの特能
］として供されることがある。
しかしながら、［
写真まで反転する ／ 影を強調する
］などの，内容の可読性を~~損なう副作用もある。
◎
Note: This is an indication that the user agent or underlying operating system has forcibly inverted all colors, not a request to do so. This is sometimes provided as a simple accessibility feature, allowing users to switch between light-on-dark and dark-on-light text. However, this has unpleasant side effects, such as inverting pictures, or turning shadows into highlights, which reduce the readability of the content.
</p>

<dl>
	<dt>`none@v</dt>
	<dd>
色は通常と~~同じに表示されている。
◎
Colors are displayed normally.
</dd>

	<dt>`inverted@v</dt>
	<dd>
表示~区画~内のすべての画素は反転されている。
◎
All pixels within the displayed area have been inverted.
</dd>
	<dd>
<p>
この値は、~UAが何らかの種類の内容を自覚する反転
— 画像を保全するなど —
を行なった場合には合致しない【すなわち、`実~値$はこの値にならない】モノトスル。
◎
This value must not match if the User Agent has done some kind of content aware inversion such as one that preserves the images.
</p>

<p class="note">注記：
これは、この媒体~特能の目標が，［
`すべての画素^emを反転するような，内容を自覚しない~approachによる望ましくない効果
］を［
作者が軽減することを可能化する
］ことにあるからである。
内容を自覚する事例においても作者が対抗策をとれるとした場合、~UAの対抗策と互いに打ち消しあう~riskがある。
◎
Note: This is because the goal of this media feature is to enable authors to mitigate the undesirable effects of the non content aware approach that invert all the pixels. If the author were to take counter measures even in the content-aware cases, their counter measures and the UA’s would be at risk of cancelling each other.
</p>
	</dd>
</dl>

<div class="example">
<p>
例えば、利用者が~OSの~screen色~反転-能を頻繁に利用していて，反転による望ましくない副作用を抑えたければ、利用者~stylesheetに次を追加することを求めるであろう。
◎
For example, a user frequently using their operating system’s ability to invert the screens color may want to add the following to their user style sheet, to limit the undesirable side effects of the inversion.
</p>

<pre>
@media (inverted-colors) {
  img { filter: invert(100%); }
  * { text-shadow: none !important; box-shadow: none !important; }
}
</pre>

</div>

<p class="issue">
これは多様な仕方で実装されており、色相や画像の元の色を保全するものも しないものもある。
作者にとって，この媒体~queryが真であることに反応する明瞭な仕方は無い（
<a href="~CSSissue/3807">論点</a>
を見よ）。
多様さを反映するよう もっと値を追加するか，この特能を落とすか？
◎
This is implemented in a wide variety of ways some that do or do not preserve hue and/or images original colors and there is no clear way for authors to react to this media query being true. (See discussion.) Possible ways forward: add more values to reflect variations, or drop the feature.
</p>

		</section>
		<section id="prefers-reduced-motion">
<h3 title="Detecting the desire for less motion on the page: the prefers-reduced-motion feature">5.2. ~page上の~~動きを抑えるよう欲されていることの検出-法： `prefers-reduced-motion^d 特能</h3>


◎述 `prefers-reduced-motion@d
◎用 `media$at
◎値 `no-preference$v | `reduce$v
◎型 `離散型$
◎表終


<p>
`prefers-reduced-motion$d 媒体~特能は、［
利用者が、動きや~animationの量を最小化するよう~systemに要請している
］ことを検出するために利用される。
◎
The prefers-reduced-motion media feature is used to detect if the user has requested the system minimize the amount of animation or motion it uses.
</p>

<dl>
	<dt>`no-preference@v</dt>
	<dd>
~systemは、利用者の選好を知らないことを指示する。
この~keywordは、この媒体~特能における`ゼロ値$である。
◎
Indicates that the user has made no preference known to the system. This keyword value evaluates as false in the boolean context.
</dd>

	<dt>`reduce@v</dt>
	<dd>
利用者は、動きや~animationの量を最小化する~UIを選好する
— すなわち、本質的でない動きすべては除去されることが好ましい —
ことを~systemに通知したことを指示する。
◎
Indicates that user has notified the system that they prefer an interface that minimizes the amount of movement or animation, preferably to the point where all non-essential movement is removed.
</dd>
</dl>

		</section>
		<section id="prefers-reduced-transparency">
<h3 title="Detecting the desire for reduced transparency on the page: the prefers-reduced-transparency feature">5.3. ~page上の透明度を抑制するよう欲されていることの検出-法： `prefers-reduced-transparency^d 特能</h3>

◎述 `prefers-reduced-transparency@d
◎用 `media$at
◎値 `no-preference$v | `reduce$v
◎型 `離散型$
◎表終

<p>
`prefers-reduced-transparency$d 媒体~特能は、利用者が［
層の透明度を増す効果を最小化する
］よう，~systemに要請したかどうか検出するために利用される。
◎
The prefers-reduced-transparency media feature is used to detect if the user has requested the system minimize the amount of transparent or translucent layer effects it uses.
</p>

<dl>
	<dt>`no-preference@v</dt>
	<dd>
~systemは、利用者の選好を知らないことを指示する。
この~keywordは、この媒体~特能における`ゼロ値$である。
◎
Indicates that the user has made no preference known to the system. This keyword value evaluates as false in the boolean context.
</dd>

	<dt>`reduce@v</dt>
	<dd>
利用者は、［
層の透明度を増す効果を最小化する~UIを選好する
］ことを~systemに通知したことを指示する。
◎
Indicates that user has notified the system that they prefer an interface that minimizes the amount of transparent or translucent layer effects.
</dd>
</dl>

<p class="issue">
これは周りの選好
— 例： `pattern fill^en や背景 —
とどう相互作用するか？
それらは透明度についてではないが，形状認識に干渉する。
◎
How does this interact with preferences around e.g. pattern fills and backgrounds? They’re not about transparency, but they also interfere with shape recognition.
</p>


		</section>
		<section id="prefers-contrast">
<h3 title="Detecting the desire for increased or decreased color contrast from elements on the page: the prefers-contrast feature">5.4. ~page上の要素の色~contrastの増減が欲されていることの検出-法： `prefers-contrast^d 特能</h3>

◎述 `prefers-contrast@d
◎用 `media$at
◎値 `no-preference$v | `high$v | `low$v
◎型 `離散型$
◎表終


<p>
`prefers-contrast$d 媒体~特能は、［
利用者が、隣接する色どうしの~contrast量を増減するよう~systemに要請している
］ことを検出するために利用される。
例えば，多くの利用者は、背景との~contrast差が小さい~textを読むときに困難さを~~覚え，~contrastを上げることを選好するであろう。
◎
The prefers-contrast media feature is used to detect if the user has requested the system increase or decrease the amount of contrast between adjacent colors. For example, many users have difficulty reading text that has a small difference in contrast to the text background and would prefer a larger contrast.
</p>

<dl>
	<dt>`no-preference@v</dt>
	<dd>
~systemは、利用者の選好を知らないことを指示する。
この~keywordは、この媒体~特能における`ゼロ値$である。
◎
Indicates that the user has made no preference known to the system. This keyword value evaluates as false in the boolean context.
</dd>

	<dt>`high@v</dt>
	<dd>
利用者は、より高~contrastな~UIを選好することを~systemに通知したことを指示する。
◎
Indicates that user has notified the system that they prefer an interface that has a higher level of contrast.
</dd>

	<dt>`low@v</dt>
	<dd>
利用者は、より低~contrastな~UIを選好することを~systemに通知したことを指示する。
◎
Indicates that user has notified the system that they prefer an interface that has a lower level of contrast.
</dd>
</dl>


<p class="issue">
`forced-low^v, `forced-high^v
値も含めるべきか？
~systemが その種の~UIをすでに施行していたなら、~pageには，それに倣うよう求められるであろう。
◎
Should we include forced-low and forced-high values? We don’t necessarily want the page to try to undo what the system might be enforcing.
</p>

<p class="issue">
`high$v を 2 つの~levelに分けるか？
— “`extremely high^en”
（ MSFT の `black-on-white high contrast^en ~themeに利用されるような）
“`increased^en （ Apple の `Increased Contrast^en 設定群にて実装されるような）。
<a href="~CSSissue/2943">issue #2943</a>
◎
Split high into two levels, “extremely high” (as used in MSFT’s black-on-white high conrast theme) and “increased (as implemented in Apple’s Increased Contrast settings)? &lt;https://github.com/w3c/csswg-drafts/issues/2943&gt;
</p>

		</section>
		<section id="prefers-color-scheme">
<h3 title="Detecting the desire for light or dark color schemes: the prefers-color-scheme feature">5.5. 明るい／暗い色~schemeが欲されていることの検出-法： `prefers-color-scheme^d 特能</h3>


◎述 `prefers-color-scheme@d
◎用 `media$at
◎値 `no-preference$v | `light$v | `dark$v
◎型 `離散型$
◎表終

<p>
`prefers-color-scheme$d 媒体~特能は、［
利用者が、明るい／暗い 色~themeを利用するよう~pageに要請している
］ことを検出するために利用される。
◎
The prefers-color-scheme media feature is used to detect if the user has requested the page use a light or dark color theme.
</p>

<dl>

	<dt>`no-preference@v</dt>
	<dd>
~systemは、利用者の選好を知らないことを指示する。
この~keywordは、この媒体~特能における`ゼロ値$である。
◎
Indicates that the user has made no preference known to the system. This keyword value evaluates as false in the boolean context.
</dd>

	<dt>`light@v</dt>
	<dd>
利用者は、明るい~theme（明るい背景に暗い~text）を備える~pageを選好することを~systemに通知したことを指示する。
◎
Indicates that user has notified the system that they prefer a page that has a light theme (dark text on light background).
</dd>

	<dt>`dark@v</dt>
	<dd>
利用者は、暗い~theme（暗い背景に明るい~text）を備える~pageを選好することを~systemに通知したことを指示する。
◎
Indicates that user has notified the system that they prefer a page that has a dark theme (light text on dark background).
</dd>
</dl>

<p class="issue">
`forced-light^v, `forced-dark^v
値も含めるべきか？
~systemが その種の~UIをすでに施行していたなら、~pageには，それに倣うよう求められるであろう。
◎
Should we include forced-light and forced-dark values? We don’t necessarily want the page to try to undo what the system might be enforcing.
</p>

<p class="note">注記：
利用者~選好は媒体に応じて変わり得る。
例えば利用者は、~screenが眩しいときは暗い~themeを選好し，印刷~時には明るい~themeを選好することもあろう（~inkを節約したり，べた~~塗りの背景を~~白い字形で打ち抜くより~~白い紙に~textをべた~~塗りする方が良く印刷できるため）。
~UAには、そのような変動を考慮に入れることが期待される
— 文脈から選好を取り出すより， `prefers-color-scheme$d が媒体に適切な選好を反映するよう。
◎
Note: User preferences can vary by medium; for example, a user may prefer dark themes on a glowing screen, but light themes when printing (to save ink and/or because inked text on blank paper prints better than blank letterforms knocked out of an inked background). UAs are expected to take such variances into consideration so that prefers-color-scheme reflects preferences appropriate to the medium rather than preferences take out of context.
</p>

		</section>
		<section id="forced-colors">
<h3 title="Detecting a forced color palette: the forced-colors feature">5.6. 強制d色~paletteの検出-法： `forced-colors^d 特能</h3>

◎述 `forced-colors@d
◎用 `media$at
◎値 `none$v | `active$v
◎型 `離散型$
◎表終

<p>
`forced-colors$d 媒体~特能は、~UAが`強制d色~mode$を可能化した
— すなわち，利用者が~pageに対し選んだ制限付き色~paletteを施行している —
かどうかを検出するために利用される。
◎
The forced-colors media feature is used to detect if the user agent has enabled a forced colors mode where it enforces a user-chosen limited color palette on the page.
</p>

<dl>
	<dt>`none@v</dt>
	<dd>
`強制d色~mode$は作動中でない
— ~pageの色は、制限付き~paletteに強制されていない。
◎
Forced colors mode is not active; the page’s colors are not being forced into a limited palette.
</dd>

	<dt>`active@v</dt>
	<dd>
`強制d色~mode$は作動中であることを指示する。
~UAは、~CSS~system色~keywordを通して，作者に色~paletteを供することになる。
加えて，適切になるならば、作者が~pageを順応させられるよう，
`prefers-color-scheme$d の適切な値を誘発する【すなわち、その`実~値$に反映される】。
詳細は `css-color-adjust-1$r を見よ。
◎
Indicates that forced colors mode is active. The UA will provide the color palette to authors through the CSS system color keywords and, if appropriate, trigger the appropriate value of prefers-color-scheme so that authors can adapt the page. See [[!css-color-adjust-1#forced]] for details.
</dd>
</dl>

		</section>
	</section>
	<section id="changes">
<h2 title="Changes">変更点</h2>

<p id="changes-level-5">
<a href="~TR/mediaqueries-4/">Media Queries Level 4</a>
からの変更点は：
◎
Changes Since the Media Queries Level 4
◎
The following additions were made to this module since the Media Queries Level 4:
</p>

<ul>
	<li>
早期の Media Queries Level 4 草案から［
`light-level$d,
`inverted-colors$d,
~custom媒体~query
］節を，ここに~~復帰した。
◎
Reinstate the light-level, inverted-colors, and Custom Media Queries sections from earlier Media Queries Level 4 drafts.
</li>
	<li>
次に挙げる媒体~特能を追加した
⇒
`prefers-reduced-motion$d,
`prefers-reduced-transparency$d,
`prefers-contrast$d,
`prefers-color-scheme$d,
`forced-colors$d
◎
Added prefers-reduced-motion, prefers-reduced-transparency, prefers-contrast, prefers-color-scheme, and forced-colors media features.
</li>
</ul>

	</section>
	<section id="acknowledgments">
<h2 title="Acknowledgments">謝辞</h2>

<p>
この仕様は、
W3C Working Group on Cascading Style Sheets
により制作された。
◎
This specification is the product of the W3C Working Group on Cascading Style Sheets.
</p>

<p>
この仕様を改善するコメントを寄せられた `James Craig^en 氏に。
◎
Comments from James Craig improved this specification.
</p>

	</section>
</main></div>

